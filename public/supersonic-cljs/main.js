var shadow$provide = {};
(function(){
shadow$provide[0]=function(F,ba,P){function I(u){var v=u.length;if(v%4>0)throw Error("Invalid string. Length must be a multiple of 4");u=u.indexOf("\x3d");u===-1&&(u=v);return[u,u===v?0:4-u%4]}P.byteLength=function(u){u=I(u);var v=u[1];return(u[0]+v)*3/4-v};P.toByteArray=function(u){var v=I(u);var z=v[0];v=v[1];var G=new A((z+v)*3/4-v),w=0,H=v>0?z-4:z,B;for(B=0;B<H;B+=4)z=x[u.charCodeAt(B)]<<18|x[u.charCodeAt(B+1)]<<12|x[u.charCodeAt(B+2)]<<6|x[u.charCodeAt(B+3)],G[w++]=z>>16&255,G[w++]=z>>8&255,
G[w++]=z&255;v===2&&(z=x[u.charCodeAt(B)]<<2|x[u.charCodeAt(B+1)]>>4,G[w++]=z&255);v===1&&(z=x[u.charCodeAt(B)]<<10|x[u.charCodeAt(B+1)]<<4|x[u.charCodeAt(B+2)]>>2,G[w++]=z>>8&255,G[w++]=z&255);return G};P.fromByteArray=function(u){for(var v=u.length,z=v%3,G=[],w=0,H=v-z;w<H;w+=16383){for(var B=G,M=B.push,N,U=u,ca=w+16383>H?H:w+16383,C=[],J=w;J<ca;J+=3)N=(U[J]<<16&16711680)+(U[J+1]<<8&65280)+(U[J+2]&255),C.push(m[N>>18&63]+m[N>>12&63]+m[N>>6&63]+m[N&63]);N=C.join("");M.call(B,N)}z===1?(u=u[v-1],G.push(m[u>>
2]+m[u<<4&63]+"\x3d\x3d")):z===2&&(u=(u[v-2]<<8)+u[v-1],G.push(m[u>>10]+m[u>>4&63]+m[u<<2&63]+"\x3d"));return G.join("")};var m=[],x=[],A=typeof Uint8Array!=="undefined"?Uint8Array:Array;for(F=0;F<64;++F)m[F]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[F],x["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(F)]=F;x[45]=62;x[95]=63};
shadow$provide[1]=function(F,ba,P){P.read=function(I,m,x,A,u){var v=u*8-A-1;var z=(1<<v)-1,G=z>>1,w=-7;u=x?u-1:0;var H=x?-1:1,B=I[m+u];u+=H;x=B&(1<<-w)-1;B>>=-w;for(w+=v;w>0;x=x*256+I[m+u],u+=H,w-=8);v=x&(1<<-w)-1;x>>=-w;for(w+=A;w>0;v=v*256+I[m+u],u+=H,w-=8);if(x===0)x=1-G;else{if(x===z)return v?NaN:(B?-1:1)*Infinity;v+=Math.pow(2,A);x-=G}return(B?-1:1)*v*Math.pow(2,x-A)};P.write=function(I,m,x,A,u,v){var z,G=v*8-u-1,w=(1<<G)-1,H=w>>1,B=u===23?5.960464477539062E-8:0;v=A?0:v-1;var M=A?1:-1,N=m<0||
m===0&&1/m<0?1:0;m=Math.abs(m);isNaN(m)||m===Infinity?(m=isNaN(m)?1:0,A=w):(A=Math.floor(Math.log(m)/Math.LN2),m*(z=Math.pow(2,-A))<1&&(A--,z*=2),m=A+H>=1?m+B/z:m+B*Math.pow(2,1-H),m*z>=2&&(A++,z/=2),A+H>=w?(m=0,A=w):A+H>=1?(m=(m*z-1)*Math.pow(2,u),A+=H):(m=m*Math.pow(2,H-1)*Math.pow(2,u),A=0));for(;u>=8;I[x+v]=m&255,v+=M,m/=256,u-=8);A=A<<u|m;for(G+=u;G>0;I[x+v]=A&255,v+=M,A/=256,G-=8);I[x+v-M]|=N*128}};
shadow$provide[2]=function(F,ba,P){function I(c){if(c>2147483647)throw new RangeError('The value "'+c+'" is invalid for option "size"');c=new Uint8Array(c);Object.setPrototypeOf(c,m.prototype);return c}function m(c,e,g){if(typeof c==="number"){if(typeof e==="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(c)}return x(c,e,g)}function x(c,e,g){if(typeof c==="string"){var h=e;if(typeof h!=="string"||h==="")h="utf8";if(!m.isEncoding(h))throw new TypeError("Unknown encoding: "+
h);e=H(c,h)|0;g=I(e);c=g.write(c,h);c!==e&&(g=g.slice(0,c));return g}if(ArrayBuffer.isView(c))return Q(c,Uint8Array)?(c=new Uint8Array(c),c=z(c.buffer,c.byteOffset,c.byteLength)):c=v(c),c;if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(Q(c,ArrayBuffer)||c&&Q(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer!=="undefined"&&(Q(c,SharedArrayBuffer)||c&&Q(c.buffer,SharedArrayBuffer)))return z(c,
e,g);if(typeof c==="number")throw new TypeError('The "value" argument must not be of type number. Received type number');h=c.valueOf&&c.valueOf();if(h!=null&&h!==c)return m.from(h,e,g);if(h=G(c))return h;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]==="function")return m.from(c[Symbol.toPrimitive]("string"),e,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);}function A(c){if(typeof c!==
"number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"');}function u(c){A(c);return I(c<0?0:w(c)|0)}function v(c){const e=c.length<0?0:w(c.length)|0,g=I(e);for(let h=0;h<e;h+=1)g[h]=c[h]&255;return g}function z(c,e,g){if(e<0||c.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<e+(g||0))throw new RangeError('"length" is outside of buffer bounds');c=e===void 0&&g===void 0?
new Uint8Array(c):g===void 0?new Uint8Array(c,e):new Uint8Array(c,e,g);Object.setPrototypeOf(c,m.prototype);return c}function G(c){if(m.isBuffer(c)){var e=w(c.length)|0;const g=I(e);if(g.length===0)return g;c.copy(g,0,0,e);return g}if(c.length!==void 0)return(e=typeof c.length!=="number")||(e=c.length,e=e!==e),e?I(0):v(c);if(c.type==="Buffer"&&Array.isArray(c.data))return v(c.data)}function w(c){if(c>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+
" bytes");return c|0}function H(c,e){if(m.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||Q(c,ArrayBuffer))return c.byteLength;if(typeof c!=="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const g=c.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&g===0)return 0;let p=!1;for(;;)switch(e){case "ascii":case "latin1":case "binary":return g;case "utf8":case "utf-8":return fa(c).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return g*
2;case "hex":return g>>>1;case "base64":return ha(c).length;default:if(p)return h?-1:fa(c).length;e=(""+e).toLowerCase();p=!0}}function B(c,e,g){let h=!1;if(e===void 0||e<0)e=0;if(e>this.length)return"";if(g===void 0||g>this.length)g=this.length;if(g<=0)return"";g>>>=0;e>>>=0;if(g<=e)return"";for(c||="utf8";;)switch(c){case "hex":c=e;e=this.length;if(!c||c<0)c=0;if(!g||g<0||g>e)g=e;for(e="";c<g;++c)e+=Z[this[c]];return e;case "utf8":case "utf-8":return ca(this,e,g);case "ascii":c=e;e="";for(g=Math.min(this.length,
g);c<g;++c)e+=String.fromCharCode(this[c]&127);return e;case "latin1":case "binary":c=e;e="";for(g=Math.min(this.length,g);c<g;++c)e+=String.fromCharCode(this[c]);return e;case "base64":return c=e,g=c===0&&g===this.length?ia.fromByteArray(this):ia.fromByteArray(this.slice(c,g)),g;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":g=this.slice(e,g);c="";for(e=0;e<g.length-1;e+=2)c+=String.fromCharCode(g[e]+g[e+1]*256);return c;default:if(h)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase();
h=!0}}function M(c,e,g){const h=c[e];c[e]=c[g];c[g]=h}function N(c,e,g,h,p){if(c.length===0)return-1;typeof g==="string"?(h=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648);g=+g;g!==g&&(g=p?0:c.length-1);g<0&&(g=c.length+g);if(g>=c.length){if(p)return-1;g=c.length-1}else if(g<0)if(p)g=0;else return-1;typeof e==="string"&&(e=m.from(e,h));if(m.isBuffer(e))return e.length===0?-1:U(c,e,g,h,p);if(typeof e==="number")return e&=255,typeof Uint8Array.prototype.indexOf==="function"?p?Uint8Array.prototype.indexOf.call(c,
e,g):Uint8Array.prototype.lastIndexOf.call(c,e,g):U(c,[e],g,h,p);throw new TypeError("val must be string, number or Buffer");}function U(c,e,g,h,p){function a(l,n){return b===1?l[n]:l.readUInt16BE(n*b)}let b=1;var d=c.length;let f=e.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(c.length<2||e.length<2)return-1;b=2;d/=2;f/=2;g/=2}if(p)for(h=-1;g<d;g++)if(a(c,g)===a(e,h===-1?0:g-h)){if(h===-1&&(h=g),g-h+1===f)return h*b}else h!==-1&&(g-=
g-h),h=-1;else for(g+f>d&&(g=d-f);g>=0;g--){d=!0;for(h=0;h<f;h++)if(a(c,g+h)!==a(e,h)){d=!1;break}if(d)return g}return-1}function ca(c,e,g){g=Math.min(c.length,g);for(var h=[];e<g;){var p=c[e];let a=null,b=p>239?4:p>223?3:p>191?2:1;if(e+b<=g){let d,f,l;switch(b){case 1:p<128&&(a=p);break;case 2:d=c[e+1];(d&192)===128&&(p=(p&31)<<6|d&63,p>127&&(a=p));break;case 3:d=c[e+1];f=c[e+2];(d&192)===128&&(f&192)===128&&(p=(p&15)<<12|(d&63)<<6|f&63,p>2047&&(p<55296||p>57343)&&(a=p));break;case 4:d=c[e+1],f=
c[e+2],l=c[e+3],(d&192)===128&&(f&192)===128&&(l&192)===128&&(p=(p&15)<<18|(d&63)<<12|(f&63)<<6|l&63,p>65535&&p<1114112&&(a=p))}}a===null?(a=65533,b=1):a>65535&&(a-=65536,h.push(a>>>10&1023|55296),a=56320|a&1023);h.push(a);e+=b}e=h.length;if(e<=4096)h=String.fromCharCode.apply(String,h);else{c="";for(g=0;g<e;)c+=String.fromCharCode.apply(String,h.slice(g,g+=4096));h=c}return h}function C(c,e,g){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+e>g)throw new RangeError("Trying to access beyond buffer length");
}function J(c,e,g,h,p,a){if(!m.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>p||e<a)throw new RangeError('"value" argument is out of bounds');if(g+h>c.length)throw new RangeError("Index out of range");}function da(c,e,g,h,p){aa(e,h,p,c,g,7);h=Number(e&BigInt(4294967295));c[g++]=h;h>>=8;c[g++]=h;h>>=8;c[g++]=h;c[g++]=h>>8;e=Number(e>>BigInt(32)&BigInt(4294967295));c[g++]=e;e>>=8;c[g++]=e;e>>=8;c[g++]=e;c[g++]=e>>8;return g}function ka(c,e,g,h,p){aa(e,h,p,c,g,7);
h=Number(e&BigInt(4294967295));c[g+7]=h;h>>=8;c[g+6]=h;h>>=8;c[g+5]=h;c[g+4]=h>>8;e=Number(e>>BigInt(32)&BigInt(4294967295));c[g+3]=e;e>>=8;c[g+2]=e;e>>=8;c[g+1]=e;c[g]=e>>8;return g+8}function la(c,e,g,h,p,a){if(g+h>c.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range");}function ma(c,e,g,h,p){e=+e;g>>>=0;p||la(c,e,g,4,3.4028234663852886E38,-3.4028234663852886E38);V.write(c,e,g,h,23,4);return g+4}function na(c,e,g,h,p){e=+e;g>>>=0;p||la(c,e,g,8,1.7976931348623157E308,
-1.7976931348623157E308);V.write(c,e,g,h,52,8);return g+8}function ja(c,e,g){W[c]=class extends g{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0});this.name=`${this.name} [${c}]`;this.stack;delete this.name}get code(){return c}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}function oa(c){let e="",g=c.length;const h=c[0]===
"-"?1:0;for(;g>=h+4;g-=3)e=`_${c.slice(g-3,g)}${e}`;return`${c.slice(0,g)}${e}`}function aa(c,e,g,h,p,a){if(c>g||c<e)throw h=typeof e==="bigint"?"n":"",new W.ERR_OUT_OF_RANGE("value",a>3?e===0||e===BigInt(0)?`>= 0${h} and < 2${h} ** ${(a+1)*8}${h}`:`>= -(2${h} ** ${(a+1)*8-1}${h}) and < 2 ** `+`${(a+1)*8-1}${h}`:`>= ${e}${h} and <= ${g}${h}`,c);X(p,"offset");h[p]!==void 0&&h[p+a]!==void 0||Y(p,h.length-(a+1))}function X(c,e){if(typeof c!=="number")throw new W.ERR_INVALID_ARG_TYPE(e,"number",c);}function Y(c,
e,g){if(Math.floor(c)!==c)throw X(c,g),new W.ERR_OUT_OF_RANGE(g||"offset","an integer",c);if(e<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${e}`,c);}function fa(c,e){e=e||Infinity;let g;const h=c.length;let p=null;const a=[];for(let b=0;b<h;++b){g=c.charCodeAt(b);if(g>55295&&g<57344){if(!p){if(g>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(b+1===h){(e-=3)>-1&&a.push(239,191,189);continue}p=g;continue}if(g<56320){(e-=3)>-1&&a.push(239,
191,189);p=g;continue}g=(p-55296<<10|g-56320)+65536}else p&&(e-=3)>-1&&a.push(239,191,189);p=null;if(g<128){if(--e<0)break;a.push(g)}else if(g<2048){if((e-=2)<0)break;a.push(g>>6|192,g&63|128)}else if(g<65536){if((e-=3)<0)break;a.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((e-=4)<0)break;a.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw Error("Invalid code point");}return a}function ha(c){var e=ia,g=e.toByteArray;c=c.split("\x3d")[0];c=c.trim().replace(k,"");if(c.length<
2)c="";else for(;c.length%4!==0;)c+="\x3d";return g.call(e,c)}function ea(c,e,g,h){let p;for(p=0;p<h&&!(p+g>=e.length||p>=c.length);++p)e[p+g]=c[p];return p}function Q(c,e){return c instanceof e||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===e.name}function T(c){return typeof BigInt==="undefined"?pa:c}function pa(){throw Error("BigInt not supported");}const ia=F(0),V=F(1);F=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):
null;P.Buffer=m;P.SlowBuffer=function(c){+c!=c&&(c=0);return m.alloc(+c)};P.INSPECT_MAX_BYTES=50;P.kMaxLength=2147483647;m.TYPED_ARRAY_SUPPORT=function(){try{const c=new Uint8Array(1),e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(c,e);return c.foo()===42}catch(c){return!1}}();m.TYPED_ARRAY_SUPPORT||typeof console==="undefined"||typeof console.error!=="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});m.poolSize=8192;m.from=function(c,e,g){return x(c,e,g)};Object.setPrototypeOf(m.prototype,Uint8Array.prototype);Object.setPrototypeOf(m,Uint8Array);m.alloc=function(c,e,g){A(c);c=c<=0?I(c):e!==void 0?typeof g==="string"?I(c).fill(e,g):I(c).fill(e):I(c);return c};m.allocUnsafe=
function(c){return u(c)};m.allocUnsafeSlow=function(c){return u(c)};m.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==m.prototype};m.compare=function(c,e){Q(c,Uint8Array)&&(c=m.from(c,c.offset,c.byteLength));Q(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength));if(!m.isBuffer(c)||!m.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===e)return 0;let g=c.length,h=e.length;for(let p=0,a=Math.min(g,h);p<a;++p)if(c[p]!==e[p]){g=c[p];
h=e[p];break}return g<h?-1:h<g?1:0};m.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};m.concat=function(c,e){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return m.alloc(0);let g;if(e===void 0)for(g=e=0;g<c.length;++g)e+=c[g].length;e=m.allocUnsafe(e);let h=0;for(g=
0;g<c.length;++g){let p=c[g];if(Q(p,Uint8Array))h+p.length>e.length?(m.isBuffer(p)||(p=m.from(p)),p.copy(e,h)):Uint8Array.prototype.set.call(e,p,h);else if(m.isBuffer(p))p.copy(e,h);else throw new TypeError('"list" argument must be an Array of Buffers');h+=p.length}return e};m.byteLength=H;m.prototype._isBuffer=!0;m.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<c;e+=2)M(this,e,e+1);return this};m.prototype.swap32=
function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<c;e+=4)M(this,e,e+3),M(this,e+1,e+2);return this};m.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<c;e+=8)M(this,e,e+7),M(this,e+1,e+6),M(this,e+2,e+5),M(this,e+3,e+4);return this};m.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?ca(this,0,c):B.apply(this,
arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(c){if(!m.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:m.compare(this,c)===0};m.prototype.inspect=function(){let c;const e=P.INSPECT_MAX_BYTES;c=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();this.length>e&&(c+=" ... ");return"\x3cBuffer "+c+"\x3e"};F&&(m.prototype[F]=m.prototype.inspect);m.prototype.compare=function(c,e,g,h,p){Q(c,Uint8Array)&&(c=m.from(c,c.offset,c.byteLength));
if(!m.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);e===void 0&&(e=0);g===void 0&&(g=c?c.length:0);h===void 0&&(h=0);p===void 0&&(p=this.length);if(e<0||g>c.length||h<0||p>this.length)throw new RangeError("out of range index");if(h>=p&&e>=g)return 0;if(h>=p)return-1;if(e>=g)return 1;e>>>=0;g>>>=0;h>>>=0;p>>>=0;if(this===c)return 0;let a=p-h,b=g-e;const d=Math.min(a,b);h=this.slice(h,p);c=c.slice(e,g);for(e=0;e<d;++e)if(h[e]!==
c[e]){a=h[e];b=c[e];break}return a<b?-1:b<a?1:0};m.prototype.includes=function(c,e,g){return this.indexOf(c,e,g)!==-1};m.prototype.indexOf=function(c,e,g){return N(this,c,e,g,!0)};m.prototype.lastIndexOf=function(c,e,g){return N(this,c,e,g,!1)};m.prototype.write=function(c,e,g,h){if(e===void 0)h="utf8",g=this.length,e=0;else if(g===void 0&&typeof e==="string")h=e,g=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(g)?(g>>>=0,h===void 0&&(h="utf8")):(h=g,g=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var p=this.length-e;if(g===void 0||g>p)g=p;if(c.length>0&&(g<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||="utf8";for(p=!1;;)switch(h){case "hex":a:{e=Number(e)||0;h=this.length-e;g?(g=Number(g),g>h&&(g=h)):g=h;h=c.length;g>h/2&&(g=h/2);for(h=0;h<g;++h){p=parseInt(c.substr(h*2,2),16);if(p!==p){c=h;break a}this[e+h]=p}c=h}return c;case "utf8":case "utf-8":return ea(fa(c,this.length-e),this,e,g);case "ascii":case "latin1":case "binary":h=[];for(p=0;p<c.length;++p)h.push(c.charCodeAt(p)&
255);return ea(h,this,e,g);case "base64":return ea(ha(c),this,e,g);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var a=void 0;h=this.length-e;const b=[];for(let d=0;d<c.length&&!((h-=2)<0);++d)a=c.charCodeAt(d),p=a>>8,a%=256,b.push(a),b.push(p);return ea(b,this,e,g);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase();p=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};m.prototype.slice=function(c,e){const g=
this.length;c=~~c;e=e===void 0?g:~~e;c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g);e<0?(e+=g,e<0&&(e=0)):e>g&&(e=g);e<c&&(e=c);c=this.subarray(c,e);Object.setPrototypeOf(c,m.prototype);return c};m.prototype.readUintLE=m.prototype.readUIntLE=function(c,e,g){c>>>=0;e>>>=0;g||C(c,e,this.length);g=this[c];let h=1,p=0;for(;++p<e&&(h*=256);)g+=this[c+p]*h;return g};m.prototype.readUintBE=m.prototype.readUIntBE=function(c,e,g){c>>>=0;e>>>=0;g||C(c,e,this.length);g=this[c+--e];let h=1;for(;e>0&&(h*=256);)g+=this[c+--e]*
h;return g};m.prototype.readUint8=m.prototype.readUInt8=function(c,e){c>>>=0;e||C(c,1,this.length);return this[c]};m.prototype.readUint16LE=m.prototype.readUInt16LE=function(c,e){c>>>=0;e||C(c,2,this.length);return this[c]|this[c+1]<<8};m.prototype.readUint16BE=m.prototype.readUInt16BE=function(c,e){c>>>=0;e||C(c,2,this.length);return this[c]<<8|this[c+1]};m.prototype.readUint32LE=m.prototype.readUInt32LE=function(c,e){c>>>=0;e||C(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+
3]*16777216};m.prototype.readUint32BE=m.prototype.readUInt32BE=function(c,e){c>>>=0;e||C(c,4,this.length);return this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])};m.prototype.readBigUInt64LE=T(function(c){c>>>=0;X(c,"offset");var e=this[c];const g=this[c+7];e!==void 0&&g!==void 0||Y(c,this.length-8);e=e+this[++c]*256+this[++c]*65536+this[++c]*2**24;c=this[++c]+this[++c]*256+this[++c]*65536+g*2**24;return BigInt(e)+(BigInt(c)<<BigInt(32))});m.prototype.readBigUInt64BE=T(function(c){c>>>=0;X(c,
"offset");var e=this[c];const g=this[c+7];e!==void 0&&g!==void 0||Y(c,this.length-8);e=e*2**24+this[++c]*65536+this[++c]*256+this[++c];c=this[++c]*2**24+this[++c]*65536+this[++c]*256+g;return(BigInt(e)<<BigInt(32))+BigInt(c)});m.prototype.readIntLE=function(c,e,g){c>>>=0;e>>>=0;g||C(c,e,this.length);g=this[c];let h=1,p=0;for(;++p<e&&(h*=256);)g+=this[c+p]*h;g>=h*128&&(g-=Math.pow(2,8*e));return g};m.prototype.readIntBE=function(c,e,g){c>>>=0;e>>>=0;g||C(c,e,this.length);g=e;let h=1,p=this[c+--g];
for(;g>0&&(h*=256);)p+=this[c+--g]*h;p>=h*128&&(p-=Math.pow(2,8*e));return p};m.prototype.readInt8=function(c,e){c>>>=0;e||C(c,1,this.length);return this[c]&128?(255-this[c]+1)*-1:this[c]};m.prototype.readInt16LE=function(c,e){c>>>=0;e||C(c,2,this.length);c=this[c]|this[c+1]<<8;return c&32768?c|4294901760:c};m.prototype.readInt16BE=function(c,e){c>>>=0;e||C(c,2,this.length);c=this[c+1]|this[c]<<8;return c&32768?c|4294901760:c};m.prototype.readInt32LE=function(c,e){c>>>=0;e||C(c,4,this.length);return this[c]|
this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};m.prototype.readInt32BE=function(c,e){c>>>=0;e||C(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};m.prototype.readBigInt64LE=T(function(c){c>>>=0;X(c,"offset");const e=this[c],g=this[c+7];e!==void 0&&g!==void 0||Y(c,this.length-8);return(BigInt(this[c+4]+this[c+5]*256+this[c+6]*65536+(g<<24))<<BigInt(32))+BigInt(e+this[++c]*256+this[++c]*65536+this[++c]*2**24)});m.prototype.readBigInt64BE=T(function(c){c>>>=0;X(c,"offset");var e=
this[c];const g=this[c+7];e!==void 0&&g!==void 0||Y(c,this.length-8);e=(e<<24)+this[++c]*65536+this[++c]*256+this[++c];return(BigInt(e)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*65536+this[++c]*256+g)});m.prototype.readFloatLE=function(c,e){c>>>=0;e||C(c,4,this.length);return V.read(this,c,!0,23,4)};m.prototype.readFloatBE=function(c,e){c>>>=0;e||C(c,4,this.length);return V.read(this,c,!1,23,4)};m.prototype.readDoubleLE=function(c,e){c>>>=0;e||C(c,8,this.length);return V.read(this,c,!0,52,8)};
m.prototype.readDoubleBE=function(c,e){c>>>=0;e||C(c,8,this.length);return V.read(this,c,!1,52,8)};m.prototype.writeUintLE=m.prototype.writeUIntLE=function(c,e,g,h){c=+c;e>>>=0;g>>>=0;h||J(this,c,e,g,Math.pow(2,8*g)-1,0);h=1;let p=0;for(this[e]=c&255;++p<g&&(h*=256);)this[e+p]=c/h&255;return e+g};m.prototype.writeUintBE=m.prototype.writeUIntBE=function(c,e,g,h){c=+c;e>>>=0;g>>>=0;h||J(this,c,e,g,Math.pow(2,8*g)-1,0);h=g-1;let p=1;for(this[e+h]=c&255;--h>=0&&(p*=256);)this[e+h]=c/p&255;return e+g};
m.prototype.writeUint8=m.prototype.writeUInt8=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,1,255,0);this[e]=c&255;return e+1};m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,2,65535,0);this[e]=c&255;this[e+1]=c>>>8;return e+2};m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,2,65535,0);this[e]=c>>>8;this[e+1]=c&255;return e+2};m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(c,e,g){c=+c;e>>>=0;g||J(this,
c,e,4,4294967295,0);this[e+3]=c>>>24;this[e+2]=c>>>16;this[e+1]=c>>>8;this[e]=c&255;return e+4};m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,4,4294967295,0);this[e]=c>>>24;this[e+1]=c>>>16;this[e+2]=c>>>8;this[e+3]=c&255;return e+4};m.prototype.writeBigUInt64LE=T(function(c,e=0){return da(this,c,e,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeBigUInt64BE=T(function(c,e=0){return ka(this,c,e,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeIntLE=
function(c,e,g,h){c=+c;e>>>=0;h||(h=Math.pow(2,8*g-1),J(this,c,e,g,h-1,-h));h=0;let p=1,a=0;for(this[e]=c&255;++h<g&&(p*=256);)c<0&&a===0&&this[e+h-1]!==0&&(a=1),this[e+h]=(c/p>>0)-a&255;return e+g};m.prototype.writeIntBE=function(c,e,g,h){c=+c;e>>>=0;h||(h=Math.pow(2,8*g-1),J(this,c,e,g,h-1,-h));h=g-1;let p=1,a=0;for(this[e+h]=c&255;--h>=0&&(p*=256);)c<0&&a===0&&this[e+h+1]!==0&&(a=1),this[e+h]=(c/p>>0)-a&255;return e+g};m.prototype.writeInt8=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,1,127,-128);
c<0&&(c=255+c+1);this[e]=c&255;return e+1};m.prototype.writeInt16LE=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,2,32767,-32768);this[e]=c&255;this[e+1]=c>>>8;return e+2};m.prototype.writeInt16BE=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,2,32767,-32768);this[e]=c>>>8;this[e+1]=c&255;return e+2};m.prototype.writeInt32LE=function(c,e,g){c=+c;e>>>=0;g||J(this,c,e,4,2147483647,-2147483648);this[e]=c&255;this[e+1]=c>>>8;this[e+2]=c>>>16;this[e+3]=c>>>24;return e+4};m.prototype.writeInt32BE=function(c,e,g){c=
+c;e>>>=0;g||J(this,c,e,4,2147483647,-2147483648);c<0&&(c=4294967295+c+1);this[e]=c>>>24;this[e+1]=c>>>16;this[e+2]=c>>>8;this[e+3]=c&255;return e+4};m.prototype.writeBigInt64LE=T(function(c,e=0){return da(this,c,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});m.prototype.writeBigInt64BE=T(function(c,e=0){return ka(this,c,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});m.prototype.writeFloatLE=function(c,e,g){return ma(this,c,e,!0,g)};m.prototype.writeFloatBE=function(c,
e,g){return ma(this,c,e,!1,g)};m.prototype.writeDoubleLE=function(c,e,g){return na(this,c,e,!0,g)};m.prototype.writeDoubleBE=function(c,e,g){return na(this,c,e,!1,g)};m.prototype.copy=function(c,e,g,h){if(!m.isBuffer(c))throw new TypeError("argument should be a Buffer");g||=0;h||h===0||(h=this.length);e>=c.length&&(e=c.length);e||=0;h>0&&h<g&&(h=g);if(h===g||c.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");
if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length);c.length-e<h-g&&(h=c.length-e+g);const p=h-g;this===c&&typeof Uint8Array.prototype.copyWithin==="function"?this.copyWithin(e,g,h):Uint8Array.prototype.set.call(c,this.subarray(g,h),e);return p};m.prototype.fill=function(c,e,g,h){if(typeof c==="string"){typeof e==="string"?(h=e,e=0,g=this.length):typeof g==="string"&&(h=g,g=this.length);if(h!==void 0&&typeof h!=="string")throw new TypeError("encoding must be a string");
if(typeof h==="string"&&!m.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(c.length===1){var p=c.charCodeAt(0);if(h==="utf8"&&p<128||h==="latin1")c=p}}else typeof c==="number"?c&=255:typeof c==="boolean"&&(c=Number(c));if(e<0||this.length<e||this.length<g)throw new RangeError("Out of range index");if(g<=e)return this;e>>>=0;g=g===void 0?this.length:g>>>0;c||=0;if(typeof c==="number")for(h=e;h<g;++h)this[h]=c;else{p=m.isBuffer(c)?c:m.from(c,h);const a=p.length;if(a===0)throw new TypeError('The value "'+
c+'" is invalid for argument "value"');for(h=0;h<g-e;++h)this[h+e]=p[h%a]}return this};const W={};ja("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);ja("ERR_INVALID_ARG_TYPE",function(c,e){return`The "${c}" argument must be of type number. Received type ${typeof e}`},TypeError);ja("ERR_OUT_OF_RANGE",function(c,e,g){c=`The value of "${c}" is out of range.`;let h=g;if(Number.isInteger(g)&&Math.abs(g)>2**
32)h=oa(String(g));else if(typeof g==="bigint"){h=String(g);if(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))h=oa(h);h+="n"}return c+` It must be ${e}. Received ${h}`},RangeError);const k=/[^+/0-9A-Za-z-_]/g,Z=function(){const c=Array(256);for(let e=0;e<16;++e){const g=e*16;for(let h=0;h<16;++h)c[g+h]="0123456789abcdef"[e]+"0123456789abcdef"[h]}return c}()};
shadow$provide[3]=function(F,ba,P){function I({uint8View:a,dataView:b,bufferStart:d,bufferSize:f,head:l,payload:n,sequence:q,messageMagic:t,headerSize:r}){let D=r+n.length+3&-4,E=f-l;if(D>E){b=new Uint8Array(r);let y=new DataView(b.buffer);y.setUint32(0,t,!0);y.setUint32(4,D,!0);y.setUint32(8,q,!0);y.setUint32(12,0,!0);q=d+l;E>=r?(a.set(b,q),t=E-r,t>0&&a.set(n.subarray(0,t),q+r),a.set(n.subarray(t),d)):(a.set(b.subarray(0,E),q),a.set(b.subarray(E),d),a.set(n,d+(r-E)))}else d+=l,b.setUint32(d,t,!0),
b.setUint32(d+4,D,!0),b.setUint32(d+8,q,!0),b.setUint32(d+12,0,!0),a.set(n,d+r);return(l+D)%f}function m(a,b,d=0){for(let f=0;f<=d;f++)if(Atomics.compareExchange(a,b,0,1)===0)return!0;return!1}function x({atomicView:a,dataView:b,uint8View:d,bufferConstants:f,ringBufferBase:l,controlIndices:n,oscMessage:q,maxSpins:t=0}){let r=f.MESSAGE_HEADER_SIZE+q.length;if(r>f.IN_BUFFER_SIZE-f.MESSAGE_HEADER_SIZE||!m(a,n.IN_WRITE_LOCK,t))return!1;try{let E=Atomics.load(a,n.IN_HEAD),y=Atomics.load(a,n.IN_TAIL);var D=
f.IN_BUFFER_SIZE;if((D-1-E+y)%D<(r+3&-4))return!1;let L=Atomics.add(a,n.IN_SEQUENCE,1),O=I({uint8View:d,dataView:b,bufferStart:l+f.IN_BUFFER_START,bufferSize:f.IN_BUFFER_SIZE,head:E,payload:q,sequence:L,messageMagic:f.MESSAGE_MAGIC,headerSize:f.MESSAGE_HEADER_SIZE});return Atomics.load(a,n.IN_HEAD),Atomics.store(a,n.IN_HEAD,O),!0}finally{Atomics.store(a,n.IN_WRITE_LOCK,0)}}function A(a){try{return(new URL(a,window.location.href)).origin!==window.location.origin}catch{return!1}}async function u(a){if(da.has(a))return da.get(a);
var b=await fetch(a);if(!b.ok)throw Error(`Failed to fetch ${a}: ${b.status} ${b.statusText}`);b=await b.text();b=new Blob([b],{type:"application/javascript"});b=URL.createObjectURL(b);return da.set(a,b),b}async function v(a,b={}){let d=a;return A(a)&&(d=await u(a)),new Worker(d,b)}async function z(a,b){let d=b;A(b)&&(d=await u(b));await a.addModule(d)}function G(a,b){if(a==="sab")return new ka(b);if(a==="postMessage")return new la(b);throw Error(`Unknown transport mode: ${a}. Use 'sab' or 'postMessage'`);
}function w(a){if(!a)return null;if(typeof a=="string")return(a.split("/").filter(Boolean).pop()||a).replace(/\.scsyndef$/i,"");a=a instanceof ArrayBuffer?new Uint8Array(a):a;if(!(a instanceof Uint8Array)||a.length<11||a[0]!==83||a[1]!==67||a[2]!==103||a[3]!==102)return null;let b=a[10];if(b===0||11+b>a.length)return null;try{return(new TextDecoder).decode(a.slice(11,11+b))}catch{return null}}var H=F(2).Buffer,B=Object.defineProperty,M=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,
U=Object.prototype.hasOwnProperty,ca=(a,b,d,f)=>{if(b&&typeof b==="object"||typeof b==="function")for(let l of N(b))U.call(a,l)||l===d||B(a,l,{get:()=>b[l],enumerable:!(f=M(b,l))||f.enumerable});return a};F={};((a,b)=>{for(var d in b)B(a,d,{get:b[d],enumerable:!0})})(F,{SuperSonic:()=>p});ba.exports=(a=>ca(B({},"__esModule",{value:!0}),a))(F);var C={};F=class a{constructor(b){if(new.target===a)throw Error("Transport is abstract - use SABTransport or PostMessageTransport");this._config=b;this._disposed=
!1}get mode(){return this._config.mode}send(b,d){throw Error("Abstract method - implement in subclass");}trySendDirect(b){throw Error("Abstract method - implement in subclass");}onReply(b){throw Error("Abstract method - implement in subclass");}onDebug(b){throw Error("Abstract method - implement in subclass");}onError(b){throw Error("Abstract method - implement in subclass");}getMetrics(){throw Error("Abstract method - implement in subclass");}async initialize(){throw Error("Abstract method - implement in subclass");
}dispose(){this._disposed=!0}get ready(){throw Error("Abstract method - implement in subclass");}};var J=class{#t;#e;#o;#i;#h;#r;#m;#a;#n;constructor({sharedBuffer:a,ringBufferBase:b,bufferConstants:d,getAudioContextTime:f,getNTPStartTime:l}){if(!a||!d)throw Error("DirectWriter requires sharedBuffer and bufferConstants");if(typeof f!="function")throw Error("DirectWriter requires getAudioContextTime callback");if(typeof l!="function")throw Error("DirectWriter requires getNTPStartTime callback");this.#t=
a;this.#e=b;this.#o=d;this.#i=f;this.#h=l;this.#l()}tryWrite(a){return this.#r&&this.#n&&this.#d(a)?x({atomicView:this.#r,dataView:this.#m,uint8View:this.#a,bufferConstants:this.#o,ringBufferBase:this.#e,controlIndices:this.#n,oscMessage:a}):!1}isBundle(a){return a.length>=8&&a[0]===35}#l(){this.#r=new Int32Array(this.#t);this.#m=new DataView(this.#t);this.#a=new Uint8Array(this.#t);let a=this.#o.CONTROL_START;this.#n={IN_HEAD:(this.#e+a+0)/4,IN_TAIL:(this.#e+a+4)/4,IN_SEQUENCE:(this.#e+a+24)/4,IN_WRITE_LOCK:(this.#e+
a+40)/4}}#d(a){if(!this.isBundle(a)||a.length<16)return!0;var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a=b.getUint32(8,!1);b=b.getUint32(12,!1);if(a===0&&(b===0||b===1))return!0;let d=this.#i(),f=this.#h();return d===null||f===0?!0:a+b/4294967296-(d+f)<.2}},da=new Map,ka=class extends F{#t;#e;#o;#i;#h;#r;#m;#a;#n;#l;#d;#y;#f;#w;#g;#p=!1;#E;#s=0;#c=0;#u=0;#S=null;constructor(a){if(super({...a,mode:"sab"}),this.#t=a.sharedBuffer,this.#e=a.ringBufferBase,this.#o=a.bufferConstants,this.#y=a.workerBaseURL,
this.#E=a.preschedulerCapacity||65536,!(this.#t instanceof SharedArrayBuffer))throw Error("SABTransport requires a SharedArrayBuffer");this.#T();this.#i=new J({sharedBuffer:this.#t,ringBufferBase:this.#e,bufferConstants:this.#o,getAudioContextTime:a.getAudioContextTime,getNTPStartTime:a.getNTPStartTime})}async initialize(){if(this.#p)console.warn("[SABTransport] Already initialized");else{var [a,b,d]=await Promise.all([v(this.#y+"osc_out_prescheduler_worker.js",{type:"module"}),v(this.#y+"osc_in_worker.js",
{type:"module"}),v(this.#y+"debug_worker.js",{type:"module"})]);this.#n=a;this.#l=b;this.#d=d;this.#_();await Promise.all([this.#A(this.#n,"OSC OUT",{maxPendingMessages:this.#E}),this.#A(this.#l,"OSC IN"),this.#A(this.#d,"DEBUG")]);this.#l.postMessage({type:"start"});this.#d.postMessage({type:"start"});this.#p=!0}}send(a,b){return!this.#p||this._disposed?!1:(this.#n.postMessage({type:"send",oscData:a,sessionId:0,runTag:"",audioTimeS:null,currentTimeS:null}),this.#s++,this.#u+=a.length,!0)}trySendDirect(a){if(!this.#p||
this._disposed)return!1;let b=this.#i.tryWrite(a);return b&&(this.#s++,this.#u+=a.length),b}sendWithOptions(a,b={}){if(!this.#p||this._disposed)return!1;let {sessionId:d=0,runTag:f="",audioTimeS:l=null,currentTimeS:n=null}=b;return this.#n.postMessage({type:"send",oscData:a,sessionId:d,runTag:f,audioTimeS:l,currentTimeS:n}),this.#s++,this.#u+=a.length,!0}sendImmediate(a){return!this.#p||this._disposed?!1:(this.#n.postMessage({type:"sendImmediate",oscData:a}),this.#s++,this.#u+=a.length,!0)}cancelSessionTag(a,
b){this.#p&&this.#n.postMessage({type:"cancelSessionTag",sessionId:a,runTag:b})}cancelSession(a){this.#p&&this.#n.postMessage({type:"cancelSession",sessionId:a})}cancelTag(a){this.#p&&this.#n.postMessage({type:"cancelTag",runTag:a})}cancelAll(){this.#p&&this.#n.postMessage({type:"cancelAll"})}onReply(a){this.#f=a}onDebug(a){this.#w=a}onError(a){this.#g=a}getMetrics(){return{messagesSent:this.#s,messagesDropped:this.#c,bytesSent:this.#u}}get ready(){return this.#p&&!this._disposed}dispose(){this._disposed||
(this.#n&&(this.#n.postMessage({type:"stop"}),this.#n.terminate(),this.#n=null),this.#l&&(this.#l.postMessage({type:"stop"}),this.#l.terminate(),this.#l=null),this.#d&&(this.#d.postMessage({type:"stop"}),this.#d.terminate(),this.#d=null),this.#p=!1,super.dispose())}#T(){this.#h=new Int32Array(this.#t);this.#r=new DataView(this.#t);this.#m=new Uint8Array(this.#t);let a=this.#o.CONTROL_START;this.#a={IN_HEAD:(this.#e+a+0)/4,IN_TAIL:(this.#e+a+4)/4,IN_SEQUENCE:(this.#e+a+24)/4,IN_WRITE_LOCK:(this.#e+
a+40)/4}}#A(a,b,d={}){return new Promise((f,l)=>{let n=setTimeout(()=>{l(Error(`${b} worker initialization timeout`))},5E3),q=t=>{t.data.type==="initialized"&&(clearTimeout(n),a.removeEventListener("message",q),f())};a.addEventListener("message",q);a.postMessage({type:"init",sharedBuffer:this.#t,ringBufferBase:this.#e,bufferConstants:this.#o,...d})})}#_(){this.#l.onmessage=a=>{a=a.data;a.type==="messages"&&this.#f?a.messages.forEach(b=>{b.oscData&&this.#f(b.oscData,b.sequence)}):a.type==="error"&&
(console.error("[SABTransport] OSC IN error:",a.error),this.#g&&this.#g(a.error,"oscIn"))};this.#d.onmessage=a=>{a=a.data;a.type==="debug"&&this.#w?a.messages.forEach(b=>{this.#w(b)}):a.type==="error"&&(console.error("[SABTransport] DEBUG error:",a.error),this.#g&&this.#g(a.error,"debug"))};this.#n.onmessage=a=>{a=a.data;a.type==="preschedulerMetrics"?this.#S=a.metrics:a.type==="error"&&(console.error("[SABTransport] OSC OUT error:",a.error),this.#c++,this.#g&&this.#g(a.error,"oscOut"))}}getPreschedulerMetrics(){return this.#S}},
la=class extends F{#t;#e;#o;#i;#h;#r;#m=null;#a=!1;#n;#l;#d=0;#y=0;#f=0;#w;#g;constructor(a){super({...a,mode:"postMessage"});this.#o=a.workerBaseURL;this.#n=a.preschedulerCapacity||65536;this.#l=a.snapshotIntervalMs||25;this.#w=a.getAudioContextTime;this.#g=a.getNTPStartTime}async initialize(a){if(this.#a)console.warn("[PostMessageTransport] Already initialized");else{if(!a)throw Error("PostMessageTransport requires workletPort");this.#t=a;this.#t.onmessage=b=>{this.#E(b.data)};this.#e=await v(this.#o+
"osc_out_prescheduler_worker.js",{type:"module"});this.#e.onmessage=b=>{this.#s(b.data)};await this.#p();this.#a=!0}}send(a,b){return!this.#a||this._disposed?!1:(this.#e.postMessage({type:"send",oscData:a,sessionId:0,runTag:"",audioTimeS:null,currentTimeS:null}),this.#d++,this.#f+=a.length,!0)}trySendDirect(a){return!1}sendWithOptions(a,b={}){if(!this.#a||this._disposed)return!1;let {sessionId:d=0,runTag:f="",audioTimeS:l=null,currentTimeS:n=null}=b;return this.#e.postMessage({type:"send",oscData:a,
sessionId:d,runTag:f,audioTimeS:l,currentTimeS:n}),this.#d++,this.#f+=a.length,!0}sendImmediate(a){return!this.#a||this._disposed?!1:(this.#t.postMessage({type:"oscImmediate",oscData:a}),this.#d++,this.#f+=a.length,!0)}cancelSessionTag(a,b){this.#a&&this.#e.postMessage({type:"cancelSessionTag",sessionId:a,runTag:b})}cancelSession(a){this.#a&&this.#e.postMessage({type:"cancelSession",sessionId:a})}cancelTag(a){this.#a&&this.#e.postMessage({type:"cancelTag",runTag:a})}cancelAll(){this.#a&&this.#e.postMessage({type:"cancelAll"})}onReply(a){this.#i=
a}onDebug(a){this.#h=a}onError(a){this.#r=a}handleDebugRaw(a){if(this.#e&&a.messages){let b=new TextDecoder("utf-8");for(let d of a.messages)try{let f=new Uint8Array(d.bytes),l=b.decode(f);l.endsWith("\n")&&(l=l.slice(0,-1));this.#h&&this.#h({text:l,timestamp:performance.now(),sequence:d.sequence})}catch(f){console.error("[PostMessageTransport] Failed to decode debug message:",f)}}}getPreschedulerMetrics(){return this.#m}getMetrics(){return{messagesSent:this.#d,messagesDropped:this.#y,bytesSent:this.#f}}get ready(){return this.#a&&
!this._disposed}dispose(){this._disposed||(this.#e&&(this.#e.postMessage({type:"stop"}),this.#e.terminate(),this.#e=null),this.#t=null,this.#a=!1,super.dispose())}#p(){return new Promise((a,b)=>{let d=setTimeout(()=>{b(Error("Prescheduler worker initialization timeout"))},5E3),f=l=>{l.data.type==="initialized"&&(clearTimeout(d),this.#e.removeEventListener("message",f),a())};this.#e.addEventListener("message",f);this.#e.postMessage({type:"init",mode:"postMessage",maxPendingMessages:this.#n,snapshotIntervalMs:this.#l})})}#E(a){switch(a.type){case "oscReplies":if(this.#i&&
a.messages)for(let b of a.messages)b.oscData&&this.#i(b.oscData,b.sequence);break;case "debug":this.#h&&a.message&&this.#h(a.message);break;case "error":console.error("[PostMessageTransport] Worklet error:",a.error),this.#y++,this.#r&&this.#r(a.error,"worklet")}}#s(a){switch(a.type){case "dispatch":this.#t&&a.oscData&&this.#t.postMessage({type:"osc",oscData:a.oscData,timestamp:a.timestamp});break;case "preschedulerMetrics":this.#m=a.metrics;break;case "error":console.error("[PostMessageTransport] Prescheduler error:",
a.error),this.#y++,this.#r&&this.#r(a.error,"oscOut")}}},ma={5120:"i8",5121:"u8",5122:"i16",5123:"u16",5124:"i32",5125:"u32",5126:"f32"},na={u8:1,u8c:1,i8:1,u16:2,i16:2,u32:4,i32:4,i64:8,u64:8,f32:4,f64:8},ja={i64:BigInt64Array,u64:BigUint64Array},oa={f32:Float32Array,f64:Float64Array,i8:Int8Array,i16:Int16Array,i32:Int32Array,u8:Uint8Array,u8c:Uint8ClampedArray,u16:Uint16Array,u32:Uint32Array},aa=(a,b)=>(b--,a+b&~b);F=(a,b=d=>d!==void 0?": "+d:"")=>class extends Error{origMessage;constructor(d){super(a(d)+
b(d));this.origMessage=d!==void 0?String(d):""}};var X=F(()=>"Assertion failed"),Y=(typeof C<"u"&&C.env!==void 0?C.env.UMBRELLA_ASSERTS:1)?(a,b)=>{if(typeof a=="function"&&!a()||!a)throw new X(typeof b=="function"?b():b);}:()=>{},fa=F(()=>"illegal argument(s)"),ha=class{buf;start;u8;u32;state;constructor(a={}){if(this.buf=a.buf?a.buf:new ArrayBuffer(a.size||4096),this.start=a.start!=null?aa(Math.max(a.start,0),4):0,this.u8=new Uint8Array(this.buf),this.u32=new Uint32Array(this.buf),this.state=new Uint32Array(this.buf,
this.start,7),!a.skipInitialization){let b=a.align||8;Y(b>=8,`invalid alignment: ${b}, must be a pow2 and >= 8`);let d=this.initialTop(b),f=a.end!=null?Math.min(a.end,this.buf.byteLength):this.buf.byteLength;if(d>=f)throw a=`insufficient address range (0x${this.start.toString(16)} - 0x${f.toString(16)})`,new fa(a);this.align=b;this.doCompact=a.compact!==!1;this.doSplit=a.split!==!1;this.minSplit=a.minSplit||16;this.end=f;this.top=d;this._used=this._free=0}}stats(){let a=d=>{let f=0,l=0;for(;d;)f++,
l+=this.blockSize(d),d=this.blockNext(d);return{count:f,size:l}},b=a(this._free);return{free:b,used:a(this._used),top:this.top,available:this.end-this.top+b.size,total:this.buf.byteLength}}callocAs(a,b,d=0){a=this.mallocAs(a,b);return a?.fill(d),a}mallocAs(a,b){var d=this.malloc(b*na[a]);d?(b=[this.buf,d,b],(d=ja[a])||(d=ma[a],d=oa[d!==void 0?d:a]),a=new d(...b)):a=void 0;return a}calloc(a,b=0){let d=this.malloc(a);return d&&this.u8.fill(b,d,d+a),d}malloc(a){if(a<=0)return 0;a=aa(a+8,this.align);
let b=this.end,d=this.top,f=this._free,l=0;for(;f;){let n=this.blockSize(f),q=f+n>=d;if(q||n>=a)return this.mallocTop(f,l,n,a,q);l=f;f=this.blockNext(f)}return f=d,d=f+a,d<=b?(this.initBlock(f,a,this._used),this._used=f,this.top=d,f>0?f+8:0):0}mallocTop(a,b,d,f,l){if(l&&a+f>this.end)return 0;(b?this.unlinkBlock(b,a):this._free=this.blockNext(a),this.setBlockNext(a,this._used),this._used=a,l)?this.top=a+this.setBlockSize(a,f):this.doSplit&&(b=d-f,b>=this.minSplit&&this.splitBlock(a,f,b));return a>
0?a+8:0}realloc(a,b){if(b<=0)return 0;a=a>0?a-8:0;let d=0,f=this._used,l=0;for(;f;){if(f===a){[d,l]=this.reallocBlock(f,b);break}f=this.blockNext(f)}return d&&d!==a&&this.u8.copyWithin(d>0?d+8:0,a>0?a+8:0,l),d>0?d+8:0}reallocBlock(a,b){let d=this.blockSize(a);var f=a+d;let l=f>=this.top,n=aa(b+8,this.align);if(n<=d)return this.doSplit?(b=d-n,b>=this.minSplit?this.splitBlock(a,n,b):l&&(this.top=a+n)):l&&(this.top=a+n),[a,f];l&&a+n<this.end?f=(this.top=a+this.setBlockSize(a,n),[a,f]):(this.free(a),
a=this.malloc(b),f=[a>0?a-8:0,f]);return f}reallocArray(a,b){if(a.buffer===this.buf){var d=this.realloc(a.byteOffset,b*a.BYTES_PER_ELEMENT);return d?new a.constructor(this.buf,d,b):void 0}}free(a){if(typeof a!="number"){if(a.buffer!==this.buf)return!1;a=a.byteOffset}a=a>0?a-8:0;let b=this._used,d=0;for(;b;){if(b===a)return d?this.unlinkBlock(d,b):this._used=this.blockNext(b),this.insert(b),this.doCompact&&this.compact(),!0;d=b;b=this.blockNext(b)}return!1}freeAll(){this._used=this._free=0;this.top=
this.initialTop()}release(){return delete this.u8,delete this.u32,delete this.state,delete this.buf,!0}get align(){return this.state[4]}set align(a){this.state[4]=a}get end(){return this.state[3]}set end(a){this.state[3]=a}get top(){return this.state[2]}set top(a){this.state[2]=a}get _free(){return this.state[0]}set _free(a){this.state[0]=a}get _used(){return this.state[1]}set _used(a){this.state[1]=a}get doCompact(){return!!(this.state[5]&1)}set doCompact(a){a?this.state[5]|=1:this.state[5]&=-2}get doSplit(){return!!(this.state[5]&
2)}set doSplit(a){a?this.state[5]|=2:this.state[5]&=-3}get minSplit(){return this.state[6]}set minSplit(a){Y(a>8,`illegal min split threshold: ${a}, require at least ${9}`);this.state[6]=a}blockSize(a){return this.u32[a>>2]}setBlockSize(a,b){return this.u32[a>>2]=b,b}blockNext(a){return this.u32[(a>>2)+1]}setBlockNext(a,b){this.u32[(a>>2)+1]=b}initBlock(a,b,d){let f=a>>>2;return this.u32[f+0]=b,this.u32[f+1]=d,a}unlinkBlock(a,b){this.setBlockNext(a,this.blockNext(b))}splitBlock(a,b,d){this.insert(this.initBlock(a+
this.setBlockSize(a,b),d,0));this.doCompact&&this.compact()}initialTop(a=this.align){return aa(this.start+28+8,a)-8}compact(){let a=this._free,b=0;for(var d,f,l=!1;a;){f=a;for(d=this.blockNext(a);d&&f+this.blockSize(f)===d;)f=d,d=this.blockNext(d);if(f!==a){d=f-a+this.blockSize(f);this.setBlockSize(a,d);f=this.blockNext(f);for(d=this.blockNext(a);d&&d!==f;)l=this.blockNext(d),this.setBlockNext(d,0),d=l;this.setBlockNext(a,f);l=!0}a+this.blockSize(a)>=this.top&&(this.top=a,b?this.unlinkBlock(b,a):
this._free=this.blockNext(a));b=a;a=this.blockNext(a)}return l}insert(a){let b=this._free,d=0;for(;b&&!(a<=b);)d=b,b=this.blockNext(b);d?this.setBlockNext(d,a):this._free=a;this.setBlockNext(a,b)}},ea=class{#t;#e;#o;#i;#h;#r;#m;#a;#n;#l;#d;#y;constructor(a){let {mode:b="sab",audioContext:d,sharedBuffer:f,bufferPoolConfig:l,sampleBaseURL:n,maxBuffers:q=1024,assetLoader:t=null,workletPort:r=null}=a;if(this.#t=b,!d)throw Error("BufferManager requires audioContext");if(b==="sab"){if(!(f&&f instanceof
SharedArrayBuffer))throw Error("BufferManager requires sharedBuffer (SharedArrayBuffer) in SAB mode");if(!l||typeof l!="object")throw Error("BufferManager requires bufferPoolConfig (object with start, size, align)");if(!Number.isFinite(l.start)||l.start<0)throw Error("bufferPoolConfig.start must be a non-negative number");if(!Number.isFinite(l.size)||l.size<=0)throw Error("bufferPoolConfig.size must be a positive number");}if(b==="postMessage"&&(!l||typeof l!="object"))throw Error("BufferManager requires bufferPoolConfig in postMessage mode");
if(!Number.isInteger(q)||q<=0)throw Error("maxBuffers must be a positive integer");(this.#i=d,this.#h=f,this.#e=n,this.#o=t,this.#y=r,b==="sab")?this.#r=new ha({buf:f,start:l.start,size:l.size,align:8}):(a=new ArrayBuffer(l.start+l.size),this.#r=new ha({buf:a,start:l.start,size:l.size,align:8}));this.#m=l.size;this.#a=l.start;this.#n=new Map;this.#l=new Map;this.#d=new Map;this.GUARD_BEFORE=3;this.GUARD_AFTER=1;this.MAX_BUFFERS=q;(l.size/1048576).toFixed(0);(l.start/1048576).toFixed(0)}setWorkletPort(a){if(this.#t===
"postMessage"){if(!a)throw Error("BufferManager.setWorkletPort() requires a valid port");this.#y=a}}#f(a){if(typeof a!="string"||a.length===0)throw Error("Invalid audio path: must be a non-empty string");if(a.includes(".."))throw Error(`Invalid audio path: path cannot contain '..' (got: ${a})`);if(a.includes("%2e")||a.includes("%2E"))throw Error(`Invalid audio path: path cannot contain URL-encoded characters (got: ${a})`);if(a.includes("\\"))throw Error(`Invalid audio path: use forward slashes only (got: ${a})`);
if(a.includes("://")||a.startsWith("/")||a.startsWith("./"))return a;if(!this.#e)throw Error('sampleBaseURL not configured. Please set it in SuperSonic constructor options.\nExample: new SuperSonic({ sampleBaseURL: "./dist/samples/" })\nOr use CDN: new SuperSonic({ sampleBaseURL: "https://unpkg.com/supersonic-scsynth-samples@latest/samples/" })\nOr install: npm install supersonic-scsynth-samples');return this.#e+a}#w(a){if(!Number.isInteger(a)||a<0||a>=this.MAX_BUFFERS)throw Error(`Invalid buffer number ${a} (must be 0-${this.MAX_BUFFERS-
1})`);}async #g(a,b,d){let f=null,l=null,n=!1,q=await this.#S(a),t=!1;try{await this.#A(a);let {ptr:r,sizeBytes:D,numFrames:E,numChannels:y,sampleRate:L,source:O,...R}=await d();f=r;let {uuid:K,allocationComplete:S}=this.#u(a,b);l=K;this.#T(a,f,D,K,S,{numFrames:E,numChannels:y,sampleRate:L,source:O});n=!0;let qa=this.#_(a,K,S);return q(),t=!0,{ptr:f,uuid:K,allocationComplete:qa,numFrames:E,numChannels:y,sampleRate:L,...R}}catch(r){throw n&&l?this.#B(a,l,!1):f&&this.#r.free(f),r;}finally{t||q()}}async prepareFromBlob(a){let {bufnum:b,
blob:d,startFrame:f=0,numFrames:l=0,channels:n=null}=a;if(this.#w(b),!d||!(d instanceof ArrayBuffer||ArrayBuffer.isView(d)))throw Error("/b_allocFile requires audio data as ArrayBuffer or typed array");let q=d instanceof ArrayBuffer?d:d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength);return this.#g(b,3E4,async()=>{let t=await this.#i.decodeAudioData(q),r=Math.max(0,Math.floor(f||0));var D=t.length-r;D=l&&l>0?Math.min(Math.floor(l),D):D;if(D<=0)throw Error(`No audio frames available for buffer ${b}`);
let E=this.#p(n,t.numberOfChannels),y=E.length;var L=D*y+(this.GUARD_BEFORE+this.GUARD_AFTER)*y;let O=this.#E(L);L=new Float32Array(L);let R=this.GUARD_BEFORE*y;for(let K=0;K<D;K++)for(let S=0;S<y;S++){let qa=t.getChannelData(E[S]);L[R+K*y+S]=qa[r+K]}await this.#s(O,L);return{ptr:O,sizeBytes:L.length*4,numFrames:D,numChannels:y,sampleRate:t.sampleRate}})}async prepareFromFile(a){let {bufnum:b,path:d,startFrame:f=0,numFrames:l=0,channels:n=null}=a;return this.#w(b),this.#g(b,6E4,async()=>{var q=this.#f(d),
t=d.split("/").pop();q=await this.#o.fetch(q,{type:"sample",name:t});q=await this.#i.decodeAudioData(q);t=Math.max(0,Math.floor(f||0));var r=q.length-t;r=l&&l>0?Math.min(Math.floor(l),r):r;if(r<=0)throw Error(`No audio frames available for buffer ${b} from ${d}`);let D=this.#p(n,q.numberOfChannels),E=D.length;var y=r*E+(this.GUARD_BEFORE+this.GUARD_AFTER)*E;let L=this.#E(y);y=new Float32Array(y);let O=this.GUARD_BEFORE*E;for(let R=0;R<r;R++)for(let K=0;K<E;K++){let S=q.getChannelData(D[K]);y[O+R*
E+K]=S[t+R]}await this.#s(L,y);return{ptr:L,sizeBytes:y.length*4,numFrames:r,numChannels:E,sampleRate:q.sampleRate,source:this.#t==="postMessage"?{type:"file",path:d,startFrame:f,numFrames:l,channels:n}:null}})}async prepareEmpty(a){let {bufnum:b,numFrames:d,numChannels:f=1,sampleRate:l=null}=a;if(this.#w(b),!Number.isFinite(d)||d<=0)throw Error(`/b_alloc requires a positive number of frames (got ${d})`);if(!Number.isFinite(f)||f<=0)throw Error(`/b_alloc requires a positive channel count (got ${f})`);
let n=Math.floor(d),q=Math.floor(f);return this.#g(b,5E3,async()=>{var t=n*q+(this.GUARD_BEFORE+this.GUARD_AFTER)*q;let r=this.#E(t);t=new Float32Array(t);await this.#s(r,t);return{ptr:r,sizeBytes:t.length*4,numFrames:n,numChannels:q,sampleRate:l||this.#i.sampleRate}})}#p(a,b){return a&&a.length!==0?(a.forEach(d=>{if(!Number.isInteger(d)||d<0||d>=b)throw Error(`Channel ${d} is out of range (file has ${b} channels)`);}),a):Array.from({length:b},(d,f)=>f)}#E(a){a*=4;var b=this.#r.malloc(a);if(b===0){var d=
this.#r.stats();b=((d.available||0)/1048576).toFixed(2);d=((d.total||0)/1048576).toFixed(2);a=(a/1048576).toFixed(2);throw Error(`Buffer pool allocation failed: requested ${a}MB, available ${b}MB of ${d}MB total`);}return b}async #s(a,b){if(this.#t==="sab")(new Float32Array(this.#h,a,b.length)).set(b);else{let d=crypto.randomUUID(),f=new Promise((l,n)=>{let q=setTimeout(()=>{n(Error("Buffer copy to WASM memory timed out"))},1E4),t=r=>{r=r.data;r.type==="bufferCopied"&&r.copyId===d&&(this.#y.removeEventListener("message",
t),clearTimeout(q),r.success?l():n(Error(r.error||"Buffer copy failed")))};this.#y.addEventListener("message",t)});b=b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength);this.#y.postMessage({type:"copyBufferData",copyId:d,ptr:a,data:b},[b]);await f}}#c(a,b,d){return new Promise((f,l)=>{let n=setTimeout(()=>{this.#l.delete(a);l(Error(`Buffer ${b} allocation timeout (${d}ms)`))},d);this.#l.set(a,{resolve:f,reject:l,timeout:n})})}#u(a,b){let d=crypto.randomUUID();a=this.#c(d,a,b);return{uuid:d,allocationComplete:a}}async #S(a){let b=
this.#d.get(a)||Promise.resolve(),d,f=new Promise(l=>{d=l});return this.#d.set(a,b.then(()=>f)),await b,()=>{d&&(d(),d=null);this.#d.get(a)===f&&this.#d.delete(a)}}#T(a,b,d,f,l,n={}){let q=this.#n.get(a);b={ptr:b,size:d,numFrames:n.numFrames||0,numChannels:n.numChannels||1,sampleRate:n.sampleRate||48E3,pendingToken:f,pendingPromise:l,previousAllocation:q?{ptr:q.ptr,size:q.size}:null,source:n.source||null};return this.#n.set(a,b),b}async #A(a){if((a=this.#n.get(a))&&a.pendingToken&&a.pendingPromise)try{await a.pendingPromise}catch{}}#_(a,
b,d){return d&&typeof d.then=="function"?d.then(f=>(this.#B(a,b,!0),f)).catch(f=>{throw this.#B(a,b,!1),f;}):(this.#B(a,b,!0),Promise.resolve())}#B(a,b,d){let f=this.#n.get(a);f&&f.pendingToken===b&&(b=f.previousAllocation,d?(f.pendingToken=null,f.pendingPromise=null,f.previousAllocation=null,b?.ptr&&this.#r.free(b.ptr)):(f.ptr&&this.#r.free(f.ptr),f.pendingPromise=null,b?.ptr?this.#n.set(a,{ptr:b.ptr,size:b.size,pendingToken:null,previousAllocation:null}):this.#n.delete(a)))}handleBufferFreed(a){let b=
a[0];a=a[1];let d=this.#n.get(b);d?typeof a=="number"&&a===d.ptr?(this.#r.free(d.ptr),this.#n.delete(b)):typeof a=="number"&&d.previousAllocation&&d.previousAllocation.ptr===a?(this.#r.free(a),d.previousAllocation=null):(this.#r.free(d.ptr),this.#n.delete(b)):typeof a=="number"&&a!==0&&this.#r.free(a)}handleBufferAllocated(a){let b=a[0];a=a[1];let d=this.#l.get(b);d&&(clearTimeout(d.timeout),d.resolve({bufnum:a}),this.#l.delete(b))}allocate(a){var b=a*4;a=this.#r.malloc(b);if(a===0){var d=this.#r.stats();
let f=((d.available||0)/1048576).toFixed(2);d=((d.total||0)/1048576).toFixed(2);b=(b/1048576).toFixed(2);console.error(`[BufferManager] Allocation failed: requested ${b}MB, available ${f}MB of ${d}MB total`)}return a}free(a){return this.#r.free(a)}getView(a,b){return new Float32Array(this.#h,a,b)}getStats(){return this.#r?this.#r.stats():{total:0,available:0,used:0,allocations:0}}getAllocatedBuffers(){let a=[];for(let [b,d]of this.#n.entries())d&&d.ptr&&a.push({bufnum:b,ptr:d.ptr,numFrames:d.numFrames,
numChannels:d.numChannels,sampleRate:d.sampleRate,source:d.source||null});return a}updateAudioContext(a){if(!a)throw Error("BufferManager.updateAudioContext requires audioContext");this.#i=a}getDiagnostics(){let a=this.#r.stats(),b=0,d=0;for(let f of this.#n.values())f&&(b+=f.size||0,f.pendingToken&&d++);return{active:this.#n.size,pending:d,bytesActive:b,pool:{total:this.#m,available:a.available||0,freeBytes:a.free?.size||0,freeBlocks:a.free?.count||0,usedBytes:a.used?.size||0,usedBlocks:a.used?.count||
0}}}destroy(){for(let [,a]of this.#l.entries())clearTimeout(a.timeout),a.reject(Error("BufferManager destroyed"));this.#l.clear();for(let [,a]of this.#n.entries())a.ptr&&this.#r.free(a.ptr);this.#n.clear();this.#d.clear()}},Q=class{#t;#e;#o;constructor(a={}){let {onLoadingEvent:b=null,maxRetries:d=3,baseDelay:f=1E3}=a;this.#t=b;this.#e=d;this.#o=f}async fetch(a,{type:b,name:d}){var f=this.#i(a);a=this.#h(a);f=await f;this.#t?.("loading:start",{type:b,name:d,...(f!=null&&{size:f})});f=await (await a).arrayBuffer();
return this.#t?.("loading:complete",{type:b,name:d,size:f.byteLength}),f}async #i(a){try{let b=await fetch(a,{method:"HEAD"});if(b.ok){let d=b.headers.get("Content-Length");return d?parseInt(d,10):null}return null}catch{return null}}async #h(a){let b;for(let d=0;d<=this.#e;d++)try{let f=await fetch(a);if(f.status>=400&&f.status<500)throw Error(`Failed to fetch ${a}: ${f.status} ${f.statusText}`);if(!f.ok)throw Error(`Server error fetching ${a}: ${f.status} ${f.statusText}`);return f}catch(f){if(b=
f,f.message.includes("Failed to fetch")&&f.message.includes("4"))throw f;d<this.#e&&await this.#r(this.#o*Math.pow(2,d))}throw b;}#r(a){return new Promise(b=>setTimeout(b,a))}},T=class{#t;#e;constructor({bufferManager:a,getDefaultSampleRate:b}){if(!a)throw Error("OSCRewriter requires bufferManager");if(typeof b!="function")throw Error("OSCRewriter requires getDefaultSampleRate callback");this.#t=a;this.#e=b}async rewritePacket(a){if(a&&a.address){let {message:d,changed:f}=await this.#o(a);return{packet:d,
changed:f}}if(this.#n(a)){var b=await Promise.all(a.packets.map(d=>this.rewritePacket(d)));if(!b.some(d=>d.changed))return{packet:a,changed:!1};b=b.map(d=>d.packet);return{packet:{timeTag:a.timeTag,packets:b},changed:!0}}return{packet:a,changed:!1}}async #o(a){switch(a.address){case "/b_alloc":return{message:await this.#i(a),changed:!0};case "/b_allocRead":return{message:await this.#h(a),changed:!0};case "/b_allocReadChannel":return{message:await this.#r(a),changed:!0};case "/b_allocFile":return{message:await this.#m(a),
changed:!0};default:return{message:a,changed:!1}}}async #i(a){let b=this.#g(a.args,0,"/b_alloc requires a buffer number"),d=this.#g(a.args,1,"/b_alloc requires a frame count"),f=2,l=1,n=this.#e();this.#c(this.#f(a.args,f))&&(l=Math.max(1,this.#p(a.args,f,1)),f++);this.#f(a.args,f)?.type==="b"&&f++;this.#c(this.#f(a.args,f))&&(n=this.#w(this.#f(a.args,f)));a=await this.#t.prepareEmpty({bufnum:b,numFrames:d,numChannels:l,sampleRate:n});return this.#u(a.allocationComplete,`/b_alloc ${b}`),this.#a(b,
a)}async #h(a){let b=this.#g(a.args,0,"/b_allocRead requires a buffer number");var d=this.#E(a.args,1,"/b_allocRead requires a file path");let f=this.#p(a.args,2,0);a=this.#p(a.args,3,0);d=await this.#t.prepareFromFile({bufnum:b,path:d,startFrame:f,numFrames:a});return this.#u(d.allocationComplete,`/b_allocRead ${b}`),this.#a(b,d)}async #r(a){let b=this.#g(a.args,0,"/b_allocReadChannel requires a buffer number"),d=this.#E(a.args,1,"/b_allocReadChannel requires a file path"),f=this.#p(a.args,2,0),
l=this.#p(a.args,3,0),n=[];for(let q=4;q<(a.args?.length||0)&&this.#c(a.args[q]);q++)n.push(Math.floor(this.#w(a.args[q])));a=await this.#t.prepareFromFile({bufnum:b,path:d,startFrame:f,numFrames:l,channels:n.length>0?n:null});return this.#u(a.allocationComplete,`/b_allocReadChannel ${b}`),this.#a(b,a)}async #m(a){let b=this.#g(a.args,0,"/b_allocFile requires a buffer number");a=this.#s(a.args,1,"/b_allocFile requires audio file data as blob");a=await this.#t.prepareFromBlob({bufnum:b,blob:a});return this.#u(a.allocationComplete,
`/b_allocFile ${b}`),this.#a(b,a)}#a(a,b){return{address:"/b_allocPtr",args:[this.#l(a),this.#l(b.ptr),this.#l(b.numFrames),this.#l(b.numChannels),this.#d(b.sampleRate),this.#y(b.uuid)]}}#n(a){return a&&a.timeTag!==void 0&&Array.isArray(a.packets)}#l(a){return{type:"i",value:Math.floor(a)}}#d(a){return{type:"f",value:a}}#y(a){return{type:"s",value:String(a)}}#f(a,b){if(Array.isArray(a))return a[b]}#w(a){if(a!=null)return typeof a=="object"&&Object.prototype.hasOwnProperty.call(a,"value")?a.value:
a}#g(a,b,d){a=this.#w(this.#f(a,b));if(!Number.isFinite(a))throw Error(d);return Math.floor(a)}#p(a,b,d=0){a=this.#w(this.#f(a,b));return Number.isFinite(a)?Math.floor(a):d}#E(a,b,d){a=this.#w(this.#f(a,b));if(typeof a!="string")throw Error(d);return a}#s(a,b,d){a=this.#f(a,b);if(!a||a.type!=="b")throw Error(d);a=this.#w(a);if(!(a instanceof Uint8Array||a instanceof ArrayBuffer))throw Error(d);return a}#c(a){if(!a)return!1;a=this.#w(a);return Number.isFinite(a)}#u(a,b){!a||typeof a.catch!="function"||
a.catch(d=>{console.error(`[OSCRewriter] ${b} allocation failed:`,d)})}},pa=class{#t=new Map;on(a,b){if(typeof b!="function")throw Error("Callback must be a function");return this.#t.has(a)||this.#t.set(a,new Set),this.#t.get(a).add(b),()=>this.off(a,b)}off(a,b){a=this.#t.get(a);return a&&a.delete(b),this}once(a,b){let d=(...f)=>{this.off(a,d);b(...f)};return this.on(a,d)}removeAllListeners(a){return a===void 0?this.#t.clear():this.#t.delete(a),this}hasListeners(a){return(a=this.#t.get(a))?a.size>
0:!1}emit(a,...b){let d=this.#t.get(a);if(d)for(let f of d)try{f(...b)}catch(l){console.error(`[EventEmitter] Error in ${a} listener:`,l)}}async emitAsync(a,...b){let d=this.#t.get(a);if(d)for(let f of d)try{await f(...b)}catch(l){console.error(`[EventEmitter] Error in ${a} listener:`,l)}}clearAllListeners(){this.#t.clear()}},ia=class{#t;#e;#o;#i;#h;#r;#m=null;constructor(a={}){this.#i=a.mode||"sab";this.#t=a.sharedBuffer||null;this.#e=a.ringBufferBase||0;this.#o=a.bufferConstants||null}initSharedViews(a,
b,d){if(this.#t=a,this.#e=b,this.#o=d,this.#i==="sab"&&a&&d)this.#h=new Int32Array(a),this.#r=new Uint32Array(a,b+d.METRICS_START,d.METRICS_SIZE/4)}updateSnapshot(a){this.#m=a}getSnapshotBuffer(){return this.#m}getMetricsView(){return this.#r}addMetric(a,b=1){this.#r&&(a={mainMessagesSent:22,mainBytesSent:23,preschedulerBypassed:25}[a],a!==void 0&&Atomics.add(this.#r,a,b))}parseMetricsBuffer(a){return{workletProcessCount:a[0],workletMessagesProcessed:a[1],workletMessagesDropped:a[2],workletSchedulerDepth:a[3],
workletSchedulerMax:a[4],workletSchedulerDropped:a[5],workletSequenceGaps:a[24],preschedulerPending:a[6],preschedulerPeak:a[7],preschedulerSent:a[8],preschedulerRetriesSucceeded:a[9],preschedulerRetriesFailed:a[10],preschedulerBundlesScheduled:a[11],preschedulerEventsCancelled:a[12],preschedulerTotalDispatches:a[13],preschedulerMessagesRetried:a[14],preschedulerRetryQueueSize:a[15],preschedulerRetryQueueMax:a[16],preschedulerBypassed:a[25],oscInMessagesReceived:a[17],oscInMessagesDropped:a[18],oscInBytesReceived:a[19],
debugMessagesReceived:a[20],debugBytesReceived:a[21],mainMessagesSent:a[22],mainBytesSent:a[23]}}getSABMetrics(){return this.#r?this.parseMetricsBuffer(this.#r):null}getBufferUsage(){if(!this.#h||!this.#o||!this.#e)return null;var a=this.#e+this.#o.CONTROL_START;let b=this.#o,d=this.#h;var f=Atomics.load(d,(a+0)/4);let l=Atomics.load(d,(a+4)/4);var n=Atomics.load(d,(a+8)/4);let q=Atomics.load(d,(a+12)/4);var t=Atomics.load(d,(a+16)/4);a=Atomics.load(d,(a+20)/4);f=(f-l+b.IN_BUFFER_SIZE)%b.IN_BUFFER_SIZE;
n=(n-q+b.OUT_BUFFER_SIZE)%b.OUT_BUFFER_SIZE;t=(t-a+b.DEBUG_BUFFER_SIZE)%b.DEBUG_BUFFER_SIZE;return{inBufferUsed:{bytes:f,percentage:f/b.IN_BUFFER_SIZE*100},outBufferUsed:{bytes:n,percentage:n/b.OUT_BUFFER_SIZE*100},debugBufferUsed:{bytes:t,percentage:t/b.DEBUG_BUFFER_SIZE*100}}}overlayPreschedulerMetrics(a){this.#m&&a&&(new Uint32Array(this.#m,0,32)).set(a.subarray(6,17),6)}gatherMetrics(a={}){let b=performance.now();if(this.#i==="postMessage")if(a.preschedulerMetrics&&this.overlayPreschedulerMetrics(a.preschedulerMetrics),
this.#m){var d=new Uint32Array(this.#m,0,32);d=this.parseMetricsBuffer(d)}else d={};else{d=this.getSABMetrics()||{};let f=this.getBufferUsage();f&&Object.assign(d,f)}a.driftOffsetMs!==void 0&&(d.driftOffsetMs=a.driftOffsetMs);a.audioContextState&&(d.audioContextState=a.audioContextState);a.bufferPoolStats&&(d.bufferPoolUsedBytes=a.bufferPoolStats.used.size,d.bufferPoolAvailableBytes=a.bufferPoolStats.available,d.bufferPoolAllocations=a.bufferPoolStats.used.count);a.loadedSynthDefsCount!==void 0&&
(d.loadedSynthDefs=a.loadedSynthDefsCount);a=performance.now()-b;return a>1&&console.warn(`[MetricsReader] Slow metrics gathering: ${a.toFixed(2)}ms`),d}get bufferConstants(){return this.#o}get ringBufferBase(){return this.#e}get sharedBuffer(){return this.#t}},V=class{#t;#e;#o;#i;#h;#r;#m;#a;#n=0;#l=null;constructor(a={}){this.#t=a.mode||"sab";this.#e=a.audioContext;this.#o=a.workletPort||null}initSharedViews(a,b,d){this.#h=b;this.#i=d;this.#t==="sab"&&a&&d&&(this.#r=new Float64Array(a,b+d.NTP_START_TIME_START,
1),this.#m=new Int32Array(a,b+d.GLOBAL_OFFSET_START,1))}setWorkletPort(a){this.#o=a}updateAudioContext(a){this.#e=a}async initialize(){if(this.#i&&this.#e){for(var a;a=this.#e.getOutputTimestamp(),!(a.contextTime>0);)await new Promise(b=>setTimeout(b,50));this.#d(a)}}#d(a){this.#a=a=(performance.timeOrigin+a.performanceTime)/1E3+2208988800-a.contextTime;this.#t==="sab"&&this.#r?this.#r[0]=a:this.#o&&this.#o.postMessage({type:"setNTPStartTime",ntpStartTime:a})}resync(){if(this.#e){var a=this.#e.getOutputTimestamp();
!a||a.contextTime<=0||this.#d(a)}}startDriftTimer(){this.stopDriftTimer();this.#l=setInterval(()=>{this.resync()},15E3)}stopDriftTimer(){this.#l&&(clearInterval(this.#l),this.#l=null)}getNTPStartTime(){return this.#r?this.#r[0]:this.#a??0}getGlobalOffset(){return this.#m?Atomics.load(this.#m,0):this.#n}calculateBundleWait(a){if(a.length<16||String.fromCharCode.apply(null,a.slice(0,8))!=="#bundle\x00")return null;var b=this.getNTPStartTime();if(b===0)return console.warn("[NTPTiming] NTP start time not yet initialized"),
null;var d=this.getGlobalOffset()/1E3;b+=d;d=new DataView(a.buffer,a.byteOffset);a=d.getUint32(8,!1);d=d.getUint32(12,!1);return a!==0||d!==0&&d!==1?{audioTimeS:a+d/4294967296-b,currentTimeS:this.#e?.currentTime??0}:null}reset(){this.stopDriftTimer();this.#a=void 0;this.#n=0;this.#m=this.#r=null}},W=class{#t;#e;#o;constructor(a={}){this.#t=a.sharedBuffer||null;this.#e=a.bufferConstants||null;this.#o=a.ringBufferBase||0}update(a,b,d){this.#t=a;this.#o=b;this.#e=d}isAvailable(){return!(!this.#t||!this.#e)}start(){if(!this.isAvailable())throw Error("AudioCapture not initialized");
let a=new Uint32Array(this.#t,this.#o+this.#e.AUDIO_CAPTURE_START,4);Atomics.store(a,1,0);Atomics.store(a,0,1)}stop(){if(!this.isAvailable())throw Error("AudioCapture not initialized");var a=this.#e,b=this.#o+a.AUDIO_CAPTURE_START,d=new Uint32Array(this.#t,b,4);Atomics.store(d,0,0);let f=Atomics.load(d,1),l=d[2];d=d[3];a=new Float32Array(this.#t,b+a.AUDIO_CAPTURE_HEADER_SIZE,f*d);b=new Float32Array(f);let n=d>1?new Float32Array(f):null;for(let q=0;q<f;q++)b[q]=a[q*d],n&&(n[q]=a[q*d+1]);return{sampleRate:l,
channels:d,frames:f,left:b,right:n}}isEnabled(){if(!this.isAvailable())return!1;let a=new Uint32Array(this.#t,this.#o+this.#e.AUDIO_CAPTURE_START,1);return Atomics.load(a,0)===1}getFrameCount(){if(!this.isAvailable())return 0;let a=new Uint32Array(this.#t,this.#o+this.#e.AUDIO_CAPTURE_START,2);return Atomics.load(a,1)}getMaxDuration(){if(!this.#e)return 0;let a=this.#e;return a.AUDIO_CAPTURE_FRAMES/(a.AUDIO_CAPTURE_SAMPLE_RATE||48E3)}},k={};k=k||{};(function(){k.SECS_70YRS=2208988800;k.TWO_32=4294967296;
k.defaults={metadata:!1,unpackSingleArgs:!0};k.isCommonJS=!!(typeof ba<"u"&&ba.exports);k.isNode=k.isCommonJS&&typeof window>"u";k.isElectron=!!(typeof C<"u"&&C.versions&&C.versions.electron);k.isBufferEnv=k.isNode||k.isElectron;k.isArray=function(a){return a&&Object.prototype.toString.call(a)==="[object Array]"};k.isTypedArrayView=function(a){return a.buffer&&a.buffer instanceof ArrayBuffer};k.isBuffer=function(a){return k.isBufferEnv&&a instanceof H};k.Long=typeof Long<"u"?Long:void 0;k.TextDecoder=
typeof TextDecoder<"u"?new TextDecoder("utf-8"):typeof util<"u"&&typeof(util.TextDecoder!=="undefined")?new util.TextDecoder("utf-8"):void 0;k.TextEncoder=typeof TextEncoder<"u"?new TextEncoder("utf-8"):typeof util<"u"&&typeof(util.TextEncoder!=="undefined")?new util.TextEncoder("utf-8"):void 0;k.dataView=function(a,b,d){return a.buffer?new DataView(a.buffer,b,d):a instanceof ArrayBuffer?new DataView(a,b,d):new DataView(new Uint8Array(a),b,d)};k.byteArray=function(a){if(a instanceof Uint8Array)return a;
var b=a.buffer?a.buffer:a;if(!(b instanceof ArrayBuffer)&&(typeof b.length>"u"||typeof b=="string"))throw Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(a,null,2));return new Uint8Array(b)};k.nativeBuffer=function(a){return k.isBufferEnv?k.isBuffer(a)?a:H.from(a.buffer?a:new Uint8Array(a)):k.isTypedArrayView(a)?a:new Uint8Array(a)};k.copyByteArray=function(a,b,d){if(k.isTypedArrayView(a)&&k.isTypedArrayView(b))b.set(a,d);else{var f=Math.min(b.length-d,a.length),
l=0;for(d=d===void 0?0:d;l<f;l++,d++)b[d]=a[l]}return b};k.readString=function(a,b){for(var d=[],f=b.idx;f<a.byteLength;f++){var l=a.getUint8(f);if(l!==0)d.push(l);else{f++;break}}b.idx=f+3&-4;return(k.isBufferEnv?k.readString.withBuffer:k.TextDecoder?k.readString.withTextDecoder:k.readString.raw)(d)};k.readString.raw=function(a){for(var b="",d=0;d<a.length;d+=1E4)b+=String.fromCharCode.apply(null,a.slice(d,d+1E4));return b};k.readString.withTextDecoder=function(a){a=new Int8Array(a);return k.TextDecoder.decode(a)};
k.readString.withBuffer=function(a){return H.from(a).toString("utf-8")};k.writeString=function(a){var b=k.isBufferEnv?k.writeString.withBuffer:k.TextEncoder?k.writeString.withTextEncoder:null;a+="\x00";var d;b&&(d=b(a));for(var f=b?d.length:a.length,l=new Uint8Array(f+3&-4),n=0;n<f-1;n++){var q=b?d[n]:a.charCodeAt(n);l[n]=q}return l};k.writeString.withTextEncoder=function(a){return k.TextEncoder.encode(a)};k.writeString.withBuffer=function(a){return H.from(a)};k.readPrimitive=function(a,b,d,f){a=
a[b](f.idx,!1);return f.idx+=d,a};k.writePrimitive=function(a,b,d,f,l){l=l===void 0?0:l;var n;return b?n=new Uint8Array(b.buffer):(n=new Uint8Array(f),b=new DataView(n.buffer)),b[d](l,a,!1),n};k.readInt32=function(a,b){return k.readPrimitive(a,"getInt32",4,b)};k.writeInt32=function(a,b,d){return k.writePrimitive(a,b,"setInt32",4,d)};k.readInt64=function(a,b){var d=k.readPrimitive(a,"getInt32",4,b);a=k.readPrimitive(a,"getInt32",4,b);return k.Long?new k.Long(a,d):{high:d,low:a,unsigned:!1}};k.writeInt64=
function(a,b,d){var f=new Uint8Array(8);return f.set(k.writePrimitive(a.high,b,"setInt32",4,d),0),f.set(k.writePrimitive(a.low,b,"setInt32",4,d+4),4),f};k.readFloat32=function(a,b){return k.readPrimitive(a,"getFloat32",4,b)};k.writeFloat32=function(a,b,d){return k.writePrimitive(a,b,"setFloat32",4,d)};k.readFloat64=function(a,b){return k.readPrimitive(a,"getFloat64",8,b)};k.writeFloat64=function(a,b,d){return k.writePrimitive(a,b,"setFloat64",8,d)};k.readChar32=function(a,b){a=k.readPrimitive(a,"getUint32",
4,b);return String.fromCharCode(a)};k.writeChar32=function(a,b,d){a=a.charCodeAt(0);if(!(a===void 0||a<-1))return k.writePrimitive(a,b,"setUint32",4,d)};k.readBlob=function(a,b){var d=k.readInt32(a,b),f=d+3&-4;a=new Uint8Array(a.buffer,b.idx,d);return b.idx+=f,a};k.writeBlob=function(a){a=k.byteArray(a);var b=a.byteLength,d=new Uint8Array((b+3&-4)+4),f=new DataView(d.buffer);return k.writeInt32(b,f),d.set(a,4),d};k.readMIDIBytes=function(a,b){a=new Uint8Array(a.buffer,b.idx,4);return b.idx+=4,a};
k.writeMIDIBytes=function(a){a=k.byteArray(a);var b=new Uint8Array(4);return b.set(a),b};k.readColor=function(a,b){a=new Uint8Array(a.buffer,b.idx,4);var d=a[3]/255;return b.idx+=4,{r:a[0],g:a[1],b:a[2],a:d}};k.writeColor=function(a){return new Uint8Array([a.r,a.g,a.b,Math.round(a.a*255)])};k.readTrue=function(){return!0};k.readFalse=function(){return!1};k.readNull=function(){return null};k.readImpulse=function(){return 1};k.readTimeTag=function(a,b){var d=k.readPrimitive(a,"getUint32",4,b);a=k.readPrimitive(a,
"getUint32",4,b);b=d===0&&a===1?Date.now():k.ntpToJSTime(d,a);return{raw:[d,a],native:b}};k.writeTimeTag=function(a){a=a.raw?a.raw:k.jsToNTPTime(a.native);var b=new Uint8Array(8),d=new DataView(b.buffer);return k.writeInt32(a[0],d,0),k.writeInt32(a[1],d,4),b};k.timeTag=function(a,b){a=a||0;b=b||Date.now();var d=b/1E3;b=Math.floor(d);var f=Math.floor(a);a=d-b+(a-f);a>1&&(d=Math.floor(a),f+=d,a-=d);return{raw:[b+f+k.SECS_70YRS,Math.round(k.TWO_32*a)]}};k.ntpToJSTime=function(a,b){return(a-k.SECS_70YRS+
b/k.TWO_32)*1E3};k.jsToNTPTime=function(a){a/=1E3;var b=Math.floor(a);return[b+k.SECS_70YRS,Math.round(k.TWO_32*(a-b))]};k.readArguments=function(a,b,d){var f=k.readString(a,d);if(f.indexOf(",")!==0)throw Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+f," at offset: "+d.idx);var l=f.substring(1).split(""),n=[];return k.readArgumentsIntoArray(n,l,f,a,b,d),n};k.readArgument=function(a,b,d,f,l){var n=k.argumentTypes[a];if(!n)throw Error("'"+
a+"' is not a valid OSC type tag. Type tag string was: "+b);b=k[n.reader](d,l);return f.metadata&&(b={type:a,value:b}),b};k.readArgumentsIntoArray=function(a,b,d,f,l,n){for(var q=0;q<b.length;){var t=b[q];if(t==="["){var r=b.slice(q+1);t=r.indexOf("]");if(t<0)throw Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+d);r=r.slice(0,t);r=k.readArgumentsIntoArray([],r,d,f,l,n);q+=t+2}else r=k.readArgument(t,d,f,l,n),q++;
a.push(r)}return a};k.writeArguments=function(a,b){a=k.collectArguments(a,b);return k.joinParts(a)};k.joinParts=function(a){var b=new Uint8Array(a.byteLength);a=a.parts;for(var d=0,f=0;f<a.length;f++){var l=a[f];k.copyByteArray(l,b,d);d+=l.length}return b};k.addDataPart=function(a,b){b.parts.push(a);b.byteLength+=a.length};k.writeArrayArguments=function(a,b){for(var d="[",f=0;f<a.length;f++)d+=k.writeArgument(a[f],b);return d+="]",d};k.writeArgument=function(a,b){if(k.isArray(a))return k.writeArrayArguments(a,
b);var d=k.argumentTypes[a.type].writer;d&&(d=k[d](a.value),k.addDataPart(d,b));return a.type};k.collectArguments=function(a,b,d){k.isArray(a)||(a=typeof a>"u"?[]:[a]);d=d||{byteLength:0,parts:[]};b.metadata||(a=k.annotateArguments(a));var f=",";b=d.parts.length;for(var l=0;l<a.length;l++)f+=k.writeArgument(a[l],d);a=k.writeString(f);return d.byteLength+=a.byteLength,d.parts.splice(b,0,a),d};k.readMessage=function(a,b,d){b=b||k.defaults;a=k.dataView(a,a.byteOffset,a.byteLength);d=d||{idx:0};var f=
k.readString(a,d);return k.readMessageContents(f,a,b,d)};k.readMessageContents=function(a,b,d,f){if(a.indexOf("/")!==0)throw Error("A malformed OSC address was found while reading an OSC message. String was: "+a);b=k.readArguments(b,d,f);return{address:a,args:b.length===1&&d.unpackSingleArgs?b[0]:b}};k.collectMessageParts=function(a,b,d){return d=d||{byteLength:0,parts:[]},k.addDataPart(k.writeString(a.address),d),k.collectArguments(a.args,b,d)};k.writeMessage=function(a,b){if(b=b||k.defaults,!k.isValidMessage(a))throw Error("An OSC message must contain a valid address. Message was: "+
JSON.stringify(a,null,2));a=k.collectMessageParts(a,b);return k.joinParts(a)};k.isValidMessage=function(a){return a.address&&a.address.indexOf("/")===0};k.readBundle=function(a,b,d){return k.readPacket(a,b,d)};k.collectBundlePackets=function(a,b,d){d=d||{byteLength:0,parts:[]};k.addDataPart(k.writeString("#bundle"),d);k.addDataPart(k.writeTimeTag(a.timeTag),d);for(var f=0;f<a.packets.length;f++){var l=a.packets[f];l=(l.address?k.collectMessageParts:k.collectBundlePackets)(l,b);d.byteLength+=l.byteLength;
k.addDataPart(k.writeInt32(l.byteLength),d);d.parts=d.parts.concat(l.parts)}return d};k.writeBundle=function(a,b){if(!k.isValidBundle(a))throw Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(a,null,2));b=b||k.defaults;a=k.collectBundlePackets(a,b);return k.joinParts(a)};k.isValidBundle=function(a){return a.timeTag!==void 0&&a.packets!==void 0};k.readBundleContents=function(a,b,d,f){for(var l=k.readTimeTag(a,d),n=[];d.idx<f;){var q=k.readInt32(a,d);
q=k.readPacket(a,b,d,d.idx+q);n.push(q)}return{timeTag:l,packets:n}};k.readPacket=function(a,b,d,f){a=k.dataView(a,a.byteOffset,a.byteLength);f=f===void 0?a.byteLength:f;d=d||{idx:0};var l=k.readString(a,d),n=l[0];if(n==="#")return k.readBundleContents(a,b,d,f);if(n==="/")return k.readMessageContents(l,a,b,d);throw Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+l);};k.writePacket=function(a,b){if(k.isValidMessage(a))return k.writeMessage(a,b);if(k.isValidBundle(a))return k.writeBundle(a,
b);throw Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(a,null,2));};k.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},
N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}};k.inferTypeForArgument=function(a){switch(typeof a){case "boolean":return a?"T":"F";case "string":return"s";case "number":return"f";case "undefined":return"N";case "object":if(a===null)return"N";if(a instanceof Uint8Array||a instanceof ArrayBuffer)return"b";if(typeof a.high==
"number"&&typeof a.low=="number")return"h"}throw Error("Can't infer OSC argument type for value: "+JSON.stringify(a,null,2));};k.annotateArguments=function(a){for(var b=[],d=0;d<a.length;d++){var f=a[d];f=typeof f=="object"&&f.type&&f.value!==void 0?f:k.isArray(f)?k.annotateArguments(f):{type:k.inferTypeForArgument(f),value:f};b.push(f)}return b}})();var Z=function(){};Z.prototype.on=function(){};Z.prototype.emit=function(){};Z.prototype.removeListener=function(){};(function(){k.supportsSerial=!1;
k.firePacketEvents=function(b,d,f,l){d.address?b.emit("message",d,f,l):k.fireBundleEvents(b,d,f,l)};k.fireBundleEvents=function(b,d,f,l){b.emit("bundle",d,f,l);for(f=0;f<d.packets.length;f++)k.firePacketEvents(b,d.packets[f],d.timeTag,l)};k.fireClosedPortSendError=function(b,d){b.emit("error",d||"Can't send packets on a closed osc.Port object. Please open (or reopen) this Port by calling open().")};k.Port=function(b){this.options=b||{};this.on("data",this.decodeOSC.bind(this))};var a=k.Port.prototype=
Object.create(Z.prototype);a.constructor=k.Port;a.send=function(b){var d=Array.prototype.slice.call(arguments),f=this.encodeOSC(b);f=k.nativeBuffer(f);d[0]=f;this.sendRaw.apply(this,d)};a.encodeOSC=function(b){b=b.buffer?b.buffer:b;try{var d=k.writePacket(b,this.options)}catch(f){this.emit("error",f)}return d};a.decodeOSC=function(b,d){b=k.byteArray(b);this.emit("raw",b,d);try{var f=k.readPacket(b,this.options);this.emit("osc",f,d);k.firePacketEvents(this,f,void 0,d)}catch(l){this.emit("error",l)}};
k.SLIPPort=function(b){var d=this;b=this.options=b||{};b.useSLIP=b.useSLIP===void 0?!0:b.useSLIP;this.decoder=new slip.Decoder({onMessage:this.decodeOSC.bind(this),onError:function(f){d.emit("error",f)}});this.on("data",(b.useSLIP?this.decodeSLIPData:this.decodeOSC).bind(this))};a=k.SLIPPort.prototype=Object.create(k.Port.prototype);a.constructor=k.SLIPPort;a.encodeOSC=function(b){b=b.buffer?b.buffer:b;try{var d=k.writePacket(b,this.options);var f=slip.encode(d)}catch(l){this.emit("error",l)}return f};
a.decodeSLIPData=function(b,d){this.decoder.decode(b,d)};k.relay=function(b,d,f,l,n,q){f=f||"message";l=l||"send";n=n||function(){};q=q?[null].concat(q):[];var t=function(r){q[0]=r;n(r);d[l].apply(d,q)};return b.on(f,t),{eventName:f,listener:t}};k.relayPorts=function(b,d,f){return k.relay(b,d,f.raw?"raw":"osc",f.raw?"sendRaw":"send",f.transform)};k.stopRelaying=function(b,d){b.removeListener(d.eventName,d.listener)};k.Relay=function(b,d,f){(this.options=f||{}).raw=!1;this.port1=b;this.port2=d;this.listen()};
a=k.Relay.prototype=Object.create(Z.prototype);a.constructor=k.Relay;a.open=function(){this.port1.open();this.port2.open()};a.listen=function(){this.port1Spec&&this.port2Spec&&this.close();this.port1Spec=k.relayPorts(this.port1,this.port2,this.options);this.port2Spec=k.relayPorts(this.port2,this.port1,this.options);var b=this.close.bind(this);this.port1.on("close",b);this.port2.on("close",b)};a.close=function(){k.stopRelaying(this.port1,this.port1Spec);k.stopRelaying(this.port2,this.port2Spec);this.emit("close",
this.port1,this.port2)}})();(function(){k.WebSocket=typeof WebSocket<"u"?WebSocket:void 0;k.WebSocketPort=function(b){k.Port.call(this,b);this.on("open",this.listen.bind(this));(this.socket=b.socket)&&(this.socket.readyState===1?(k.WebSocketPort.setupSocketForBinary(this.socket),this.emit("open",this.socket)):this.open())};var a=k.WebSocketPort.prototype=Object.create(k.Port.prototype);a.constructor=k.WebSocketPort;a.open=function(){(!this.socket||this.socket.readyState>1)&&(this.socket=new k.WebSocket(this.options.url));
k.WebSocketPort.setupSocketForBinary(this.socket);var b=this;this.socket.onopen=function(){b.emit("open",b.socket)};this.socket.onerror=function(d){b.emit("error",d)}};a.listen=function(){var b=this;this.socket.onmessage=function(d){b.emit("data",d.data,d)};this.socket.onclose=function(d){b.emit("close",d)};b.emit("ready")};a.sendRaw=function(b){this.socket&&this.socket.readyState===1?this.socket.send(b):k.fireClosedPortSendError(this)};a.close=function(b,d){this.socket.close(b,d)};k.WebSocketPort.setupSocketForBinary=
function(b){b.binaryType=k.isNode?"nodebuffer":"arraybuffer"}})();var c=k,e={totalPages:1280,ringBufferReserved:3145728,bufferPoolOffset:19922944,bufferPoolSize:63963136,get totalMemory(){return this.bufferPoolOffset+this.bufferPoolSize},get wasmHeapSize(){return this.bufferPoolOffset-this.ringBufferReserved}},g={numBuffers:1024,maxNodes:1024,maxGraphDefs:1024,maxWireBufs:64,numAudioBusChannels:128,numInputBusChannels:2,numOutputBusChannels:2,numControlBusChannels:4096,bufLength:128,realTimeMemorySize:8192,
numRGens:64,realTime:!1,memoryLocking:!1,loadGraphDefs:0,preferredSampleRate:0,verbosity:0},h=function(){try{let a="".match(/^(https:\/\/unpkg\.com\/)supersonic-scsynth@([^/]+)\/dist\/supersonic\.js$/);if(a){let b=a[1],d=a[2];return{baseURL:"",coreBaseURL:`${b}supersonic-scsynth-core@${d}/`,sampleBaseURL:`${b}supersonic-scsynth-samples@${d}/samples/`,synthdefBaseURL:`${b}supersonic-scsynth-synthdefs@${d}/synthdefs/`}}return{baseURL:"",coreBaseURL:null,sampleBaseURL:null,synthdefBaseURL:null}}catch{return{baseURL:null,
coreBaseURL:null,sampleBaseURL:null,synthdefBaseURL:null}}}(),p=class a{static osc={encode:b=>c.writePacket(b),decode:(b,d={metadata:!1})=>c.readPacket(b,d)};static inspect(b){{let r;if(b&&typeof b.sharedBuffer<"u"&&typeof b.ringBufferBase<"u"){var d=b.sharedBuffer;r=b.ringBufferBase;b=b.bufferConstants}else if(b&&b.sab)d=b.sab,r=b.ringBufferBase??0,b=b.layout;else throw Error("inspect() requires an instance or {sab, ringBufferBase, layout}");if(d&&b){var f=new Int32Array(d),l=r+b.CONTROL_START;f=
{inHead:Atomics.load(f,(l+0)/4),inTail:Atomics.load(f,(l+4)/4),outHead:Atomics.load(f,(l+8)/4),outTail:Atomics.load(f,(l+12)/4),debugHead:Atomics.load(f,(l+16)/4),debugTail:Atomics.load(f,(l+20)/4),inSequence:Atomics.load(f,(l+24)/4),outSequence:Atomics.load(f,(l+28)/4),debugSequence:Atomics.load(f,(l+32)/4),statusFlags:Atomics.load(f,(l+36)/4),inWriteLock:Atomics.load(f,(l+40)/4)};l=new Float64Array(d,r+b.NTP_START_TIME_START,1);var n=new Int32Array(d,r+b.DRIFT_OFFSET_START,1),q=new Int32Array(d,
r+b.GLOBAL_OFFSET_START,1);l={ntpStartTime:l[0],driftOffsetMs:Atomics.load(n,0),globalOffsetMs:Atomics.load(q,0)};n=(f.inHead-f.inTail+b.IN_BUFFER_SIZE)%b.IN_BUFFER_SIZE;q=(f.outHead-f.outTail+b.OUT_BUFFER_SIZE)%b.OUT_BUFFER_SIZE;var t=(f.debugHead-f.debugTail+b.DEBUG_BUFFER_SIZE)%b.DEBUG_BUFFER_SIZE;n={in:{bytes:n,percent:n/b.IN_BUFFER_SIZE*100},out:{bytes:q,percent:q/b.OUT_BUFFER_SIZE*100},debug:{bytes:t,percent:t/b.DEBUG_BUFFER_SIZE*100}};q=new Uint32Array(d,r+b.METRICS_START,b.METRICS_SIZE/4);
d={layout:b,ringBufferBase:r,control:f,timing:l,bufferUsage:n,metrics:{processCount:q[0],messagesProcessed:q[1],messagesDropped:q[2],schedulerQueueDepth:q[3],schedulerQueueMax:q[4],schedulerQueueDropped:q[5]},sabByteLength:d.byteLength}}else d={error:"Not initialized - sab or layout missing"}}return d}#t;#e;#o=null;#i;#h;#r;#m;#a;#n;#l;#d;#y;#f;#w;#g;#p;#E;#s;#c;#u;#S;#T;#A;#_=null;#B=!1;#O=100;#D=null;#M=null;#z=0;#R=[];#v=null;constructor(b={}){this.#w=this.#f=!1;this.#g=null;this.#p={};this.#E=
null;this.#c=new pa;this.#u=new ia({mode:b.mode||"postMessage"});this.#T=new W({});this.#r=this.#i=this.#e=this.#t=null;this.loadedSynthDefs=new Map;let d=b.baseURL||h.baseURL;var f=b.coreBaseURL||h.coreBaseURL||d;let l=b.workerBaseURL||(f?`${f}workers/`:null);f=b.wasmBaseURL||(f?`${f}wasm/`:null);if(!l||!f)throw Error("SuperSonic requires coreBaseURL, baseURL, or explicit workerBaseURL and wasmBaseURL options.");this.#s={mode:b.mode||"postMessage",snapshotIntervalMs:b.snapshotIntervalMs??25,wasmUrl:b.wasmUrl||
f+"scsynth-nrt.wasm",wasmBaseURL:f,workletUrl:b.workletUrl||l+"scsynth_audio_worklet.js",workerBaseURL:l,audioContext:b.audioContext||null,autoConnect:b.autoConnect!==!1,audioContextOptions:{latencyHint:"interactive",sampleRate:48E3},memory:e,worldOptions:{...g,...b.scsynthOptions},preschedulerCapacity:b.preschedulerCapacity||65536,activityEvent:{maxLineLength:b.activityEvent?.maxLineLength??200,scsynthMaxLineLength:b.activityEvent?.scsynthMaxLineLength??null,oscInMaxLineLength:b.activityEvent?.oscInMaxLineLength??
null,oscOutMaxLineLength:b.activityEvent?.oscOutMaxLineLength??null},debug:b.debug??!1,debugScsynth:b.debugScsynth??!1,debugOscIn:b.debugOscIn??!1,debugOscOut:b.debugOscOut??!1,activityConsoleLog:{maxLineLength:b.activityConsoleLog?.maxLineLength??200,scsynthMaxLineLength:b.activityConsoleLog?.scsynthMaxLineLength??null,oscInMaxLineLength:b.activityConsoleLog?.oscInMaxLineLength??null,oscOutMaxLineLength:b.activityConsoleLog?.oscOutMaxLineLength??null}};this.#n=b.sampleBaseURL||h.sampleBaseURL||(d?
`${d}samples/`:null);this.#l=b.synthdefBaseURL||h.synthdefBaseURL||(d?`${d}synthdefs/`:null);this.#d={maxRetries:b.fetchMaxRetries??3,baseDelay:b.fetchRetryDelay??1E3};this.#y=new Q({onLoadingEvent:(n,q)=>this.#c.emit(n,q),maxRetries:this.#d.maxRetries,baseDelay:this.#d.baseDelay});this.bootStats={initStartTime:null,initDuration:null}}get initialized(){return this.#f}get initializing(){return this.#w}get mode(){return this.#s.mode}get bufferConstants(){return this.#u.bufferConstants}get ringBufferBase(){return this.#u.ringBufferBase}get sharedBuffer(){return this.#u.sharedBuffer}get node(){return this.#o}get osc(){return this.#i}on(b,
d){return this.#c.on(b,d)}off(b,d){return this.#c.off(b,d),this}once(b,d){return this.#c.once(b,d),this}removeAllListeners(b){return this.#c.removeAllListeners(b),this}async init(){if(!this.#f)return this.#g?this.#g:(this.#g=this.#W(),this.#g)}async #W(){this.#w=!0;this.bootStats.initStartTime=performance.now();try{this.#H();this.#G();this.#I();this.#q();this.#P();let b=await this.#x();await this.#L(b);await this.#k();this.#C();await this.#F()}catch(b){throw this.#w=!1,this.#g=null,console.error("[SuperSonic] Initialization failed:",
b),this.#c.emit("error",b),b;}}getMetrics(){return this.#N()}setMetricsInterval(b){this.#O=b;this.#C()}stopMetricsPolling(){this.#U()}async recover(){return this.#f?await this.resume()?!0:await this.reload():!1}async resume(){if(!this.#f||!this.#t||!this.#u.getMetricsView())return!1;try{await this.#t.resume()}catch{}var b=this.#u.getMetricsView();let d=b[0];await new Promise(f=>setTimeout(f,200));b=b[0]>d;return b&&(this.#S.resync(),this.#c.emit("resumed")),b}async reload(){if(!this.#f)return!1;this.#c.emit("reload:start");
let b=new Map(this.loadedSynthDefs),d=this.#r?.getAllocatedBuffers()||[];await this.#$();await this.#V();for(let [f,l]of b)try{await this.send("/d_recv",l)}catch(n){console.error(`[SuperSonic] Failed to restore synthdef ${f}:`,n)}for(let f of d)try{if(this.#s.mode==="postMessage"&&f.source)f.source.type==="file"&&await this.loadSample(f.bufnum,f.source.path,f.source.startFrame||0,f.source.numFrames||0);else{let l=crypto.randomUUID();await this.send("/b_allocPtr",f.bufnum,f.ptr,f.numFrames,f.numChannels,
f.sampleRate,l)}}catch(l){console.error(`[SuperSonic] Failed to restore buffer ${f.bufnum}:`,l)}return(b.size>0||d.length>0)&&await this.sync(),this.#c.emit("reload:complete",{success:!0}),!0}async #$(){this.#S?.stopDriftTimer();this.#U();this.#a?.clear();this.#a=null;this.#i&&(this.#i.cancelAll(),this.#i.dispose(),this.#i=null);this.#e&&(this.#e.disconnect(),this.#e=null);this.#t&&(await this.#t.close(),this.#t=null);this.#f=!1;this.loadedSynthDefs.clear();this.#A=this.#g=null;this.#S?.reset()}async #V(){this.#w=
!0;this.bootStats.initStartTime=performance.now();try{this.#I();this.#r&&this.#r.updateAudioContext(this.#t);this.#P();let b=await this.#x();await this.#L(b);await this.#k();this.#C();await this.#F()}catch(b){throw this.#w=!1,this.#g=null,console.error("[SuperSonic] Partial init failed:",b),this.#c.emit("error",b),b;}}getTree(){if(!this.#f)return{nodeCount:0,version:0,nodes:[]};var b=this.#u.bufferConstants;if(!b)return{nodeCount:0,version:0,nodes:[]};if(this.#s.mode==="postMessage"){var d=this.#u.getSnapshotBuffer();
if(!d)return{nodeCount:0,version:0,nodes:[]};var f=b.METRICS_SIZE}else{d=this.#u.sharedBuffer;if(!d)return{nodeCount:0,version:0,nodes:[]};f=this.#u.ringBufferBase+b.NODE_TREE_START}var l=f,n=new Uint32Array(d,l,2);f=n[0];n=n[1];l+=b.NODE_TREE_HEADER_SIZE;let q=b.NODE_TREE_MAX_NODES,t=b.NODE_TREE_ENTRY_SIZE;b=b.NODE_TREE_DEF_NAME_SIZE;let r=new DataView(d,l,q*t),D=new TextDecoder("utf-8"),E=[],y=0;for(let R=0;R<q&&y<f;R++){let K=R*t,S=r.getInt32(K,!0);if(S!==-1){y++;var L=new Uint8Array(d,l+K+24,
b),O=new Uint8Array(b);O.set(L);L=O.indexOf(0);L===-1&&(L=b);O=D.decode(O.subarray(0,L));E.push({id:S,parentId:r.getInt32(K+4,!0),isGroup:r.getInt32(K+8,!0)===1,prevId:r.getInt32(K+12,!0),nextId:r.getInt32(K+16,!0),headId:r.getInt32(K+20,!0),defName:O})}}return{nodeCount:f,version:n,nodes:E}}startCapture(){this.#b("start capture");this.#T.start()}stopCapture(){return this.#b("stop capture"),this.#T.stop()}isCaptureEnabled(){return this.#T.isEnabled()}getCaptureFrames(){return this.#T.getFrameCount()}getMaxCaptureDuration(){return this.#T.getMaxDuration()}async send(b,
...d){this.#b("send OSC messages");var f={"/d_load":"Use loadSynthDef() or send /d_recv with synthdef bytes instead.","/d_loadDir":"Use loadSynthDef() or send /d_recv with synthdef bytes instead.","/b_read":"Use loadSample() to load audio into a buffer.","/b_readChannel":"Use loadSample() to load audio into a buffer.","/b_write":"Writing audio files is not available in the browser.","/b_close":"Writing audio files is not available in the browser.","/clearSched":"Use cancelAllScheduled() or the fine-grained cancelTag(), cancelSession(), cancelSessionTag() methods instead.",
"/dumpOSC":"Use browser developer tools to inspect OSC messages.","/error":"SuperSonic always enables error notifications so you never miss a /fail message."};if(f[b])throw Error(`${b} is not supported in SuperSonic. ${f[b]}`);if(b==="/d_recv"&&(f=d[0],f instanceof Uint8Array||f instanceof ArrayBuffer)){f=f instanceof ArrayBuffer?new Uint8Array(f):f;let n=w(f)||"unknown";this.loadedSynthDefs.set(n,f)}if(b==="/d_free")for(var l of d)typeof l=="string"&&this.loadedSynthDefs.delete(l);else b==="/d_freeAll"&&
this.loadedSynthDefs.clear();l=d.map(n=>{if(typeof n=="string")return{type:"s",value:n};if(typeof n=="number")return{type:Number.isInteger(n)?"i":"f",value:n};if(n instanceof Uint8Array||n instanceof ArrayBuffer)return{type:"b",value:n instanceof ArrayBuffer?new Uint8Array(n):n};throw Error(`Unsupported argument type: ${typeof n}`);});l=a.osc.encode({address:b,args:l});if(this.#s.debug||this.#s.debugOscOut){let n=this.#s.activityConsoleLog.oscOutMaxLineLength??this.#s.activityConsoleLog.maxLineLength;
d=d.map(q=>{if(q instanceof Uint8Array||q instanceof ArrayBuffer)return`<${q.byteLength||q.length} bytes>`;q=JSON.stringify(q);return q.length>n?q.slice(0,n)+"...":q}).join(", ");console.log(`[OSC \u2192] ${b}${d?" "+d:""}`)}return this.sendOSC(l)}async sendOSC(b,d={}){this.#b("send OSC data");b=this.#K(b);b=await this.#X(b);if(this.#u.addMetric("mainMessagesSent"),this.#u.addMetric("mainBytesSent",b.length),this.#c.emit("message:sent",b),this.#A?.tryWrite(b))this.#u.addMetric("preschedulerBypassed");
else{var f=this.#S?.calculateBundleWait(b);if(this.#s.mode!=="postMessage"||f){var l=this.#u.bufferConstants?.scheduler_slot_size;if(f&&l&&b.length>l)throw Error(`OSC bundle too large to schedule (${b.length} > ${l} bytes). Use immediate timestamp (0 or 1) for large messages, or reduce bundle size.`);d={...d};f&&(d.audioTimeS=f.audioTimeS,d.currentTimeS=f.currentTimeS);this.#i.sendWithOptions(b,d)}else this.#e.port.postMessage({type:"osc",oscData:b})}}cancelTag(b){this.#b("cancel by tag");this.#i.cancelTag(b)}cancelSession(b){this.#b("cancel by session");
this.#i.cancelSession(b)}cancelSessionTag(b,d){this.#b("cancel by session and tag");this.#i.cancelSessionTag(b,d)}cancelAllScheduled(){this.#b("cancel all scheduled");this.#i.cancelAll()}async loadSynthDef(b){this.#b("load synthdef");if(this.#j(b))var d=b;else{if(!this.#l)throw Error("synthdefBaseURL not configured.");d=`${this.#l}${b}.scsyndef`}b=w(d);d=await this.#y.fetch(d,{type:"synthdef",name:b});d=new Uint8Array(d);return await this.send("/d_recv",d),{name:b,size:d.length}}async loadSynthDefs(b){this.#b("load synthdefs");
let d={};return await Promise.all(b.map(async f=>{try{await this.loadSynthDef(f),d[f]={success:!0}}catch(l){d[f]={success:!1,error:l.message}}})),d}async loadSample(b,d,f=0,l=0){this.#b("load samples");d=await this.#r.prepareFromFile({bufnum:b,path:d,startFrame:f,numFrames:l});return await this.send("/b_allocPtr",b,d.ptr,d.numFrames,d.numChannels,d.sampleRate,d.uuid),d.allocationComplete}async sync(b=Math.floor(Math.random()*2147483647)){this.#b("sync");let d=new Promise((f,l)=>{let n=setTimeout(()=>
{this.#a?.delete(b);l(Error("Timeout waiting for /synced response"))},1E4);this.#a||(this.#a=new Map);this.#a.set(b,()=>{clearTimeout(n);this.#a.delete(b);f()})});await this.send("/sync",b);await d;this.#s.mode==="postMessage"&&await new Promise(f=>setTimeout(f,this.#s.snapshotIntervalMs*2))}getInfo(){return this.#b("get info"),{sampleRate:this.#t.sampleRate,numBuffers:this.#s.worldOptions.numBuffers,totalMemory:this.#s.memory.totalMemory,wasmHeapSize:this.#s.memory.wasmHeapSize,bufferPoolSize:this.#s.memory.bufferPoolSize,
bootTimeMs:this.bootStats.initDuration,capabilities:{...this.#p},version:this.#E}}async shutdown(){!this.#f&&!this.#w||(this.#c.emit("shutdown"),this.#S?.stopDriftTimer(),this.#U(),this.#a?.clear(),this.#a=null,this.#i&&(this.#i.cancelAll(),this.#i.dispose(),this.#i=null),this.#e&&(this.#e.disconnect(),this.#e=null),this.#t&&(await this.#t.close(),this.#t=null),this.#r&&(this.#r.destroy(),this.#r=null),this.#m=null,this.#A=null,this.#f=!1,this.loadedSynthDefs.clear(),this.#g=null,this.#h=null,this.#S?.reset(),
this.bootStats={initStartTime:null,initDuration:null})}async destroy(){this.#c.emit("destroy");await this.shutdown();this.#M=null;this.#c.clearAllListeners()}async reset(b={}){await this.shutdown();await this.init(b)}#H(){this.#p={audioWorklet:typeof AudioWorklet<"u",sharedArrayBuffer:typeof SharedArrayBuffer<"u",crossOriginIsolated:window.crossOriginIsolated===!0,atomics:typeof Atomics<"u",webWorker:typeof Worker<"u"};let b=this.#s.mode;var d=["audioWorklet","webWorker"];b==="sab"&&d.push("sharedArrayBuffer",
"crossOriginIsolated","atomics");d=d.filter(f=>!this.#p[f]);if(d.length>0)throw d=Error(`Missing required features for ${b} mode: ${d.join(", ")}`),b==="sab"&&!this.#p.crossOriginIsolated&&(d.message+="\n\nConsider using mode: 'postMessage' which doesn't require COOP/COEP headers."),d;if(b!=="sab"&&b!=="postMessage")throw Error(`Invalid mode: '${b}'. Use 'sab' or 'postMessage'.`);}#G(){let b=this.#s.memory;this.#s.mode==="sab"?this.#h=new WebAssembly.Memory({initial:b.totalPages,maximum:b.totalPages,
shared:!0}):this.#h=null}#I(){this.#s.audioContext?this.#t=this.#s.audioContext:this.#t=new AudioContext(this.#s.audioContextOptions);this.#t.addEventListener("statechange",()=>{let b=this.#t?.state;if(b){var d=this.#D;this.#D=b;b!=="running"||d!=="suspended"&&d!=="interrupted"||this.#S?.resync();this.#c.emit("audiocontext:statechange",{state:b});b==="suspended"?this.#c.emit("audiocontext:suspended"):b==="running"?this.#c.emit("audiocontext:resumed"):b==="interrupted"&&this.#c.emit("audiocontext:interrupted")}})}#q(){this.#r=
new ea({mode:this.#s.mode,audioContext:this.#t,sharedBuffer:this.#s.mode==="sab"?this.#h.buffer:null,bufferPoolConfig:{start:this.#s.memory.bufferPoolOffset,size:this.#s.memory.bufferPoolSize},sampleBaseURL:this.#n,maxBuffers:this.#s.worldOptions.numBuffers,assetLoader:this.#y})}#P(){this.#m=new T({bufferManager:this.#r,getDefaultSampleRate:()=>this.#t?.sampleRate||44100})}async #x(){if(this.#M)return this.#M;let b=this.#s.wasmUrl.split("/").pop();this.#c.emit("loading:start",{type:"wasm",name:b});
var d=await fetch(this.#s.wasmUrl);if(!d.ok)throw Error(`Failed to load WASM: ${d.status} ${d.statusText}`);d=await d.arrayBuffer();return this.#c.emit("loading:complete",{type:"wasm",name:b,size:d.byteLength}),this.#M=d,d}async #L(b){await z(this.#t.audioWorklet,this.#s.workletUrl);this.#e=new AudioWorkletNode(this.#t,"scsynth-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[2]});this.#s.autoConnect&&this.#e.connect(this.#t.destination);this.#o=this.#Z();this.#e.port.start();this.#Q();
let d=this.#s.mode;this.#e.port.postMessage({type:"init",mode:d,sharedBuffer:d==="sab"?this.#h.buffer:null,snapshotIntervalMs:this.#s.snapshotIntervalMs});b={type:"loadWasm",wasmBytes:b,worldOptions:this.#s.worldOptions,sampleRate:this.#t.sampleRate};d==="sab"?b.wasmMemory=this.#h:b.memoryPages=this.#s.memoryPages||1280;this.#e.port.postMessage(b);await this.#Y();this.#r.setWorkletPort(this.#e.port)}#Z(){let b=this.#e;return Object.freeze({connect:(...d)=>b.connect(...d),disconnect:(...d)=>b.disconnect(...d),
get context(){return b.context},get numberOfOutputs(){return b.numberOfOutputs},get numberOfInputs(){return b.numberOfInputs},get channelCount(){return b.channelCount},get input(){return b}})}async #k(){let b=this.#s.mode,d=this.#u.bufferConstants,f=this.#u.ringBufferBase,l=this.#u.sharedBuffer,n={workerBaseURL:this.#s.workerBaseURL,preschedulerCapacity:this.#s.preschedulerCapacity,getAudioContextTime:()=>this.#t?.currentTime??0,getNTPStartTime:()=>this.#S?.getNTPStartTime()??0};if(b==="sab"&&(n.sharedBuffer=
l,n.ringBufferBase=f,n.bufferConstants=d),this.#i=G(b,n),this.#i.onReply((q,t)=>{this.#c.emit("message:raw",{oscData:q,sequence:t});try{let r=c.readPacket(q,{metadata:!1,unpackSingleArgs:!1});if(r.address==="/supersonic/buffer/freed")this.#r?.handleBufferFreed(r.args);else if(r.address==="/supersonic/buffer/allocated")this.#r?.handleBufferAllocated(r.args);else if(r.address==="/synced"&&r.args.length>0){let D=r.args[0];this.#a?.has(D)&&this.#a.get(D)(r)}if(this.#c.emit("message",r),this.#s.debug||
this.#s.debugOscIn){let D=this.#s.activityConsoleLog.oscInMaxLineLength??this.#s.activityConsoleLog.maxLineLength,E=r.args?.map(y=>{y=JSON.stringify(y);return y.length>D?y.slice(0,D)+"...":y}).join(", ")||"";console.log(`[\u2190 OSC] ${r.address}${E?" "+E:""}`)}}catch(r){console.error("[SuperSonic] Failed to decode OSC message:",r)}}),this.#i.onDebug(q=>{var t=this.#s.activityEvent.scsynthMaxLineLength??this.#s.activityEvent.maxLineLength;if(t>0&&q.text?.length>t&&(q={...q,text:q.text.slice(0,t)+
"..."}),this.#c.emit("debug",q),this.#s.debug||this.#s.debugScsynth)t=this.#s.activityConsoleLog.scsynthMaxLineLength??this.#s.activityConsoleLog.maxLineLength,q=q.text.length>t?q.text.slice(0,t)+"...":q.text,console.log(`[synth] ${q}`)}),this.#i.onError((q,t)=>{console.error(`[SuperSonic] ${t} error:`,q);this.#c.emit("error",Error(`${t}: ${q}`))}),b==="sab")await this.#i.initialize();else{if(await this.#i.initialize(this.#e.port),this.#R?.length>0)for(let q of this.#R)this.#i.handleDebugRaw(q);this.#v=
q=>this.#i.handleDebugRaw(q);this.#R=[]}}async #F(){this.#f=!0;this.#w=!1;this.bootStats.initDuration=performance.now()-this.bootStats.initStartTime;await this.#c.emitAsync("setup");this.#c.emit("ready",{capabilities:this.#p,bootStats:this.bootStats})}#Y(){return new Promise((b,d)=>{let f=setTimeout(()=>{d(Error("AudioWorklet initialization timeout"))},5E3),l=async n=>{if(n.data.type==="error")clearTimeout(f),this.#e.port.removeEventListener("message",l),d(Error(n.data.error||"AudioWorklet error"));
else if(n.data.type==="initialized")if(clearTimeout(f),this.#e.port.removeEventListener("message",l),n.data.success){let q=n.data.ringBufferBase??0,t=n.data.bufferConstants,r=this.#s.mode==="sab"?this.#h.buffer:null;this.#u.initSharedViews(r,q,t);this.#S=new V({mode:this.#s.mode,audioContext:this.#t,workletPort:this.#e.port});this.#S.initSharedViews(r,q,t);await this.#S.initialize();this.#S.startDriftTimer();this.#s.mode==="sab"&&(this.#T.update(r,q,t),this.#A=new J({sharedBuffer:r,ringBufferBase:q,
bufferConstants:t,getAudioContextTime:()=>this.#t?.currentTime??null,getNTPStartTime:()=>this.#S?.getNTPStartTime()??0}));this.#s.mode==="postMessage"&&n.data.initialSnapshot&&this.#u.updateSnapshot(n.data.initialSnapshot);b()}else d(Error(n.data.error||"AudioWorklet initialization failed"))};this.#e.port.addEventListener("message",l);this.#e.port.start()})}#Q(){this.#e.port.addEventListener("message",b=>{({data:b}=b);switch(b.type){case "error":console.error("[Worklet] Error:",b.error);this.#c.emit("error",
Error(b.error));break;case "version":this.#E=b.version;break;case "snapshot":b.buffer&&(this.#u.updateSnapshot(b.buffer),this.#z=b.snapshotsSent);break;case "debugRawBatch":this.#v?this.#v(b):this.#R.push(b)}})}#N(){let b=this.#i?.getPreschedulerMetrics();return this.#u.gatherMetrics({preschedulerMetrics:b,driftOffsetMs:0,audioContextState:this.#t?.state||"unknown",bufferPoolStats:this.#r?.getStats(),loadedSynthDefsCount:this.loadedSynthDefs?.size||0})}#C(){this.#U();this.#_=setInterval(()=>{if(this.#c.hasListeners("metrics")&&
!this.#B){this.#B=!0;try{let b=this.#N();this.#c.emit("metrics",b)}finally{this.#B=!1}}},this.mode==="postMessage"?1E3:this.#O)}#U(){this.#_&&(clearInterval(this.#_),this.#_=null)}#b(b="perform this operation"){if(!this.#f)throw Error(`SuperSonic not initialized. Call init() before attempting to ${b}.`);}#j(b){return b.includes("/")||b.includes("://")}#K(b){if(b instanceof Uint8Array)return b;if(b instanceof ArrayBuffer)return new Uint8Array(b);throw Error("oscData must be ArrayBuffer or Uint8Array");
}async #X(b){let d={metadata:!0,unpackSingleArgs:!1};try{let f=a.osc.decode(b,d),{packet:l,changed:n}=await this.#m.rewritePacket(f);return n?a.osc.encode(l):b}catch(f){throw console.error("[SuperSonic] Failed to prepare OSC packet:",f),f;}}}};
'use strict';var f;/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var aa=this||self;function t(a){var b=typeof a;return b!="object"?b:a?Array.isArray(a)?"array":b:"null"}function ba(a){return Object.prototype.hasOwnProperty.call(a,ca)&&a[ca]||(a[ca]=++da)}var ca="closure_uid_"+(Math.random()*1E9>>>0),da=0;function ea(a,b,c){return a.call.apply(a.bind,arguments)}
function fa(a,b,c){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ha(a,b,c){ha=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ea:fa;return ha.apply(null,arguments)}
function ia(a,b){function c(){}c.prototype=b.prototype;a.Oc=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.zb=function(d,e,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[e].apply(d,h)}};function ja(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,ja);else{const c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));b!==void 0&&(this.cause=b)}ia(ja,Error);ja.prototype.name="CustomError";function ka(){};function la(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b};function ma(){var a=aa.navigator;return a&&(a=a.userAgent)?a:""}function u(a){return ma().indexOf(a)!=-1};function na(a,b){a!=null&&this.append.apply(this,arguments)}f=na.prototype;f.Ma="";f.set=function(a){this.Ma=""+a};f.append=function(a,b,c){this.Ma+=String(a);if(b!=null)for(let d=1;d<arguments.length;d++)this.Ma+=arguments[d];return this};f.clear=function(){this.Ma=""};f.toString=function(){return this.Ma};var w={},oa=null,qa=!0,ra=!0,sa=null;function ta(){qa=!1;oa=function(){var a=arguments,b=console.log,c=b.apply,d=console;{const e=a.length;if(e>0){const g=Array(e);for(let h=0;h<e;h++)g[h]=a[h];a=g}else a=[]}return c.call(b,d,a)}}function y(a){return a!=null&&a!==!1}function ua(a){return a instanceof Array}function va(a){return a==null?!0:a===!1?!0:!1}function z(a,b){return a[t(b==null?null:b)]?!0:a._?!0:!1}
function B(a,b){var c=b==null?null:b.constructor;c=y(y(c)?c.sc:c)?c.Qb:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function wa(a){var b=a.Qb;return y(b)?b:C(a)}var xa=typeof Symbol!=="undefined"&&t(Symbol)==="function"?Symbol.iterator:"@@iterator";function ya(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function za(a){return t(a)==="symbol"||typeof Symbol!=="undefined"&&a instanceof Symbol}function Aa(){}
function Ba(a){if(a!=null&&a.Y!=null)a=a.Y(a);else{var b=Ba[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Ba._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("ICounted.-count",a);}return a}function Da(a,b){if(a!=null&&a.fa!=null)a=a.fa(a,b);else{var c=Da[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=Da._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("ICollection.-conj",a);}return a}function Ea(){}
var Fa=function(){function a(d,e,g){var h=D[t(d==null?null:d)];if(h!=null)return h.u?h.u(d,e,g):h.call(null,d,e,g);h=D._;if(h!=null)return h.u?h.u(d,e,g):h.call(null,d,e,g);throw B("IIndexed.-nth",d);}function b(d,e){var g=D[t(d==null?null:d)];if(g!=null)return g.l?g.l(d,e):g.call(null,d,e);g=D._;if(g!=null)return g.l?g.l(d,e):g.call(null,d,e);throw B("IIndexed.-nth",d);}var c=null;c=function(d,e,g){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,g)}throw Error("Invalid arity: "+
arguments.length);};c.l=b;c.u=a;return c}(),D=function D(a){switch(arguments.length){case 2:return D.l(arguments[0],arguments[1]);case 3:return D.u(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};D.l=function(a,b){return a!=null&&a.na!=null?a.na(a,b):Fa(a,b)};D.u=function(a,b,c){return a!=null&&a.ua!=null?a.ua(a,b,c):Fa(a,b,c)};D.U=3;
function E(a){if(a!=null&&a.ha!=null)a=a.ha(a);else{var b=E[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=E._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("ISeq.-first",a);}return a}function Ga(a){if(a!=null&&a.ma!=null)a=a.ma(a);else{var b=Ga[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Ga._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("ISeq.-rest",a);}return a}function Ha(){}function Ia(){}
var Ka=function(){function a(d,e,g){var h=Ja[t(d==null?null:d)];if(h!=null)return h.u?h.u(d,e,g):h.call(null,d,e,g);h=Ja._;if(h!=null)return h.u?h.u(d,e,g):h.call(null,d,e,g);throw B("ILookup.-lookup",d);}function b(d,e){var g=Ja[t(d==null?null:d)];if(g!=null)return g.l?g.l(d,e):g.call(null,d,e);g=Ja._;if(g!=null)return g.l?g.l(d,e):g.call(null,d,e);throw B("ILookup.-lookup",d);}var c=null;c=function(d,e,g){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,g)}throw Error("Invalid arity: "+
arguments.length);};c.l=b;c.u=a;return c}(),Ja=function Ja(a){switch(arguments.length){case 2:return Ja.l(arguments[0],arguments[1]);case 3:return Ja.u(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};Ja.l=function(a,b){return a!=null&&a.va!=null?a.va(a,b):Ka(a,b)};Ja.u=function(a,b,c){return a!=null&&a.da!=null?a.da(a,b,c):Ka(a,b,c)};Ja.U=3;function La(){}
function Ma(a,b){if(a!=null&&a.ib!=null)a=a.ib(a,b);else{var c=Ma[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=Ma._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("IAssociative.-contains-key?",a);}return a}function Na(a,b,c){if(a!=null&&a.Ia!=null)a=a.Ia(a,b,c);else{var d=Na[t(a==null?null:a)];if(d!=null)a=d.u?d.u(a,b,c):d.call(null,a,b,c);else if(d=Na._,d!=null)a=d.u?d.u(a,b,c):d.call(null,a,b,c);else throw B("IAssociative.-assoc",a);}return a}function Oa(){}
function Pa(a,b){if(a!=null&&a.Ob!=null)a=a.Ob(a,b);else{var c=Pa[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=Pa._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("IMap.-dissoc",a);}return a}function Qa(a){if(a!=null&&a.hc!=null)a=a.key;else{var b=Qa[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Qa._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IMapEntry.-key",a);}return a}
function Ra(a){if(a!=null&&a.ic!=null)a=a.H;else{var b=Ra[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Ra._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IMapEntry.-val",a);}return a}function Sa(){}function Ta(a){if(a!=null&&a.Mb!=null)a=a.Mb(a);else{var b=Ta[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Ta._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IDeref.-deref",a);}return a}function Ua(){}
function Va(a){if(a!=null&&a.ba!=null)a=a.ba(a);else{var b=Va[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Va._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IMeta.-meta",a);}return a}function Wa(a,b){if(a!=null&&a.ca!=null)a=a.ca(a,b);else{var c=Wa[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=Wa._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("IWithMeta.-with-meta",a);}return a}function Xa(){}
var Za=function(){function a(d,e,g){var h=Ya[t(d==null?null:d)];if(h!=null)return h.u?h.u(d,e,g):h.call(null,d,e,g);h=Ya._;if(h!=null)return h.u?h.u(d,e,g):h.call(null,d,e,g);throw B("IReduce.-reduce",d);}function b(d,e){var g=Ya[t(d==null?null:d)];if(g!=null)return g.l?g.l(d,e):g.call(null,d,e);g=Ya._;if(g!=null)return g.l?g.l(d,e):g.call(null,d,e);throw B("IReduce.-reduce",d);}var c=null;c=function(d,e,g){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,g)}throw Error("Invalid arity: "+
arguments.length);};c.l=b;c.u=a;return c}(),Ya=function Ya(a){switch(arguments.length){case 2:return Ya.l(arguments[0],arguments[1]);case 3:return Ya.u(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};Ya.l=function(a,b){return a!=null&&a.ia!=null?a.ia(a,b):Za(a,b)};Ya.u=function(a,b,c){return a!=null&&a.ja!=null?a.ja(a,b,c):Za(a,b,c)};Ya.U=3;function $a(){}
function ab(a,b){if(a!=null&&a.Db!=null)a=a.Db(a,b,!0);else{var c=ab[t(a==null?null:a)];if(c!=null)a=c.u?c.u(a,b,!0):c.call(null,a,b,!0);else if(c=ab._,c!=null)a=c.u?c.u(a,b,!0):c.call(null,a,b,!0);else throw B("IKVReduce.-kv-reduce",a);}return a}function bb(a,b){if(a!=null&&a.Z!=null)a=a.Z(a,b);else{var c=bb[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=bb._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("IEquiv.-equiv",a);}return a}
function cb(a){if(a!=null&&a.aa!=null)a=a.aa(a);else{var b=cb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=cb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IHash.-hash",a);}return a}function db(){}function eb(a){if(a!=null&&a.W!=null)a=a.W(a);else{var b=eb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=eb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("ISeqable.-seq",a);}return a}function fb(){}function gb(){}function hb(){}function ib(){}
function jb(a){if(a!=null&&a.Eb!=null)a=a.Eb(a);else{var b=jb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=jb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IReversible.-rseq",a);}return a}function F(a,b){if(a!=null&&a.Yb!=null)a=a.Yb(a,b);else{var c=F[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=F._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("IWriter.-write",a);}return a}function kb(){}
function lb(a,b,c){if(a!=null&&a.$!=null)a=a.$(a,b,c);else{var d=lb[t(a==null?null:a)];if(d!=null)a=d.u?d.u(a,b,c):d.call(null,a,b,c);else if(d=lb._,d!=null)a=d.u?d.u(a,b,c):d.call(null,a,b,c);else throw B("IPrintWithWriter.-pr-writer",a);}return a}function mb(a){if(a!=null&&a.ob!=null)a=a.ob(a);else{var b=mb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=mb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IEditableCollection.-as-transient",a);}return a}
function nb(a,b){if(a!=null&&a.rb!=null)a=a.rb(a,b);else{var c=nb[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=nb._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("ITransientCollection.-conj!",a);}return a}function ob(a){if(a!=null&&a.Fb!=null)a=a.Fb(a);else{var b=ob[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=ob._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("ITransientCollection.-persistent!",a);}return a}
function pb(a,b,c){if(a!=null&&a.jb!=null)a=a.jb(a,b,c);else{var d=pb[t(a==null?null:a)];if(d!=null)a=d.u?d.u(a,b,c):d.call(null,a,b,c);else if(d=pb._,d!=null)a=d.u?d.u(a,b,c):d.call(null,a,b,c);else throw B("ITransientAssociative.-assoc!",a);}return a}function qb(a){if(a!=null&&a.Lb!=null)a=a.Lb(a);else{var b=qb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=qb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IChunk.-drop-first",a);}return a}
function rb(a){if(a!=null&&a.nb!=null)a=a.nb(a);else{var b=rb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=rb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IChunkedSeq.-chunked-first",a);}return a}function sb(a){if(a!=null&&a.Ja!=null)a=a.Ja(a);else{var b=sb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=sb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IChunkedSeq.-chunked-rest",a);}return a}
function tb(a,b){if(a!=null&&a.mc!=null)a=a.mc(a,b);else{var c=tb[t(a==null?null:a)];if(c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else if(c=tb._,c!=null)a=c.l?c.l(a,b):c.call(null,a,b);else throw B("IReset.-reset!",a);}return a}
var vb=function(){function a(g,h,k,l,m){var n=ub[t(g==null?null:g)];if(n!=null)return n.ra?n.ra(g,h,k,l,m):n.call(null,g,h,k,l,m);n=ub._;if(n!=null)return n.ra?n.ra(g,h,k,l,m):n.call(null,g,h,k,l,m);throw B("ISwap.-swap!",g);}function b(g,h,k,l){var m=ub[t(g==null?null:g)];if(m!=null)return m.P?m.P(g,h,k,l):m.call(null,g,h,k,l);m=ub._;if(m!=null)return m.P?m.P(g,h,k,l):m.call(null,g,h,k,l);throw B("ISwap.-swap!",g);}function c(g,h,k){var l=ub[t(g==null?null:g)];if(l!=null)return l.u?l.u(g,h,k):l.call(null,
g,h,k);l=ub._;if(l!=null)return l.u?l.u(g,h,k):l.call(null,g,h,k);throw B("ISwap.-swap!",g);}function d(g,h){var k=ub[t(g==null?null:g)];if(k!=null)return k.l?k.l(g,h):k.call(null,g,h);k=ub._;if(k!=null)return k.l?k.l(g,h):k.call(null,g,h);throw B("ISwap.-swap!",g);}var e=null;e=function(g,h,k,l,m){switch(arguments.length){case 2:return d.call(this,g,h);case 3:return c.call(this,g,h,k);case 4:return b.call(this,g,h,k,l);case 5:return a.call(this,g,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.l=d;e.u=c;e.P=b;e.ra=a;return e}(),ub=function ub(a){switch(arguments.length){case 2:return ub.l(arguments[0],arguments[1]);case 3:return ub.u(arguments[0],arguments[1],arguments[2]);case 4:return ub.P(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return ub.ra(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};ub.l=function(a,b){return a!=null&&a.oc!=null?a.oc(a,b):vb(a,b)};
ub.u=function(a,b,c){return a!=null&&a.pc!=null?a.pc(a,b,c):vb(a,b,c)};ub.P=function(a,b,c,d){return a!=null&&a.qc!=null?a.qc(a,b,c,d):vb(a,b,c,d)};ub.ra=function(a,b,c,d,e){return a!=null&&a.rc!=null?a.rc(a,b,c,d,e):vb(a,b,c,d,e)};ub.U=5;function wb(){}function xb(a){if(a!=null&&a.wa!=null)a=a.wa(a);else{var b=xb[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=xb._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("IIterable.-iterator",a);}return a}
function yb(a){this.yc=a;this.A=1073741824;this.G=0}yb.prototype.Yb=function(a,b){return this.yc.append(b)};function zb(a){var b=new na;a.$(null,new yb(b),null);return b.toString()}var Bb=typeof Math!=="undefined"&&typeof Math.imul!=="undefined"?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Cb(a){a=Bb(a|0,-862048943);return Bb(a<<15|a>>>-15,461845907)}
function Db(a,b){a=(a|0)^(b|0);return Bb(a<<13|a>>>-13,5)+-430675100|0}function Eb(a,b){a=(a|0)^b;a=Bb(a^a>>>16,-2048144789);a=Bb(a^a>>>13,-1028477387);return a^a>>>16}function Fb(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=Db(c,Cb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}b=void 0}return Eb((a.length&1)===1?b^Cb(a.charCodeAt(a.length-1)):b,Bb(2,a.length))}var Gb={},Hb=0;
function Ib(a){Hb>1024&&(Gb={},Hb=0);if(a==null)return 0;var b=Gb[a];if(typeof b==="number")a=b;else{a:if(a!=null)if(b=a.length,b>0){for(var c=0,d=0;;)if(c<b)d=Bb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}b=void 0}else b=0;else b=0;Gb[a]=b;Hb+=1;a=b}return a}
function Jb(a){if(a!=null&&(a.A&4194304||w===a.Fc))return a.aa(null)^0;if(typeof a==="number"){if(y(isFinite(a))){if(va(Number.isSafeInteger(a))){var b=new Float64Array(1);b[0]=a;b=b.buffer;a=(new DataView(b,0,4)).getInt32();b=(new DataView(b,4,4)).getInt32();a^=b}else a=Math.floor(a)%2147483647;return a}switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return a===!0?a=1231:a===!1?a=1237:typeof a==="string"?(a=Ib(a),a=a===0?a:Eb(Db(0,Cb(a)),4)):
a=a instanceof Date?a.valueOf()^0:a==null?0:cb(a)^0,a}function Kb(a,b){return a^b+2654435769+(a<<6)+(a>>2)}function Lb(a,b,c,d,e){this.wb=a;this.name=b;this.La=c;this.gb=d;this.Da=e;this.A=2154168321;this.G=4096}f=Lb.prototype;f.toString=function(){return this.La};f.Z=function(a,b){return b instanceof Lb?this.La===b.La:!1};
f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){return Mb?Mb(a,this):Nb.call(null,a,this)};f.l=function(a,b){return Ob?Ob(a,this,b):Nb.call(null,a,this,b)};f.ba=function(){return this.Da};f.ca=function(a,b){return new Lb(this.wb,this.name,this.La,this.gb,b)};
f.aa=function(){var a=this.gb;return a!=null?a:this.gb=a=Kb(Fb(this.name),Ib(this.wb))};f.$=function(a,b){return F(b,this.La)};var Pb=function Pb(a){switch(arguments.length){case 1:return Pb.j(arguments[0]);case 2:return Pb.l(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};
Pb.j=function(a){for(;;){if(a instanceof Lb)return a;if(typeof a==="string"){var b=a.indexOf("/");return b<1?Pb.l(null,a):Pb.l(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof H)a=a.xa;else throw Error("no conversion to symbol");}};Pb.l=function(a,b){var c=a!=null?[C(a),"/",C(b)].join(""):b;return new Lb(a,b,c,null,null)};Pb.U=2;function Qb(a){return a!=null?a.G&131072||w===a.Gc?!0:a.G?!1:z(wb,a):z(wb,a)}
function I(a){if(a==null)return null;if(a!=null&&(a.A&8388608||w===a.nc))return a.W(null);if(y(ua(a))||typeof a==="string")return a.length===0?null:new J(a,0,null);if(a!=null&&a[xa]!=null)return a=(a!==null&&xa in a?a[xa]:void 0).call(a),Rb.j?Rb.j(a):Rb.call(null,a);if(z(db,a))return eb(a);throw Error([C(a)," is not ISeqable"].join(""));}function M(a){if(a==null)return null;if(a!=null&&(a.A&64||w===a.qb))return a.ha(null);a=I(a);return a==null?null:E(a)}
function Sb(a){return a!=null?a!=null&&(a.A&64||w===a.qb)?a.ma(null):(a=I(a))?a.ma(null):N:N}function P(a){return a==null?null:a!=null&&(a.A&128||w===a.pb)?a.ea():I(Sb(a))}var Q=function Q(a){switch(arguments.length){case 1:return Q.j(arguments[0]);case 2:return Q.l(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=2<c.length?new J(c.slice(2),0,null):null;return Q.K(arguments[0],arguments[1],c)}};Q.j=function(){return!0};
Q.l=function(a,b){return a==null?b==null:a===b||bb(a,b)};Q.K=function(a,b,c){for(;;){if(Q.l(a,b))if(P(c)){a=b;b=M(c);c=P(c);continue}else return Q.l(b,M(c));else return!1;break}};Q.R=function(a){var b=M(a),c=P(a);a=M(c);c=P(c);return this.K(b,a,c)};Q.U=2;function Tb(a){this.s=a}Tb.prototype.next=function(){if(this.s!=null){var a=M(this.s);this.s=P(this.s);return{value:a,done:!1}}return{value:null,done:!0}};function Ub(a){return new Tb(I(a))}
function Vb(a,b){this.value=a;this.Zb=b;this.Kb=null;this.A=8388672;this.G=0}Vb.prototype.W=function(){return this};Vb.prototype.ha=function(){return this.value};Vb.prototype.ma=function(){this.Kb==null&&(this.Kb=Rb.j?Rb.j(this.Zb):Rb.call(null,this.Zb));return this.Kb};function Rb(a){var b=a.next();return y(b.done)?null:new Vb(b.value,a)}function Wb(a){var b=0,c=1;for(a=I(a);;)if(a!=null)b+=1,c=Bb(31,c)+Jb(M(a))|0,a=P(a);else return Eb(Db(0,Cb(c)),b)}var Xb=Eb(Db(0,Cb(1)),0);
function Yb(a){var b=0,c=0;for(a=I(a);;)if(a!=null)b+=1,c=c+Jb(M(a))|0,a=P(a);else return Eb(Db(0,Cb(c)),b)}var Zb=Eb(Db(0,Cb(0)),0);Aa["null"]=!0;Ba["null"]=function(){return 0};Date.prototype.Z=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};bb.number=function(a,b){return a===b};Ua["function"]=!0;Va["function"]=function(){return null};cb._=function(a){return a===Object.getPrototypeOf(Object.getPrototypeOf(Function))?0:ba(a)};cb.symbol=function(a){return Jb(a.toString())};
function $b(a){return a+1}function ac(a){this.H=a;this.A=32768;this.G=0}ac.prototype.Mb=function(){return this.H};function R(a){return a instanceof ac}function bc(a){return Ta(a)}function cc(a,b){var c=a.Y(null);if(c===0)return b.J?b.J():b.call(null);for(var d=a.na(null,0),e=1;;)if(e<c){var g=a.na(null,e);d=b.l?b.l(d,g):b.call(null,d,g);if(R(d))return Ta(d);e+=1}else return d}
function dc(a,b){var c=a.length;if(a.length===0)return b.J?b.J():b.call(null);for(var d=a[0],e=1;;)if(e<c){var g=a[e];d=b.l?b.l(d,g):b.call(null,d,g);if(R(d))return Ta(d);e+=1}else return d}function ec(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var g=a[c];e=b.l?b.l(e,g):b.call(null,e,g);if(R(e))return Ta(e);c+=1}else return e}function fc(a,b,c,d){for(var e=a.length;;)if(d<e){var g=a[d];c=b.l?b.l(c,g):b.call(null,c,g);if(R(c))return Ta(c);d+=1}else return c}
function gc(a){return a!=null?a.A&2||w===a.Vb?!0:a.A?!1:z(Aa,a):z(Aa,a)}function hc(a){return a!=null?a.A&16||w===a.Wb?!0:a.A?!1:z(Ea,a):z(Ea,a)}function S(a,b,c){var d=T.j?T.j(a):T.call(null,a);if(c>=d)return-1;!(c>0)&&c<0&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(Q.l(ic?ic(a,c):jc.call(null,a,c),b))return c;c+=1}else return-1}
function U(a,b,c){var d=T.j?T.j(a):T.call(null,a);if(d===0)return-1;c>0?(--d,c=d<c?d:c):c=c<0?d+c:c;for(;;)if(c>=0){if(Q.l(ic?ic(a,c):jc.call(null,a,c),b))return c;--c}else return-1}function kc(a,b){this.o=a;this.i=b}kc.prototype.sa=function(){return this.i<this.o.length};kc.prototype.next=function(){var a=this.o[this.i];this.i+=1;return a};function J(a,b,c){this.o=a;this.i=b;this.B=c;this.A=166592766;this.G=401408}f=J.prototype;f.toString=function(){return zb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T.j?T.j(this):T.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.na=function(a,b){a=b+this.i;if(0<=a&&a<this.o.length)return this.o[a];throw Error("Index out of bounds");};f.ua=function(a,b,c){a=b+this.i;return 0<=a&&a<this.o.length?this.o[a]:c};
f.wa=function(){return new kc(this.o,this.i)};f.ba=function(){return this.B};f.ea=function(){return this.i+1<this.o.length?new J(this.o,this.i+1,null):null};f.Y=function(){var a=this.o.length-this.i;return 0>a?0:a};f.Eb=function(){var a=this.Y(null);return a>0?new lc(this,a-1,null):null};f.aa=function(){return Wb(this)};f.Z=function(a,b){return oc.l?oc.l(this,b):oc.call(null,this,b)};f.la=function(){return N};f.ia=function(a,b){return fc(this.o,b,this.o[this.i],this.i+1)};
f.ja=function(a,b,c){return fc(this.o,b,c,this.i)};f.ha=function(){return this.o[this.i]};f.ma=function(){return this.i+1<this.o.length?new J(this.o,this.i+1,null):N};f.W=function(){return this.i<this.o.length?this:null};f.ca=function(a,b){return b===this.B?this:new J(this.o,this.i,b)};f.fa=function(a,b){return V.l?V.l(b,this):V.call(null,b,this)};J.prototype[xa]=function(){return Ub(this)};function pc(a){return 0<a.length?new J(a,0,null):null}
function lc(a,b,c){this.Bb=a;this.i=b;this.B=c;this.A=32374990;this.G=8192}f=lc.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,this.Y(null))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){return this.i>0?new lc(this.Bb,this.i-1,null):null};f.Y=function(){return this.i+1};f.aa=function(){return Wb(this)};
f.Z=function(a,b){return oc.l?oc.l(this,b):oc.call(null,this,b)};f.la=function(){return N};f.ia=function(a,b){return qc?qc(b,this):rc.call(null,b,this)};f.ja=function(a,b,c){return sc?sc(b,c,this):rc.call(null,b,c,this)};f.ha=function(){return D(this.Bb,this.i)};f.ma=function(){return this.i>0?new lc(this.Bb,this.i-1,null):N};f.W=function(){return this};f.ca=function(a,b){return b===this.B?this:new lc(this.Bb,this.i,b)};f.fa=function(a,b){return V.l?V.l(b,this):V.call(null,b,this)};
lc.prototype[xa]=function(){return Ub(this)};function tc(a){return M(P(a))}bb._=function(a,b){return a===b};var uc=function uc(a){switch(arguments.length){case 0:return uc.J();case 1:return uc.j(arguments[0]);case 2:return uc.l(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=2<c.length?new J(c.slice(2),0,null):null;return uc.K(arguments[0],arguments[1],c)}};uc.J=function(){return vc};uc.j=function(a){return a};
uc.l=function(a,b){return a!=null?Da(a,b):new wc(null,b,null,1,null)};uc.K=function(a,b,c){for(;;)if(y(c))a=uc.l(a,b),b=M(c),c=P(c);else return uc.l(a,b)};uc.R=function(a){var b=M(a),c=P(a);a=M(c);c=P(c);return this.K(b,a,c)};uc.U=2;
function T(a){if(a!=null)if(a!=null&&(a.A&2||w===a.Vb))a=a.Y(null);else if(y(ua(a)))a=a.length;else if(typeof a==="string")a=a.length;else if(a!=null&&(a.A&8388608||w===a.nc))a:{a=I(a);for(var b=0;;){if(gc(a)){a=b+Ba(a);break a}a=P(a);b+=1}a=void 0}else a=Ba(a);else a=0;return a}function yc(a,b,c){for(;;){if(a==null)return c;if(b===0)return I(a)?M(a):c;if(hc(a))return D(a,b,c);if(I(a))a=P(a),--b;else return c}}
function jc(a){switch(arguments.length){case 2:return ic(arguments[0],arguments[1]);case 3:return W(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}
function ic(a,b){if(typeof b!=="number")throw Error("Index argument to nth must be a number");if(a==null)return a;if(a!=null&&(a.A&16||w===a.Wb))return a.na(null,b);if(y(ua(a))){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if(typeof a==="string"){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(a!=null&&(a.A&64||w===a.qb)||a!=null&&(a.A&16777216||w===a.Xb)){if(b<0)throw Error("Index out of bounds");a:{for(;;){if(a==null)throw Error("Index out of bounds");
if(b===0){if(I(a)){a=M(a);break a}throw Error("Index out of bounds");}if(hc(a)){a=D(a,b);break a}if(I(a))a=P(a),--b;else throw Error("Index out of bounds");}a=void 0}return a}if(z(Ea,a))return D(a,b);throw Error(["nth not supported on this type ",C(wa(a==null?null:a.constructor))].join(""));}
function W(a,b,c){if(typeof b!=="number")throw Error("Index argument to nth must be a number.");if(a==null)return c;if(a!=null&&(a.A&16||w===a.Wb))return a.ua(null,b,c);if(y(ua(a)))return-1<b&&b<a.length?a[b|0]:c;if(typeof a==="string")return-1<b&&b<a.length?a.charAt(b|0):c;if(a!=null&&(a.A&64||w===a.qb)||a!=null&&(a.A&16777216||w===a.Xb))return b<0?c:yc(a,b,c);if(z(Ea,a))return D(a,b,c);throw Error(["nth not supported on this type ",C(wa(a==null?null:a.constructor))].join(""));}
function Nb(a){switch(arguments.length){case 2:return Mb(arguments[0],arguments[1]);case 3:return Ob(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}function Mb(a,b){return a==null?null:a!=null&&(a.A&256||w===a.fc)?a.va(null,b):y(ua(a))?b!=null&&b<a.length?a[b|0]:null:typeof a==="string"?b!=null&&-1<b&&b<a.length?a.charAt(b|0):null:z(Ia,a)?Ja(a,b):null}
function Ob(a,b,c){return a!=null?a!=null&&(a.A&256||w===a.fc)?a.da(null,b,c):y(ua(a))?b!=null&&-1<b&&b<a.length?a[b|0]:c:typeof a==="string"?b!=null&&-1<b&&b<a.length?a.charAt(b|0):c:z(Ia,a)?Ja(a,b,c):c:c}var zc=function zc(a){switch(arguments.length){case 3:return zc.u(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=3<c.length?new J(c.slice(3),0,null):null;return zc.K(arguments[0],arguments[1],arguments[2],c)}};
zc.u=function(a,b,c){return a!=null&&(a.A&512||w===a.cc)?a.Ia(null,b,c):a!=null?Na(a,b,c):Ac([b,c])};zc.K=function(a,b,c,d){for(;;)if(a=zc.u(a,b,c),y(d))b=M(d),c=tc(d),d=P(P(d));else return a};zc.R=function(a){var b=M(a),c=P(a);a=M(c);var d=P(c);c=M(d);d=P(d);return this.K(b,a,c,d)};zc.U=3;
var Bc=function Bc(a){switch(arguments.length){case 1:return Bc.j(arguments[0]);case 2:return Bc.l(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=2<c.length?new J(c.slice(2),0,null):null;return Bc.K(arguments[0],arguments[1],c)}};Bc.j=function(a){return a};Bc.l=function(a,b){return a==null?null:Pa(a,b)};Bc.K=function(a,b,c){for(;;){if(a==null)return null;a=Bc.l(a,b);if(y(c))b=M(c),c=P(c);else return a}};
Bc.R=function(a){var b=M(a),c=P(a);a=M(c);c=P(c);return this.K(b,a,c)};Bc.U=2;function Cc(a,b){this.C=a;this.B=b;this.A=393217;this.G=0}f=Cc.prototype;f.ba=function(){return this.B};f.ca=function(a,b){return new Cc(this.C,b)};
f.call=function(a){switch(arguments.length-1){case 0:return this.J();case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);case 3:return this.u(arguments[1],arguments[2],arguments[3]);case 4:return this.P(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.$a(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.ab(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.bb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ta(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ua(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Wa(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ya(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.Nb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.J=function(){return this.C.J?this.C.J():this.C.call(null)};f.j=function(a){return this.C.j?this.C.j(a):this.C.call(null,a)};f.l=function(a,b){return this.C.l?this.C.l(a,b):this.C.call(null,a,b)};f.u=function(a,b,c){return this.C.u?this.C.u(a,b,c):this.C.call(null,a,b,c)};
f.P=function(a,b,c,d){return this.C.P?this.C.P(a,b,c,d):this.C.call(null,a,b,c,d)};f.ra=function(a,b,c,d,e){return this.C.ra?this.C.ra(a,b,c,d,e):this.C.call(null,a,b,c,d,e)};f.Za=function(a,b,c,d,e,g){return this.C.Za?this.C.Za(a,b,c,d,e,g):this.C.call(null,a,b,c,d,e,g)};f.$a=function(a,b,c,d,e,g,h){return this.C.$a?this.C.$a(a,b,c,d,e,g,h):this.C.call(null,a,b,c,d,e,g,h)};f.ab=function(a,b,c,d,e,g,h,k){return this.C.ab?this.C.ab(a,b,c,d,e,g,h,k):this.C.call(null,a,b,c,d,e,g,h,k)};
f.bb=function(a,b,c,d,e,g,h,k,l){return this.C.bb?this.C.bb(a,b,c,d,e,g,h,k,l):this.C.call(null,a,b,c,d,e,g,h,k,l)};f.Oa=function(a,b,c,d,e,g,h,k,l,m){return this.C.Oa?this.C.Oa(a,b,c,d,e,g,h,k,l,m):this.C.call(null,a,b,c,d,e,g,h,k,l,m)};f.Pa=function(a,b,c,d,e,g,h,k,l,m,n){return this.C.Pa?this.C.Pa(a,b,c,d,e,g,h,k,l,m,n):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n)};f.Qa=function(a,b,c,d,e,g,h,k,l,m,n,p){return this.C.Qa?this.C.Qa(a,b,c,d,e,g,h,k,l,m,n,p):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p)};
f.Ra=function(a,b,c,d,e,g,h,k,l,m,n,p,q){return this.C.Ra?this.C.Ra(a,b,c,d,e,g,h,k,l,m,n,p,q):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q)};f.Sa=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r){return this.C.Sa?this.C.Sa(a,b,c,d,e,g,h,k,l,m,n,p,q,r):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r)};f.Ta=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v){return this.C.Ta?this.C.Ta(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v)};
f.Ua=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x){return this.C.Ua?this.C.Ua(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x)};f.Va=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A){return this.C.Va?this.C.Va(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A)};f.Wa=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K){return this.C.Wa?this.C.Wa(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K)};
f.Xa=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O){return this.C.Xa?this.C.Xa(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O)};f.Ya=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X){return this.C.Ya?this.C.Ya(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X):this.C.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X)};
f.Nb=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X,pa){return Dc.Nb?Dc.Nb(this.C,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,new J([X,pa],0,null)):Dc.call(null,this.C,a,b,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X,pa)};function Ec(a,b){return typeof a==="function"?new Cc(a,b):a==null?null:Wa(a,b)}function Fc(a){var b=a!=null;return(b?a!=null?a.A&131072||w===a.jc||(a.A?0:z(Ua,a)):z(Ua,a):b)?Va(a):null}function Gc(a){return a==null?!0:(a!=null?a.A&2||w===a.Vb||(a.A?0:z(Aa,a)):z(Aa,a))?Ba(a)===0:va(I(a))}
function Hc(a){return a!=null?a.A&16777216||w===a.Xb?!0:a.A?!1:z(fb,a):z(fb,a)}function Ic(a){return a==null?!1:a!=null?a.A&1024||w===a.Ic?!0:a.A?!1:z(Oa,a):z(Oa,a)}function Jc(a){return a!=null?a.A&67108864||w===a.Kc?!0:a.A?!1:z(hb,a):z(hb,a)}function Kc(a){return a!=null?a.A&16384||w===a.Mc?!0:a.A?!1:z(Sa,a):z(Sa,a)}function Lc(a){return a!=null?a.G&512||w===a.Ec?!0:!1:!1}function Mc(a,b,c,d,e){for(;;){if(e===0)return c;c[d]=a[b];d+=1;--e;b+=1}}var Nc={};
function Oc(a){return a==null?!1:a===!1?!1:!0}function Pc(a){return typeof a==="number"&&va(isNaN(a))&&a!==Infinity&&parseFloat(a)===parseInt(a,10)}function Qc(a,b){return a!=null&&(a.A&512||w===a.cc)?a.ib(null,b):z(La,a)?Ma(a,b):Ob(a,b,Nc)===Nc?!1:!0}function rc(a){switch(arguments.length){case 2:return qc(arguments[0],arguments[1]);case 3:return sc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}
function qc(a,b){var c=I(b);return c?(b=M(c),c=P(c),Rc?Rc(a,b,c):Sc.call(null,a,b,c)):a.J?a.J():a.call(null)}function sc(a,b,c){for(c=I(c);;)if(c){var d=M(c);b=a.l?a.l(b,d):a.call(null,b,d);if(R(b))return Ta(b);c=P(c)}else return b}function Tc(a,b){a=xb(a);if(y(a.sa()))for(var c=a.next();;)if(a.sa()){var d=a.next();c=b.l?b.l(c,d):b.call(null,c,d);if(R(c))return Ta(c)}else return c;else return b.J?b.J():b.call(null)}
function Uc(a,b,c){for(a=xb(a);;)if(a.sa()){var d=a.next();c=b.l?b.l(c,d):b.call(null,c,d);if(R(c))return Ta(c)}else return c}function Sc(a){switch(arguments.length){case 2:var b=arguments[0],c=arguments[1];return c!=null&&(c.A&524288||w===c.lc)?c.ia(null,b):y(ua(c))?dc(c,b):typeof c==="string"?dc(c,b):z(Xa,c)?Ya(c,b):Qb(c)?Tc(c,b):qc(b,c);case 3:return Rc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}
function Rc(a,b,c){return c!=null&&(c.A&524288||w===c.lc)?c.ja(null,a,b):y(ua(c))?ec(c,a,b):typeof c==="string"?ec(c,a,b):z(Xa,c)?Ya(c,a,b):Qb(c)?Uc(c,a,b):sc(a,b,c)}function Vc(a,b){return(b!=null?b.A&1048576||w===b.ec||(b.A?0:z($a,b)):z($a,b))?ab(b,a):Rc(function(c,d){var e=Qa(d);d=Ra(d);return a.u?a.u(c,e,d):a.call(null,c,e,d)},!0,b)}function Wc(a){return a}function Xc(a,b,c,d){a=a.j?a.j(b):a.call(null,b);c=Rc(a,c,d);return a.j?a.j(c):a.call(null,c)}
function Yc(a){a=(a-a%2)/2;return a>=0?Math.floor(a):Math.ceil(a)}function Zc(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return(a+(a>>4)&252645135)*16843009>>24}
var C=function C(a,b){if(a==null)return"";if(void 0===b)return[a].join("");for(var d=new na,e=arguments,g=e.length,h=0;;)if(h<g)d.append(C(e[h])),h+=1;else return d.toString()},G=function G(a){switch(arguments.length){case 0:return G.J();case 1:return G.j(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new J(c.slice(1),0,null):null;return G.K(arguments[0],c)}};G.J=function(){return""};G.j=function(a){return a==null?"":a.toString()};
G.K=function(a,b){for(a=new na(""+G.j(a));;)if(y(b))a=a.append(""+G.j(M(b))),b=P(b);else return a.toString()};G.R=function(a){var b=M(a);a=P(a);return this.K(b,a)};G.U=1;function oc(a,b){if(Hc(b))if(gc(a)&&gc(b)&&T(a)!==T(b))a=!1;else a:{a=I(a);for(b=I(b);;){if(a==null){a=b==null;break a}if(b!=null&&Q.l(M(a),M(b)))a=P(a),b=P(b);else{a=!1;break a}}a=void 0}else a=null;return Oc(a)}function wc(a,b,c,d,e){this.B=a;this.first=b;this.Ga=c;this.count=d;this.D=e;this.A=65937646;this.G=8192}f=wc.prototype;
f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){return this.count===1?null:this.Ga};f.Y=function(){return this.count};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};
f.la=function(){return Wa(N,this.B)};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return this.first};f.ma=function(){return this.count===1?N:this.Ga};f.W=function(){return this};f.ca=function(a,b){return b===this.B?this:new wc(b,this.first,this.Ga,this.count,this.D)};f.fa=function(a,b){return new wc(this.B,b,this,this.count+1,null)};wc.prototype[xa]=function(){return Ub(this)};function $c(a){this.B=a;this.A=65937614;this.G=8192}f=$c.prototype;
f.toString=function(){return"()"};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){return null};f.Y=function(){return 0};f.aa=function(){return Xb};f.Z=function(a,b){return(b!=null?b.A&33554432||w===b.Hc||(b.A?0:z(gb,b)):z(gb,b))||Hc(b)?I(b)==null:!1};f.la=function(){return this};
f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return null};f.ma=function(){return N};f.W=function(){return null};f.ca=function(a,b){return b===this.B?this:new $c(b)};f.fa=function(a,b){return new wc(this.B,b,null,1,null)};var N=new $c(null);$c.prototype[xa]=function(){return Ub(this)};function ad(a){return(a!=null?a.A&134217728||w===a.Lc||(a.A?0:z(ib,a)):z(ib,a))?(a=jb(a))?a:N:Rc(uc,N,a)}
function bd(a,b,c,d){this.B=a;this.first=b;this.Ga=c;this.D=d;this.A=65929452;this.G=8192}f=bd.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){return this.Ga==null?null:I(this.Ga)};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};
f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return this.first};f.ma=function(){return this.Ga==null?N:this.Ga};f.W=function(){return this};f.ca=function(a,b){return b===this.B?this:new bd(b,this.first,this.Ga,this.D)};f.fa=function(a,b){return new bd(null,b,this,null)};bd.prototype[xa]=function(){return Ub(this)};function V(a,b){return b==null?new wc(null,a,null,1,null):b!=null&&(b.A&64||w===b.qb)?new bd(null,a,b,null):new bd(null,a,I(b),null)}
function H(a,b,c,d){this.wb=a;this.name=b;this.xa=c;this.gb=d;this.A=2153775105;this.G=4096}f=H.prototype;f.toString=function(){return[":",C(this.xa)].join("")};f.Z=function(a,b){return b instanceof H?this.xa===b.xa:!1};f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};
f.j=function(a){return Mb(a,this)};f.l=function(a,b){return Ob(a,this,b)};f.aa=function(){var a=this.gb;return a!=null?a:this.gb=a=Kb(Fb(this.name),Ib(this.wb))+2654435769|0};f.$=function(a,b){return F(b,[":",C(this.xa)].join(""))};function cd(a){if(a!=null&&(a.G&4096||w===a.kc))return a.wb;throw Error(["Doesn't support namespace: ",C(a)].join(""));}
var dd=function dd(a){switch(arguments.length){case 1:return dd.j(arguments[0]);case 2:return dd.l(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};dd.j=function(a){if(a instanceof H)return a;if(a instanceof Lb)return new H(cd(a),ed.j?ed.j(a):ed.call(null,a),a.La,null);if(Q.l("/",a))return new H(null,a,a,null);if(typeof a==="string"){var b=a.split("/");return b.length===2?new H(b[0],b[1],a,null):new H(null,b[0],a,null)}return null};
dd.l=function(a,b){a=a instanceof H?ed.j?ed.j(a):ed.call(null,a):a instanceof Lb?ed.j?ed.j(a):ed.call(null,a):a;b=b instanceof H?ed.j?ed.j(b):ed.call(null,b):b instanceof Lb?ed.j?ed.j(b):ed.call(null,b):b;return new H(a,b,[y(a)?[C(a),"/"].join(""):null,C(b)].join(""),null)};dd.U=2;function fd(a,b,c){this.B=a;this.Fa=b;this.s=null;this.D=c;this.A=32374988;this.G=1}f=fd.prototype;f.toString=function(){return zb(this)};
function gd(a){a.Fa!=null&&(a.s=a.Fa.J?a.Fa.J():a.Fa.call(null),a.Fa=null);return a.s}f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){this.W(null);return this.s==null?null:P(this.s)};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};
f.la=function(){return Wa(N,this.B)};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){this.W(null);return this.s==null?null:M(this.s)};f.ma=function(){this.W(null);return this.s!=null?Sb(this.s):N};f.W=function(){gd(this);if(this.s==null)return null;for(var a=this.s;;)if(a instanceof fd)a=gd(a);else return this.s=a,I(this.s)};f.ca=function(a,b){var c=this;return b===this.B?c:new fd(b,function(){return c.W(null)},this.D)};
f.fa=function(a,b){return V(b,this)};fd.prototype[xa]=function(){return Ub(this)};function hd(a){this.buf=a;this.end=0;this.A=2;this.G=0}hd.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};hd.prototype.X=function(){var a=new id(this.buf,0,this.end);this.buf=null;return a};hd.prototype.Y=function(){return this.end};function jd(a){return new hd(Array(a))}function id(a,b,c){this.o=a;this.ka=b;this.end=c;this.A=524306;this.G=0}f=id.prototype;f.Y=function(){return this.end-this.ka};
f.na=function(a,b){return this.o[this.ka+b]};f.ua=function(a,b,c){return b>=0&&b<this.end-this.ka?this.o[this.ka+b]:c};f.Lb=function(){if(this.ka===this.end)throw Error("-drop-first of empty chunk");return new id(this.o,this.ka+1,this.end)};f.ia=function(a,b){return fc(this.o,b,this.o[this.ka],this.ka+1)};f.ja=function(a,b,c){return fc(this.o,b,c,this.ka)};function kd(a,b,c,d){this.X=a;this.Aa=b;this.B=c;this.D=d;this.A=31850732;this.G=1536}f=kd.prototype;f.toString=function(){return zb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){return Ba(this.X)>1?new kd(qb(this.X),this.Aa,null,null):this.Aa==null?null:eb(this.Aa)};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};
f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ha=function(){return D(this.X,0)};f.ma=function(){return Ba(this.X)>1?new kd(qb(this.X),this.Aa,null,null):this.Aa==null?N:this.Aa};f.W=function(){return this};f.nb=function(){return this.X};f.Ja=function(){return this.Aa==null?N:this.Aa};f.ca=function(a,b){return b===this.B?this:new kd(this.X,this.Aa,b,this.D)};f.fa=function(a,b){return V(b,this)};f.Cb=function(){return this.Aa==null?null:this.Aa};kd.prototype[xa]=function(){return Ub(this)};
function ld(a,b){return Ba(a)===0?b:new kd(a,b,null,null)}function md(a,b){a.add(b)}function nd(a,b){if(gc(b))return T(b);var c=0;for(b=I(b);;)if(b!=null&&c<a)c+=1,b=P(b);else return c}
var qd=function qd(a){if(a==null)return null;var c=P(a);return c==null?I(M(a)):V(M(a),qd.j?qd.j(c):qd.call(null,c))},rd=function rd(a){switch(arguments.length){case 0:return rd.J();case 1:return rd.j(arguments[0]);case 2:return rd.l(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=2<c.length?new J(c.slice(2),0,null):null;return rd.K(arguments[0],arguments[1],c)}};rd.J=function(){return new fd(null,function(){return null},null)};
rd.j=function(a){return new fd(null,function(){return a},null)};rd.l=function(a,b){return new fd(null,function(){var c=I(a);return c?Lc(c)?ld(rb(c),rd.l(sb(c),b)):V(M(c),rd.l(Sb(c),b)):b},null)};rd.K=function(a,b,c){return function h(e,g){return new fd(null,function(){var k=I(e);return k?Lc(k)?ld(rb(k),h(sb(k),g)):V(M(k),h(Sb(k),g)):y(g)?h(M(g),P(g)):null},null)}(rd.l(a,b),c)};rd.R=function(a){var b=M(a),c=P(a);a=M(c);c=P(c);return this.K(b,a,c)};rd.U=2;function sd(a){return ob(a)}
function td(a,b,c){var d=I(c);if(b===0)return a.J?a.J():a.call(null);c=E(d);var e=Ga(d);if(b===1)return a.j?a.j(c):a.call(null,c);d=E(e);var g=Ga(e);if(b===2)return a.l?a.l(c,d):a.call(null,c,d);e=E(g);var h=Ga(g);if(b===3)return a.u?a.u(c,d,e):a.call(null,c,d,e);g=E(h);var k=Ga(h);if(b===4)return a.P?a.P(c,d,e,g):a.call(null,c,d,e,g);h=E(k);var l=Ga(k);if(b===5)return a.ra?a.ra(c,d,e,g,h):a.call(null,c,d,e,g,h);k=E(l);var m=Ga(l);if(b===6)return a.Za?a.Za(c,d,e,g,h,k):a.call(null,c,d,e,g,h,k);l=
E(m);var n=Ga(m);if(b===7)return a.$a?a.$a(c,d,e,g,h,k,l):a.call(null,c,d,e,g,h,k,l);m=E(n);var p=Ga(n);if(b===8)return a.ab?a.ab(c,d,e,g,h,k,l,m):a.call(null,c,d,e,g,h,k,l,m);n=E(p);var q=Ga(p);if(b===9)return a.bb?a.bb(c,d,e,g,h,k,l,m,n):a.call(null,c,d,e,g,h,k,l,m,n);p=E(q);var r=Ga(q);if(b===10)return a.Oa?a.Oa(c,d,e,g,h,k,l,m,n,p):a.call(null,c,d,e,g,h,k,l,m,n,p);q=E(r);var v=Ga(r);if(b===11)return a.Pa?a.Pa(c,d,e,g,h,k,l,m,n,p,q):a.call(null,c,d,e,g,h,k,l,m,n,p,q);r=E(v);var x=Ga(v);if(b===
12)return a.Qa?a.Qa(c,d,e,g,h,k,l,m,n,p,q,r):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r);v=E(x);var A=Ga(x);if(b===13)return a.Ra?a.Ra(c,d,e,g,h,k,l,m,n,p,q,r,v):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v);x=E(A);var K=Ga(A);if(b===14)return a.Sa?a.Sa(c,d,e,g,h,k,l,m,n,p,q,r,v,x):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x);A=E(K);var O=Ga(K);if(b===15)return a.Ta?a.Ta(c,d,e,g,h,k,l,m,n,p,q,r,v,x,A):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A);K=E(O);var X=Ga(O);if(b===16)return a.Ua?a.Ua(c,d,e,g,h,k,l,m,n,p,q,r,v,
x,A,K):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K);O=E(X);var pa=Ga(X);if(b===17)return a.Va?a.Va(c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O);X=E(pa);var Ca=Ga(pa);if(b===18)return a.Wa?a.Wa(c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X);pa=E(Ca);Ca=Ga(Ca);if(b===19)return a.Xa?a.Xa(c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X,pa):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X,pa);var xc=E(Ca);Ga(Ca);if(b===20)return a.Ya?a.Ya(c,
d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X,pa,xc):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,v,x,A,K,O,X,pa,xc);throw Error("Only up to 20 arguments supported on functions");}function ud(a){return a!=null&&(a.A&128||w===a.pb)?a.ea():I(Sb(a))}function vd(a,b,c){return c==null?a.j?a.j(b):a.call(a,b):wd(a,b,E(c),ud(c))}function wd(a,b,c,d){return d==null?a.l?a.l(b,c):a.call(a,b,c):xd(a,b,c,E(d),ud(d))}function xd(a,b,c,d,e){return e==null?a.u?a.u(b,c,d):a.call(a,b,c,d):yd(a,b,c,d,E(e),ud(e))}
function yd(a,b,c,d,e,g){if(g==null)return a.P?a.P(b,c,d,e):a.call(a,b,c,d,e);var h=E(g),k=P(g);if(k==null)return a.ra?a.ra(b,c,d,e,h):a.call(a,b,c,d,e,h);g=E(k);var l=P(k);if(l==null)return a.Za?a.Za(b,c,d,e,h,g):a.call(a,b,c,d,e,h,g);k=E(l);var m=P(l);if(m==null)return a.$a?a.$a(b,c,d,e,h,g,k):a.call(a,b,c,d,e,h,g,k);l=E(m);var n=P(m);if(n==null)return a.ab?a.ab(b,c,d,e,h,g,k,l):a.call(a,b,c,d,e,h,g,k,l);m=E(n);var p=P(n);if(p==null)return a.bb?a.bb(b,c,d,e,h,g,k,l,m):a.call(a,b,c,d,e,h,g,k,l,m);
n=E(p);var q=P(p);if(q==null)return a.Oa?a.Oa(b,c,d,e,h,g,k,l,m,n):a.call(a,b,c,d,e,h,g,k,l,m,n);p=E(q);var r=P(q);if(r==null)return a.Pa?a.Pa(b,c,d,e,h,g,k,l,m,n,p):a.call(a,b,c,d,e,h,g,k,l,m,n,p);q=E(r);var v=P(r);if(v==null)return a.Qa?a.Qa(b,c,d,e,h,g,k,l,m,n,p,q):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q);r=E(v);var x=P(v);if(x==null)return a.Ra?a.Ra(b,c,d,e,h,g,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r);v=E(x);var A=P(x);if(A==null)return a.Sa?a.Sa(b,c,d,e,h,g,k,l,m,n,p,q,r,v):a.call(a,b,c,d,
e,h,g,k,l,m,n,p,q,r,v);x=E(A);var K=P(A);if(K==null)return a.Ta?a.Ta(b,c,d,e,h,g,k,l,m,n,p,q,r,v,x):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,v,x);A=E(K);var O=P(K);if(O==null)return a.Ua?a.Ua(b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A);K=E(O);var X=P(O);if(X==null)return a.Va?a.Va(b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K);O=E(X);var pa=P(X);if(pa==null)return a.Wa?a.Wa(b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K,O):a.call(a,b,c,d,e,h,g,k,l,m,n,p,
q,r,v,x,A,K,O);X=E(pa);var Ca=P(pa);if(Ca==null)return a.Xa?a.Xa(b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K,O,X):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K,O,X);pa=E(Ca);Ca=P(Ca);if(Ca==null)return a.Ya?a.Ya(b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K,O,X,pa):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K,O,X,pa);b=[b,c,d,e,h,g,k,l,m,n,p,q,r,v,x,A,K,O,X,pa];for(c=Ca;;)if(c)b.push(E(c)),c=P(c);else break;return a.apply(a,b)}
function Dc(a){switch(arguments.length){case 2:return zd(arguments[0],arguments[1]);case 3:return Ad(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.R?(c=V(c,V(d,e)),d=b.U,e=2+nd(d-1,e),b=e<=d?td(b,e,c):b.R(c)):b=wd(b,c,d,I(e));return b;case 5:return Bd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;e=5<b.length?new J(b.slice(5),
0,null):null;b=arguments[0];c=arguments[1];d=arguments[2];var g=arguments[3],h=arguments[4];b.R?(e=qd(e),c=V(c,V(d,V(g,V(h,e)))),d=b.U,e=4+nd(d-3,e),b=e<=d?td(b,e,c):b.R(c)):b=yd(b,c,d,g,h,qd(e));return b}}function zd(a,b){if(a.R){var c=a.U,d=nd(c+1,b);return d<=c?td(a,d,b):a.R(b)}b=I(b);return b==null?a.J?a.J():a.call(a):vd(a,E(b),ud(b))}function Ad(a,b,c){if(a.R){b=V(b,c);var d=a.U;c=nd(d,c)+1;return c<=d?td(a,c,b):a.R(b)}return vd(a,b,I(c))}
function Bd(a,b,c,d,e){return a.R?(b=V(b,V(c,V(d,e))),c=a.U,e=3+nd(c-2,e),e<=c?td(a,e,b):a.R(b)):xd(a,b,c,d,I(e))}function Cd(a){if(a!=null&&(a.A&64||w===a.qb))if(P(a)){a:{var b=[];for(a=I(a);;)if(a!=null)b.push(M(a)),a=P(a);else break a;b=void 0}b=Ac(b)}else b=I(a)?M(a):Dd;else b=a;return b}function Ed(a){this.wc=a;this.A=393216;this.G=0}f=Ed.prototype;f.ca=function(a,b){return new Ed(b)};f.ba=function(){return this.wc};f.sa=function(){return!1};f.next=function(){return Error("No such element")};
f.remove=function(){return Error("Unsupported operation")};function Fd(a,b){for(;;){if(I(b)==null)return!0;var c=M(b);c=a.j?a.j(c):a.call(null,c);if(y(c))b=P(b);else return!1}}
var Gd=function Gd(a){switch(arguments.length){case 0:return Gd.J();case 1:return Gd.j(arguments[0]);case 2:return Gd.l(arguments[0],arguments[1]);case 3:return Gd.u(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=3<c.length?new J(c.slice(3),0,null):null;return Gd.K(arguments[0],arguments[1],arguments[2],c)}};Gd.J=function(){return Wc};Gd.j=function(a){return a};
Gd.l=function(a,b){return function(){function c(l,m,n){l=b.u?b.u(l,m,n):b.call(null,l,m,n);return a.j?a.j(l):a.call(null,l)}function d(l,m){l=b.l?b.l(l,m):b.call(null,l,m);return a.j?a.j(l):a.call(null,l)}function e(l){l=b.j?b.j(l):b.call(null,l);return a.j?a.j(l):a.call(null,l)}function g(){var l=b.J?b.J():b.call(null);return a.j?a.j(l):a.call(null,l)}var h=null,k=function(){function l(n,p,q,r){var v=null;if(arguments.length>3){v=0;for(var x=Array(arguments.length-3);v<x.length;)x[v]=arguments[v+
3],++v;v=new J(x,0,null)}return m.call(this,n,p,q,v)}function m(n,p,q,r){n=Bd(b,n,p,q,r);return a.j?a.j(n):a.call(null,n)}l.U=3;l.R=function(n){var p=M(n);n=P(n);var q=M(n);n=P(n);var r=M(n);n=Sb(n);return m(p,q,r,n)};l.K=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return g.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var q=null;if(arguments.length>3){q=0;for(var r=Array(arguments.length-3);q<r.length;)r[q]=arguments[q+
3],++q;q=new J(r,0,null)}return k.K(l,m,n,q)}throw Error("Invalid arity: "+arguments.length);};h.U=3;h.R=k.R;h.J=g;h.j=e;h.l=d;h.u=c;h.K=k.K;return h}()};
Gd.u=function(a,b,c){return function(){function d(m,n,p){m=c.u?c.u(m,n,p):c.call(null,m,n,p);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}function e(m,n){m=c.l?c.l(m,n):c.call(null,m,n);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}function g(m){m=c.j?c.j(m):c.call(null,m);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}function h(){var m=c.J?c.J():c.call(null);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}var k=null,l=function(){function m(p,
q,r,v){var x=null;if(arguments.length>3){x=0;for(var A=Array(arguments.length-3);x<A.length;)A[x]=arguments[x+3],++x;x=new J(A,0,null)}return n.call(this,p,q,r,x)}function n(p,q,r,v){p=Bd(c,p,q,r,v);p=b.j?b.j(p):b.call(null,p);return a.j?a.j(p):a.call(null,p)}m.U=3;m.R=function(p){var q=M(p);p=P(p);var r=M(p);p=P(p);var v=M(p);p=Sb(p);return n(q,r,v,p)};m.K=n;return m}();k=function(m,n,p,q){switch(arguments.length){case 0:return h.call(this);case 1:return g.call(this,m);case 2:return e.call(this,
m,n);case 3:return d.call(this,m,n,p);default:var r=null;if(arguments.length>3){r=0;for(var v=Array(arguments.length-3);r<v.length;)v[r]=arguments[r+3],++r;r=new J(v,0,null)}return l.K(m,n,p,r)}throw Error("Invalid arity: "+arguments.length);};k.U=3;k.R=l.R;k.J=h;k.j=g;k.l=e;k.u=d;k.K=l.K;return k}()};
Gd.K=function(a,b,c,d){var e=ad(V(a,V(b,V(c,d))));return function(){function g(k){var l=null;if(arguments.length>0){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new J(m,0,null)}return h.call(this,l)}function h(k){k=zd(M(e),k);for(var l=P(e);;)if(l){var m=M(l);k=m.j?m.j(k):m.call(null,k);l=P(l)}else return k}g.U=0;g.R=function(k){k=I(k);return h(k)};g.K=h;return g}()};Gd.R=function(a){var b=M(a),c=P(a);a=M(c);var d=P(c);c=M(d);d=P(d);return this.K(b,a,c,d)};Gd.U=3;
function Hd(a){this.state=a;this.bc=this.Dc=this.B=null;this.G=16386;this.A=6455296}Hd.prototype.Z=function(a,b){return this===b};Hd.prototype.Mb=function(){return this.state};Hd.prototype.ba=function(){return this.B};Hd.prototype.aa=function(){return ba(this)};
function Id(a,b){if(a instanceof Hd){var c=a.Dc;if(c!=null&&!y(c.j?c.j(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(a.bc!=null)a:for(var d=I(a.bc),e=null,g=0,h=0;;)if(h<g){var k=e.na(null,h),l=W(k,0,null);k=W(k,1,null);k.P?k.P(l,a,c,b):k.call(null,l,a,c,b);h+=1}else if(d=I(d))Lc(d)?(e=rb(d),d=sb(d),l=e,g=T(e),e=l):(e=M(d),l=W(e,0,null),k=W(e,1,null),k.P?k.P(l,a,c,b):k.call(null,l,a,c,b),d=P(d),e=null,g=0),h=0;else break a;return b}return tb(a,b)}
var Jd=function Jd(a){switch(arguments.length){case 2:return Jd.l(arguments[0],arguments[1]);case 3:return Jd.u(arguments[0],arguments[1],arguments[2]);case 4:return Jd.P(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=4<c.length?new J(c.slice(4),0,null):null;return Jd.K(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
Jd.l=function(a,b){if(a instanceof Hd){var c=a.state;b=b.j?b.j(c):b.call(null,c);a=Id(a,b)}else a=ub(a,b);return a};Jd.u=function(a,b,c){if(a instanceof Hd){var d=a.state;b=b.l?b.l(d,c):b.call(null,d,c);a=Id(a,b)}else a=ub(a,b,c);return a};Jd.P=function(a,b,c,d){if(a instanceof Hd){var e=a.state;b=b.u?b.u(e,c,d):b.call(null,e,c,d);a=Id(a,b)}else a=ub(a,b,c,d);return a};Jd.K=function(a,b,c,d,e){return a instanceof Hd?Id(a,Bd(b,a.state,c,d,e)):ub(a,b,c,d,e)};
Jd.R=function(a){var b=M(a),c=P(a);a=M(c);var d=P(c);c=M(d);var e=P(d);d=M(e);e=P(e);return this.K(b,a,c,d,e)};Jd.U=4;
var Kd=function Kd(a){switch(arguments.length){case 1:return Kd.j(arguments[0]);case 2:return Kd.l(arguments[0],arguments[1]);case 3:return Kd.u(arguments[0],arguments[1],arguments[2]);case 4:return Kd.P(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=4<c.length?new J(c.slice(4),0,null):null;return Kd.K(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
Kd.j=function(a){return function(b){return function(){function c(k,l){l=a.j?a.j(l):a.call(null,l);return b.l?b.l(k,l):b.call(null,k,l)}function d(k){return b.j?b.j(k):b.call(null,k)}function e(){return b.J?b.J():b.call(null)}var g=null,h=function(){function k(m,n,p){var q=null;if(arguments.length>2){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new J(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=Ad(a,n,p);return b.l?b.l(m,n):b.call(null,m,n)}k.U=2;k.R=function(m){var n=
M(m);m=P(m);var p=M(m);m=Sb(m);return l(n,p,m)};k.K=l;return k}();g=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(arguments.length>2){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new J(p,0,null)}return h.K(k,l,n)}throw Error("Invalid arity: "+arguments.length);};g.U=2;g.R=h.R;g.J=e;g.j=d;g.l=c;g.K=h.K;return g}()}};
Kd.l=function(a,b){return new fd(null,function(){var c=I(b);if(c){if(Lc(c)){for(var d=rb(c),e=T(d),g=jd(e),h=0;;)if(h<e)md(g,function(){var k=D(d,h);return a.j?a.j(k):a.call(null,k)}()),h+=1;else break;return ld(g.X(),Kd.l(a,sb(c)))}return V(function(){var k=M(c);return a.j?a.j(k):a.call(null,k)}(),Kd.l(a,Sb(c)))}return null},null)};
Kd.u=function(a,b,c){return new fd(null,function(){var d=I(b),e=I(c);if(d&&e){var g=M(d);var h=M(e);g=a.l?a.l(g,h):a.call(null,g,h);d=V(g,Kd.u(a,Sb(d),Sb(e)))}else d=null;return d},null)};Kd.P=function(a,b,c,d){return new fd(null,function(){var e=I(b),g=I(c),h=I(d);if(e&&g&&h){var k=M(e);var l=M(g),m=M(h);k=a.u?a.u(k,l,m):a.call(null,k,l,m);e=V(k,Kd.P(a,Sb(e),Sb(g),Sb(h)))}else e=null;return e},null)};
Kd.K=function(a,b,c,d,e){return Kd.l(function(g){return zd(a,g)},function k(h){return new fd(null,function(){var l=Kd.l(I,h);return Fd(Wc,l)?V(Kd.l(M,l),k(Kd.l(Sb,l))):null},null)}(uc.K(e,d,pc([c,b]))))};Kd.R=function(a){var b=M(a),c=P(a);a=M(c);var d=P(c);c=M(d);var e=P(d);d=M(e);e=P(e);return this.K(b,a,c,d,e)};Kd.U=4;function Ld(a,b,c,d){this.B=a;this.count=b;this.H=c;this.next=d;this.D=null;this.A=32374988;this.G=262145}f=Ld.prototype;f.toString=function(){return zb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){return this.next==null?this.count>1?this.next=new Ld(null,this.count-1,this.H,null):-1===this.count?this:null:this.next};
f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){if(this.count===-1)for(var c=b.l?b.l(this.H,this.H):b.call(null,this.H,this.H);;){if(R(c))return Ta(c);c=b.l?b.l(c,this.H):b.call(null,c,this.H)}else for(a=1,c=this.H;;)if(a<this.count){c=b.l?b.l(c,this.H):b.call(null,c,this.H);if(R(c))return Ta(c);a+=1}else return c};
f.ja=function(a,b,c){if(this.count===-1)for(c=b.l?b.l(c,this.H):b.call(null,c,this.H);;){if(R(c))return Ta(c);c=b.l?b.l(c,this.H):b.call(null,c,this.H)}else for(a=0;;)if(a<this.count){c=b.l?b.l(c,this.H):b.call(null,c,this.H);if(R(c))return Ta(c);a+=1}else return c};f.ha=function(){return this.H};f.ma=function(){return this.next==null?this.count>1?this.next=new Ld(null,this.count-1,this.H,null):-1===this.count?this:N:this.next};f.W=function(){return this};
f.ca=function(a,b){return b===this.B?this:new Ld(b,this.count,this.H,this.next)};f.fa=function(a,b){return V(b,this)};var Md=function Md(a){switch(arguments.length){case 0:return Md.J();case 1:return Md.j(arguments[0]);case 2:return Md.l(arguments[0],arguments[1]);case 3:return Md.u(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}};Md.J=function(){return vc};Md.j=function(a){return a};
Md.l=function(a,b){return a!=null?a!=null&&(a.G&4||w===a.dc)?Wa(sd(Rc(nb,mb(a),b)),Fc(a)):Rc(Da,a,b):Rc(uc,a,b)};Md.u=function(a,b,c){if(a!=null&&(a.G&4||w===a.dc)){var d=Fc(a);return Xc(b,function(){function e(h){return Wa(ob(h),d)}var g=null;g=function(h,k){switch(arguments.length){case 1:return e.call(this,h);case 2:return nb(h,k)}throw Error("Invalid arity: "+arguments.length);};g.j=e;g.l=function(h,k){return nb(h,k)};return g}(),mb(a),c)}return Xc(b,uc,a,c)};Md.U=3;
function Nd(a,b){return sd(Rc(function(c,d){d=a.j?a.j(d):a.call(null,d);return nb(c,d)},mb(vc),b))}function Od(a,b){this.O=a;this.o=b}function Pd(a){return new Od(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Qd(a){a=a.v;return a<32?0:a-1>>>5<<5}function Rd(a,b,c){for(;;){if(b===0)return c;var d=Pd(a);d.o[0]=c;c=d;b-=5}}
var Sd=function Sd(a,b,c,d){var g=new Od(c.O,ya(c.o)),h=a.v-1>>>b&31;5===b?g.o[h]=d:(c=c.o[h],c!=null?(b-=5,a=Sd.P?Sd.P(a,b,c,d):Sd.call(null,a,b,c,d)):a=Rd(null,b-5,d),g.o[h]=a);return g};function Td(a,b){if(b>=Qd(a))return a.qa;var c=a.root;for(a=a.shift;;)if(a>0){var d=a-5;c=c.o[b>>>a&31];a=d}else return c.o}function Ud(a,b){if(0<=b&&b<a.v)b=Td(a,b);else throw a=a.v,Error(["No item ",C(b)," in vector of length ",C(a)].join(""));return b}
var Vd=function Vd(a,b,c,d,e){var h=new Od(c.O,ya(c.o));if(b===0)h.o[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.o[k];a=Vd.ra?Vd.ra(a,b,c,d,e):Vd.call(null,a,b,c,d,e);h.o[k]=a}return h};function Wd(a,b,c){this.zb=this.i=0;this.o=a;this.Cc=b;this.start=0;this.end=c}Wd.prototype.sa=function(){return this.i<this.end};Wd.prototype.next=function(){this.i-this.zb===32&&(this.o=Td(this.Cc,this.i),this.zb+=32);var a=this.o[this.i&31];this.i+=1;return a};
function Xd(a,b,c,d){return c<d?Yd(a,b,ic(a,c),c+1,d):b.J?b.J():b.call(null)}function Yd(a,b,c,d,e){var g=c;c=d;for(d=Td(a,d);;)if(c<e){var h=c&31;d=h===0?Td(a,c):d;h=d[h];g=b.l?b.l(g,h):b.call(null,g,h);if(R(g))return Ta(g);c+=1}else return g}function Y(a,b,c,d,e,g){this.B=a;this.v=b;this.shift=c;this.root=d;this.qa=e;this.D=g;this.A=167666463;this.G=401412}f=Y.prototype;f.toString=function(){return zb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.va=function(a,b){return this.da(null,b,null)};f.da=function(a,b,c){return typeof b==="number"?this.ua(null,b,c):c};
f.Db=function(a,b,c){a=0;for(var d=c;;)if(a<this.v){var e=Td(this,a);c=e.length;a:{for(var g=0;;)if(g<c){var h=g+a,k=e[g];d=b.u?b.u(d,h,k):b.call(null,d,h,k);if(R(d)){e=d;break a}g+=1}else{e=d;break a}e=void 0}if(R(e))return Ta(e);a+=c;d=e}else return d};f.na=function(a,b){return Ud(this,b)[b&31]};f.ua=function(a,b,c){return 0<=b&&b<this.v?Td(this,b)[b&31]:c};
f.Pb=function(a,b){if(0<=a&&a<this.v){if(Qd(this)<=a){var c=ya(this.qa);c[a&31]=b;return new Y(this.B,this.v,this.shift,this.root,c,null)}return new Y(this.B,this.v,this.shift,Vd(this,this.shift,this.root,a,b),this.qa,null)}if(a===this.v)return this.fa(null,b);throw Error(["Index ",C(a)," out of bounds  [0,",C(this.v),"]"].join(""));};f.wa=function(){var a=this.v;return new Wd(0<T(this)?Td(this,0):null,this,a)};f.ba=function(){return this.B};f.Y=function(){return this.v};
f.Eb=function(){return this.v>0?new lc(this,this.v-1,null):null};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){if(b instanceof Y)if(this.v===T(b))for(a=this.wa(null),b=b.wa(null);;){if(a.sa()){var c=a.next(),d=b.next();if(Q.l(c,d))continue;else return!1}else return!0;break}else return!1;else return oc(this,b)};f.ob=function(){return new Zd(this.v,this.shift,$d.j?$d.j(this.root):$d.call(null,this.root),ae.j?ae.j(this.qa):ae.call(null,this.qa))};
f.la=function(){return Wa(vc,this.B)};f.ia=function(a,b){return Xd(this,b,0,this.v)};f.ja=function(a,b,c){a=0;for(var d=c;;)if(a<this.v){var e=Td(this,a);c=e.length;a:{for(var g=0;;)if(g<c){var h=e[g];d=b.l?b.l(d,h):b.call(null,d,h);if(R(d)){e=d;break a}g+=1}else{e=d;break a}e=void 0}if(R(e))return Ta(e);a+=c;d=e}else return d};f.Ia=function(a,b,c){if(typeof b==="number")return this.Pb(b,c);throw Error("Vector's key for assoc must be a number.");};f.ib=function(a,b){return Pc(b)?0<=b&&b<this.v:!1};
f.W=function(){if(this.v===0)return null;if(this.v<=32)return new J(this.qa,0,null);a:{var a=this.root;for(var b=this.shift;;)if(b>0)b-=5,a=a.o[0];else{a=a.o;break a}a=void 0}return be?be(this,a,0,0):ce.call(null,this,a,0,0)};f.ca=function(a,b){return b===this.B?this:new Y(b,this.v,this.shift,this.root,this.qa,this.D)};
f.fa=function(a,b){if(this.v-Qd(this)<32){a=this.qa.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.qa[d],d+=1;else break;c[a]=b;return new Y(this.B,this.v+1,this.shift,this.root,c,null)}a=(c=this.v>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Pd(null),c.o[0]=this.root,d=Rd(null,this.shift,new Od(null,this.qa)),c.o[1]=d):c=Sd(this,this.shift,this.root,new Od(null,this.qa));return new Y(this.B,this.v+1,a,c,[b],null)};
f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){if(typeof a==="number")return this.na(null,a);throw Error("Key must be integer");};
var de=new Od(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),vc=new Y(null,0,5,de,[],Xb);Y.prototype[xa]=function(){return Ub(this)};function ee(a,b,c,d,e){this.ta=a;this.node=b;this.i=c;this.ka=d;this.B=e;this.D=null;this.A=32375022;this.G=263680}f=ee.prototype;f.toString=function(){return zb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){if(this.ka+1<this.node.length){var a=this.ta;var b=this.node,c=this.i,d=this.ka+1;a=be?be(a,b,c,d):ce.call(null,a,b,c,d);return a==null?null:a}return this.Cb()};
f.Y=function(){return Ba(this.ta)-(this.i+this.ka)};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return Xd(this.ta,b,this.i+this.ka,T(this.ta))};f.ja=function(a,b,c){return Yd(this.ta,b,c,this.i+this.ka,T(this.ta))};f.ha=function(){return this.node[this.ka]};
f.ma=function(){if(this.ka+1<this.node.length){var a=this.ta;var b=this.node,c=this.i,d=this.ka+1;a=be?be(a,b,c,d):ce.call(null,a,b,c,d);return a==null?N:a}return this.Ja(null)};f.W=function(){return this};f.nb=function(){var a=this.node;return new id(a,this.ka,a.length)};f.Ja=function(){var a=this.i+this.node.length;if(a<Ba(this.ta)){var b=this.ta,c=Td(this.ta,a);return be?be(b,c,a,0):ce.call(null,b,c,a,0)}return N};
f.ca=function(a,b){return b===this.B?this:fe?fe(this.ta,this.node,this.i,this.ka,b):ce.call(null,this.ta,this.node,this.i,this.ka,b)};f.fa=function(a,b){return V(b,this)};f.Cb=function(){var a=this.i+this.node.length;if(a<Ba(this.ta)){var b=this.ta,c=Td(this.ta,a);return be?be(b,c,a,0):ce.call(null,b,c,a,0)}return null};ee.prototype[xa]=function(){return Ub(this)};
function ce(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new ee(b,Ud(b,c),c,d,null);case 4:return be(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return fe(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}function be(a,b,c,d){return new ee(a,b,c,d,null)}function fe(a,b,c,d,e){return new ee(a,b,c,d,e)}
function ge(a,b){return a===b.O?b:new Od(a,ya(b.o))}function $d(a){return new Od({},ya(a.o))}function ae(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Mc(a,0,b,0,a.length);return b}var he=function he(a,b,c,d){c=ge(a.root.O,c);var g=a.v-1>>>b&31;if(b===5)a=d;else{var h=c.o[g];h!=null?(b-=5,a=he.P?he.P(a,b,h,d):he.call(null,a,b,h,d)):a=Rd(a.root.O,b-5,d)}c.o[g]=a;return c};
function Zd(a,b,c,d){this.v=a;this.shift=b;this.root=c;this.qa=d;this.G=88;this.A=275}f=Zd.prototype;
f.rb=function(a,b){if(this.root.O){if(this.v-Qd(this)<32)this.qa[this.v&31]=b;else{a=new Od(this.root.O,this.qa);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.qa=c;this.v>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=Rd(this.root.O,this.shift,a),this.root=new Od(this.root.O,b),this.shift=c):this.root=he(this,this.shift,this.root,a)}this.v+=1;return this}throw Error("conj! after persistent!");};f.Fb=function(){if(this.root.O){this.root.O=null;var a=this.v-Qd(this),b=Array(a);Mc(this.qa,0,b,0,a);return new Y(null,this.v,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
f.jb=function(a,b,c){if(typeof b==="number")return je(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function je(a,b,c){if(a.root.O){if(0<=b&&b<a.v){if(Qd(a)<=b)a.qa[b&31]=c;else{var d=function k(g,h){h=ge(a.root.O,h);if(g===0)h.o[b&31]=c;else{var l=b>>>g&31;g=k(g-5,h.o[l]);h.o[l]=g}return h}(a.shift,a.root);a.root=d}return a}if(b===a.v)return a.rb(null,c);throw Error(["Index ",C(b)," out of bounds for TransientVector of length",C(a.v)].join(""));}throw Error("assoc! after persistent!");}f.Y=function(){if(this.root.O)return this.v;throw Error("count after persistent!");};
f.na=function(a,b){if(this.root.O)return Ud(this,b)[b&31];throw Error("nth after persistent!");};f.ua=function(a,b,c){return 0<=b&&b<this.v?this.na(null,b):c};f.va=function(a,b){return this.da(null,b,null)};f.da=function(a,b,c){if(this.root.O)return typeof b==="number"?this.ua(null,b,c):c;throw Error("lookup after persistent!");};
f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){return this.va(null,a)};f.l=function(a,b){return this.da(null,a,b)};function ke(){this.A=2097152;this.G=0}ke.prototype.Z=function(){return!1};var le=new ke;
function me(a,b){return Oc(Ic(b)&&!Jc(b)?T(a)===T(b)?(a!=null?a.A&1048576||w===a.ec||(a.A?0:z($a,a)):z($a,a))?Vc(function(c,d,e){return Q.l(Ob(b,d,le),e)?!0:new ac(!1)},a):Fd(function(c){return Q.l(Ob(b,M(c),le),tc(c))},a):null:null)}function ne(a){this.s=a}ne.prototype.next=function(){if(this.s!=null){var a=M(this.s),b=W(a,0,null);a=W(a,1,null);this.s=P(this.s);return{value:[b,a],done:!1}}return{value:null,done:!0}};function oe(a){return new ne(I(a))}
function pe(a,b){if(b instanceof H)a:{var c=a.length;b=b.xa;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof H&&b===a[d].xa){a=d;break a}d+=2}a=void 0}else if(typeof b==="string"||typeof b==="number")a:{c=a.length;for(d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}a=void 0}else if(b instanceof Lb)a:{c=a.length;b=b.La;for(d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Lb&&b===a[d].La){a=d;break a}d+=2}a=void 0}else if(b==null)a:{b=a.length;for(c=0;;){if(b<=c){a=-1;break a}if(a[c]==
null){a=c;break a}c+=2}a=void 0}else a:{c=a.length;for(d=0;;){if(c<=d){a=-1;break a}if(Q.l(b,a[d])){a=d;break a}d+=2}a=void 0}return a}function qe(a,b){this.key=a;this.H=b;this.D=null;this.A=166619935;this.G=0}f=qe.prototype;f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.va=function(a,b){return this.ua(null,b,null)};f.da=function(a,b,c){return this.ua(null,b,c)};f.na=function(a,b){switch(b){case 0:return this.key;case 1:return this.H;default:throw Error("Index out of bounds");}};
f.ua=function(a,b,c){switch(b){case 0:return this.key;case 1:return this.H;default:return c}};f.Pb=function(a,b){return(new Y(null,2,5,de,[this.key,this.H],null)).Pb(a,b)};f.ba=function(){return null};f.Y=function(){return 2};f.hc=function(){return this.key};f.ic=function(){return this.H};f.Eb=function(){return new J([this.H,this.key],0,null)};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return null};
f.ia=function(a,b){return cc(this,b)};f.ja=function(a,b,c){a:{a=this.Y(null);var d=c;for(c=0;;)if(c<a){var e=this.na(null,c);d=b.l?b.l(d,e):b.call(null,d,e);if(R(d)){b=Ta(d);break a}c+=1}else{b=d;break a}b=void 0}return b};f.Ia=function(a,b,c){return zc.u(new Y(null,2,5,de,[this.key,this.H],null),b,c)};f.ib=function(a,b){switch(b){case 0:return!0;case 1:return!0;default:return!1}};f.W=function(){return new J([this.key,this.H],0,null)};
f.ca=function(a,b){return Ec(new Y(null,2,5,de,[this.key,this.H],null),b)};f.fa=function(a,b){return new Y(null,3,5,de,[this.key,this.H,b],null)};f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){return this.na(null,a)};f.l=function(a,b){return this.ua(null,a,b)};
function re(a){return a!=null?a.A&2048||w===a.Jc?!0:!1:!1}function se(a,b,c){this.o=a;this.i=b;this.Da=c;this.A=32374990;this.G=262144}f=se.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.Da};f.ea=function(){return this.i<this.o.length-2?new se(this.o,this.i+2,null):null};f.Y=function(){return(this.o.length-this.i)/2};f.aa=function(){return Wb(this)};
f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return new qe(this.o[this.i],this.o[this.i+1])};f.ma=function(){return this.i<this.o.length-2?new se(this.o,this.i+2,null):N};f.W=function(){return this};f.ca=function(a,b){return b===this.Da?this:new se(this.o,this.i,b)};f.fa=function(a,b){return V(b,this)};se.prototype[xa]=function(){return Ub(this)};
function te(a,b){this.o=a;this.i=0;this.v=b}te.prototype.sa=function(){return this.i<this.v};te.prototype.next=function(){var a=new qe(this.o[this.i],this.o[this.i+1]);this.i+=2;return a};function ue(a,b,c,d){this.B=a;this.v=b;this.o=c;this.D=d;this.A=16647951;this.G=401412}f=ue.prototype;f.toString=function(){return zb(this)};f.keys=function(){return Ub(ve.j?ve.j(this):ve.call(null,this))};f.entries=function(){return oe(I(this))};f.values=function(){return Ub(we.j?we.j(this):we.call(null,this))};
f.has=function(a){return Qc(this,a)};f.get=function(a,b){return this.da(null,a,b)};f.forEach=function(a){for(var b=I(this),c=null,d=0,e=0;;)if(e<d){var g=c.na(null,e),h=W(g,0,null);g=W(g,1,null);a.l?a.l(g,h):a.call(null,g,h);e+=1}else if(b=I(b))Lc(b)?(c=rb(b),b=sb(b),h=c,d=T(c),c=h):(c=M(b),h=W(c,0,null),g=W(c,1,null),a.l?a.l(g,h):a.call(null,g,h),b=P(b),c=null,d=0),e=0;else return null};f.va=function(a,b){return this.da(null,b,null)};f.da=function(a,b,c){a=pe(this.o,b);return a===-1?c:this.o[a+1]};
f.Db=function(a,b,c){a=this.o.length;for(var d=0;;)if(d<a){var e=this.o[d],g=this.o[d+1];c=b.u?b.u(c,e,g):b.call(null,c,e,g);if(R(c))return Ta(c);d+=2}else return c};f.wa=function(){return new te(this.o,this.v*2)};f.ba=function(){return this.B};f.Y=function(){return this.v};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Yb(this)};
f.Z=function(a,b){if(Ic(b)&&!Jc(b))if(a=this.o.length,this.v===b.Y(null))for(var c=0;;){if(c<a){var d=b.da(null,this.o[c],Nc);if(d!==Nc)if(Q.l(this.o[c+1],d)){c+=2;continue}else return!1;else return!1}else return!0;break}else return!1;else return!1};f.ob=function(){return new xe(this.o.length,ya(this.o))};f.la=function(){return Wa(Dd,this.B)};f.ia=function(a,b){return Tc(this,b)};f.ja=function(a,b,c){return Uc(this,b,c)};
f.Ob=function(a,b){if(pe(this.o,b)>=0){a=this.o.length;var c=a-2;if(c===0)return this.la();c=Array(c);for(var d=0,e=0;;){if(d>=a)return new ue(this.B,this.v-1,c,null);Q.l(b,this.o[d])?d+=2:(c[e]=this.o[d],c[e+1]=this.o[d+1],e+=2,d+=2)}}else return this};
f.Ia=function(a,b,c){a=pe(this.o,b);if(a===-1){if(this.v<ye){a=this.o;for(var d=a.length,e=Array(d+2),g=0;;)if(g<d)e[g]=a[g],g+=1;else break;e[d]=b;e[d+1]=c;return new ue(this.B,this.v+1,e,null)}return Wa(Na(Md.l(ze,this),b,c),this.B)}if(c===this.o[a+1])return this;b=ya(this.o);b[a+1]=c;return new ue(this.B,this.v,b,null)};f.ib=function(a,b){return pe(this.o,b)!==-1};f.W=function(){var a=this.o;return 0<=a.length-2?new se(a,0,null):null};
f.ca=function(a,b){return b===this.B?this:new ue(b,this.v,this.o,this.D)};f.fa=function(a,b){if(Kc(b))return this.Ia(null,D(b,0),D(b,1));a=this;for(b=I(b);;){if(b==null)return a;var c=M(b);if(Kc(c))a=Na(a,D(c,0),D(c,1)),b=P(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){return this.va(null,a)};f.l=function(a,b){return this.da(null,a,b)};var Dd=new ue(null,0,[],Zb),ye=8;function Ae(a,b){return a===b?!0:a===b||a instanceof H&&b instanceof H&&a.xa===b.xa?!0:Q.l(a,b)}
function Be(a){for(var b=0,c=0;;)if(b<a.length){var d;a:{for(d=0;;)if(d<b){var e=Ae(a[b],a[d]);if(e){d=e;break a}d=2+d}else{d=!1;break a}d=void 0}c=d?c:c+2;b=2+b}else return c}function Ce(a,b){var c=a.length-1;b=I(b);var d=Array(c+2*T(b));for(a=Mc(a,0,d,0,c);;)if(b)d=M(b),a[c]=Qa(d),a[c+1]=Ra(d),c=2+c,b=P(b);else return a}
function Ac(a){var b=a.length,c=1===(b&1),d;if(!(d=c))a:{for(d=0;;)if(d<a.length){var e;b:{for(e=0;;)if(e<d){var g=Ae(a[d],a[e]);if(g){e=g;break b}e=2+e}else{e=!1;break b}e=void 0}if(e){d=e;break a}d=2+d}else{d=!1;break a}d=void 0}return d?De(a,c):new ue(null,b/2,a,null)}
function De(a,b){var c=b?Ce(a,Md.l(Dd,a[a.length-1])):a;a=Be(c);var d=c.length;if(a<d){a=Array(a);for(var e=0,g=0;;)if(e<d)(function(){for(var h=0;;)if(h<g){var k=Ae(c[e],c[h]);if(k)return k;h=2+h}else return!1})()?(b=g,e=2+e,g=b):(b=function(){for(var h=d-2;;)if(h>=e){if(Ae(c[e],c[h]))return h;h-=2}else return h}(),a[g]=c[e],a[g+1]=c[b+1],b=2+g,e=2+e,g=b);else break;return new ue(null,a.length/2,a,null)}return new ue(null,c.length/2,c,null)}ue.prototype[xa]=function(){return Ub(this)};
function xe(a,b){this.kb={};this.eb=a;this.o=b;this.A=259;this.G=56}f=xe.prototype;f.Y=function(){if(this.kb)return Yc(this.eb);throw Error("count after persistent!");};f.va=function(a,b){return this.da(null,b,null)};f.da=function(a,b,c){if(this.kb)return a=pe(this.o,b),a===-1?c:this.o[a+1];throw Error("lookup after persistent!");};
f.rb=function(a,b){if(this.kb){if(re(b))return this.jb(null,Ee.j?Ee.j(b):Ee.call(null,b),Fe.j?Fe.j(b):Fe.call(null,b));if(Kc(b))return this.jb(null,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));a=I(b);for(b=this;;){var c=M(a);if(y(c))a=P(a),b=pb(b,Ee.j?Ee.j(c):Ee.call(null,c),Fe.j?Fe.j(c):Fe.call(null,c));else return b}}else throw Error("conj! after persistent!");};f.Fb=function(){if(this.kb)return this.kb=!1,new ue(null,Yc(this.eb),this.o,null);throw Error("persistent! called twice");};
f.jb=function(a,b,c){if(this.kb){a=pe(this.o,b);if(a===-1){if(this.eb+2<=2*ye)return this.eb+=2,this.o.push(b),this.o.push(c),this;a=Ge.l?Ge.l(this.eb,this.o):Ge.call(null,this.eb,this.o);return pb(a,b,c)}c!==this.o[a+1]&&(this.o[a+1]=c);return this}throw Error("assoc! after persistent!");};f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};
f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){return this.da(null,a,null)};f.l=function(a,b){return this.da(null,a,b)};function Ge(a,b){for(var c=mb(ze),d=0;;)if(d<a)c=pb(c,b[d],b[d+1]),d+=2;else return c}function He(){this.H=!1}function Ie(a,b,c){a=ya(a);a[b]=c;return a}function Je(a,b){var c=Array(a.length-2);Mc(a,0,c,0,2*b);Mc(a,2*(b+1),c,2*b,c.length-2*b);return c}function Ke(a,b,c,d){a=a.cb(b);a.o[c]=d;return a}
function Le(a,b,c){for(var d=a.length,e=0,g=c;;)if(e<d){c=a[e];if(c!=null){var h=a[e+1];c=b.u?b.u(g,c,h):b.call(null,g,c,h)}else c=a[e+1],c=c!=null?c.ub(b,g):g;if(R(c))return c;e+=2;g=c}else return g}function Me(a){this.o=a;this.i=0;this.Ba=this.vb=null}Me.prototype.advance=function(){for(var a=this.o.length;;)if(this.i<a){var b=this.o[this.i],c=this.o[this.i+1];b!=null?b=this.vb=new qe(b,c):c!=null?(b=xb(c),b=b.sa()?this.Ba=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};
Me.prototype.sa=function(){var a=this.vb!=null;return a?a:(a=this.Ba!=null)?a:this.advance()};Me.prototype.next=function(){if(this.vb!=null){var a=this.vb;this.vb=null;return a}if(this.Ba!=null)return a=this.Ba.next(),this.Ba.sa()||(this.Ba=null),a;if(this.advance())return this.next();throw Error("No such element");};Me.prototype.remove=function(){return Error("Unsupported operation")};function Ne(a,b,c){this.O=a;this.V=b;this.o=c;this.G=131072;this.A=0}f=Ne.prototype;
f.cb=function(a){if(a===this.O)return this;var b=Zc(this.V),c=Array(b<0?4:2*(b+1));Mc(this.o,0,c,0,2*b);return new Ne(a,this.V,c)};f.sb=function(){return Oe?Oe(this.o):Pe.call(null,this.o)};f.ub=function(a,b){return Le(this.o,a,b)};f.Ka=function(a,b,c,d){var e=1<<(b>>>a&31);if((this.V&e)===0)return d;var g=Zc(this.V&e-1);e=this.o[2*g];g=this.o[2*g+1];return e==null?g.Ka(a+5,b,c,d):Ae(c,e)?g:d};
f.za=function(a,b,c,d,e,g){var h=1<<(c>>>b&31),k=Zc(this.V&h-1);if((this.V&h)===0){var l=Zc(this.V);if(2*l<this.o.length){a=this.cb(a);b=a.o;g.H=!0;c=2*(l-k);g=2*k+(c-1);for(l=2*(k+1)+(c-1);c!==0;)b[l]=b[g],--l,--c,--g;b[2*k]=d;b[2*k+1]=e;a.V|=h;return a}if(l>=16){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Qe.za(a,b+5,c,d,e,g);for(e=d=0;;)if(d<32)(this.V>>>d&1)===0?
d+=1:(k[d]=this.o[e]!=null?Qe.za(a,b+5,Jb(this.o[e]),this.o[e],this.o[e+1],g):this.o[e+1],e+=2,d+=1);else break;return new Re(a,l+1,k)}b=Array(2*(l+4));Mc(this.o,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Mc(this.o,2*k,b,2*(k+1),2*(l-k));g.H=!0;a=this.cb(a);a.o=b;a.V|=h;return a}l=this.o[2*k];h=this.o[2*k+1];if(l==null)return l=h.za(a,b+5,c,d,e,g),l===h?this:Ke(this,a,2*k+1,l);if(Ae(d,l))return e===h?this:Ke(this,a,2*k+1,e);g.H=!0;g=b+5;d=Se?Se(a,g,l,h,c,d,e):Te.call(null,a,g,l,h,c,d,e);e=2*k;k=2*k+1;a=this.cb(a);
a.o[e]=null;a.o[k]=d;return a};
f.ya=function(a,b,c,d,e){var g=1<<(b>>>a&31),h=Zc(this.V&g-1);if((this.V&g)===0){var k=Zc(this.V);if(k>=16){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Qe.ya(a+5,b,c,d,e);for(d=c=0;;)if(c<32)(this.V>>>c&1)===0?c+=1:(h[c]=this.o[d]!=null?Qe.ya(a+5,Jb(this.o[d]),this.o[d],this.o[d+1],e):this.o[d+1],d+=2,c+=1);else break;return new Re(null,k+1,h)}a=Array(2*(k+1));Mc(this.o,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;Mc(this.o,2*h,a,2*(h+1),2*(k-h));e.H=!0;return new Ne(null,this.V|g,a)}var l=this.o[2*h];g=this.o[2*h+1];if(l==null)return k=g.ya(a+5,b,c,d,e),k===g?this:new Ne(null,this.V,Ie(this.o,2*h+1,k));if(Ae(c,l))return d===g?this:new Ne(null,this.V,Ie(this.o,2*h+1,d));e.H=!0;e=this.V;k=this.o;a+=5;a=Ue?Ue(a,l,g,b,c,d):Te.call(null,a,l,g,b,c,d);c=2*h;h=2*h+1;d=ya(k);d[c]=null;d[h]=a;return new Ne(null,e,d)};
f.tb=function(a,b,c){var d=1<<(b>>>a&31);if((this.V&d)===0)return this;var e=Zc(this.V&d-1),g=this.o[2*e],h=this.o[2*e+1];return g==null?(a=h.tb(a+5,b,c),a===h?this:a!=null?new Ne(null,this.V,Ie(this.o,2*e+1,a)):this.V===d?null:new Ne(null,this.V^d,Je(this.o,e))):Ae(c,g)?this.V===d?null:new Ne(null,this.V^d,Je(this.o,e)):this};f.wa=function(){return new Me(this.o)};var Qe=new Ne(null,0,[]);function Ve(a){this.o=a;this.i=0;this.Ba=null}
Ve.prototype.sa=function(){for(var a=this.o.length;;){if(this.Ba!=null&&this.Ba.sa())return!0;if(this.i<a){var b=this.o[this.i];this.i+=1;b!=null&&(this.Ba=xb(b))}else return!1}};Ve.prototype.next=function(){if(this.sa())return this.Ba.next();throw Error("No such element");};Ve.prototype.remove=function(){return Error("Unsupported operation")};function Re(a,b,c){this.O=a;this.v=b;this.o=c;this.G=131072;this.A=0}f=Re.prototype;f.cb=function(a){return a===this.O?this:new Re(a,this.v,ya(this.o))};
f.sb=function(){return We?We(this.o):Xe.call(null,this.o)};f.ub=function(a,b){for(var c=this.o.length,d=0;;)if(d<c){var e=this.o[d];if(e!=null){b=e.ub(a,b);if(R(b))return b;d+=1}else d+=1}else return b};f.Ka=function(a,b,c,d){var e=this.o[b>>>a&31];return e!=null?e.Ka(a+5,b,c,d):d};f.za=function(a,b,c,d,e,g){var h=c>>>b&31,k=this.o[h];if(k==null)return a=Ke(this,a,h,Qe.za(a,b+5,c,d,e,g)),a.v+=1,a;b=k.za(a,b+5,c,d,e,g);return b===k?this:Ke(this,a,h,b)};
f.ya=function(a,b,c,d,e){var g=b>>>a&31,h=this.o[g];if(h==null)return new Re(null,this.v+1,Ie(this.o,g,Qe.ya(a+5,b,c,d,e)));a=h.ya(a+5,b,c,d,e);return a===h?this:new Re(null,this.v,Ie(this.o,g,a))};
f.tb=function(a,b,c){var d=b>>>a&31,e=this.o[d];if(e!=null){a=e.tb(a+5,b,c);if(a===e)d=this;else if(a==null)if(this.v<=8)a:{e=this.o;a=e.length;b=Array(2*(this.v-1));c=0;for(var g=1,h=0;;)if(c<a)c!==d&&e[c]!=null?(b[g]=e[c],g+=2,h|=1<<c,c+=1):c+=1;else{d=new Ne(null,h,b);break a}d=void 0}else d=new Re(null,this.v-1,Ie(this.o,d,a));else d=new Re(null,this.v,Ie(this.o,d,a));return d}return this};f.wa=function(){return new Ve(this.o)};
function Ye(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Ae(c,a[d]))return d;d+=2}else return-1}function Ze(a,b,c,d){this.O=a;this.Ea=b;this.v=c;this.o=d;this.G=131072;this.A=0}f=Ze.prototype;f.cb=function(a){if(a===this.O)return this;var b=Array(2*(this.v+1));Mc(this.o,0,b,0,2*this.v);return new Ze(a,this.Ea,this.v,b)};f.sb=function(){return Oe?Oe(this.o):Pe.call(null,this.o)};f.ub=function(a,b){return Le(this.o,a,b)};f.Ka=function(a,b,c,d){a=Ye(this.o,this.v,c);return a<0?d:this.o[a+1]};
f.za=function(a,b,c,d,e,g){if(c===this.Ea){b=Ye(this.o,this.v,d);if(b===-1){if(this.o.length>2*this.v)return b=2*this.v,c=2*this.v+1,a=this.cb(a),a.o[b]=d,a.o[c]=e,g.H=!0,a.v+=1,a;c=this.o.length;b=Array(c+2);Mc(this.o,0,b,0,c);b[c]=d;b[c+1]=e;g.H=!0;d=this.v+1;a===this.O?(this.o=b,this.v=d,a=this):a=new Ze(this.O,this.Ea,d,b);return a}return this.o[b+1]===e?this:Ke(this,a,b+1,e)}return(new Ne(a,1<<(this.Ea>>>b&31),[null,this,null,null])).za(a,b,c,d,e,g)};
f.ya=function(a,b,c,d,e){return b===this.Ea?(a=Ye(this.o,this.v,c),a===-1?(a=2*this.v,b=Array(a+2),Mc(this.o,0,b,0,a),b[a]=c,b[a+1]=d,e.H=!0,new Ze(null,this.Ea,this.v+1,b)):Q.l(this.o[a+1],d)?this:new Ze(null,this.Ea,this.v,Ie(this.o,a+1,d))):(new Ne(null,1<<(this.Ea>>>a&31),[null,this])).ya(a,b,c,d,e)};f.tb=function(a,b,c){a=Ye(this.o,this.v,c);return a===-1?this:this.v===1?null:new Ze(null,this.Ea,this.v-1,Je(this.o,Yc(a)))};f.wa=function(){return new Me(this.o)};
function Te(a){switch(arguments.length){case 6:return Ue(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Se(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}function Ue(a,b,c,d,e,g){var h=Jb(b);if(h===d)return new Ze(null,h,2,[b,c,e,g]);var k=new He;return Qe.ya(a,h,b,c,k).ya(a,d,e,g,k)}
function Se(a,b,c,d,e,g,h){var k=Jb(c);if(k===e)return new Ze(null,k,2,[c,d,g,h]);var l=new He;return Qe.za(a,b,k,c,d,l).za(a,b,e,g,h,l)}function $e(a,b,c,d,e){this.B=a;this.nodes=b;this.i=c;this.s=d;this.D=e;this.A=32374988;this.G=0}f=$e.prototype;f.toString=function(){return zb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){if(this.s==null){var a=this.nodes,b=this.i+2;return af?af(a,b,null):Pe.call(null,a,b,null)}a=this.nodes;b=this.i;var c=P(this.s);return af?af(a,b,c):Pe.call(null,a,b,c)};
f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return this.s==null?new qe(this.nodes[this.i],this.nodes[this.i+1]):M(this.s)};
f.ma=function(){var a=this,b=a.s==null?function(){var c=a.nodes,d=a.i+2;return af?af(c,d,null):Pe.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=P(a.s);return af?af(c,d,e):Pe.call(null,c,d,e)}();return b!=null?b:N};f.W=function(){return this};f.ca=function(a,b){return b===this.B?this:new $e(b,this.nodes,this.i,this.s,this.D)};f.fa=function(a,b){return V(b,this)};$e.prototype[xa]=function(){return Ub(this)};
function Pe(a){switch(arguments.length){case 1:return Oe(arguments[0]);case 3:return af(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}function Oe(a){return af(a,0,null)}function af(a,b,c){if(c==null)for(c=a.length;;)if(b<c){if(a[b]!=null)return new $e(null,a,b,null,null);var d=a[b+1];if(y(d)&&(d=d.sb(),y(d)))return new $e(null,a,b+2,d,null);b+=2}else return null;else return new $e(null,a,b,c,null)}
function bf(a,b,c,d,e){this.B=a;this.nodes=b;this.i=c;this.s=d;this.D=e;this.A=32374988;this.G=0}f=bf.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.B};f.ea=function(){var a=this.nodes,b=this.i,c=P(this.s);return cf?cf(a,b,c):Xe.call(null,a,b,c)};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};
f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return M(this.s)};f.ma=function(){var a=this.nodes;var b=this.i,c=P(this.s);a=cf?cf(a,b,c):Xe.call(null,a,b,c);return a!=null?a:N};f.W=function(){return this};f.ca=function(a,b){return b===this.B?this:new bf(b,this.nodes,this.i,this.s,this.D)};f.fa=function(a,b){return V(b,this)};bf.prototype[xa]=function(){return Ub(this)};
function Xe(a){switch(arguments.length){case 1:return We(arguments[0]);case 3:return cf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",arguments.length].join(""));}}function We(a){return cf(a,0,null)}function cf(a,b,c){if(c==null)for(c=a.length;;)if(b<c){var d=a[b];if(y(d)&&(d=d.sb(),y(d)))return new bf(null,a,b+1,d,null);b+=1}else return null;else return new bf(null,a,b,c,null)}function df(a,b){this.pa=a;this.ac=b;this.Tb=!1}
df.prototype.sa=function(){return!this.Tb||this.ac.sa()};df.prototype.next=function(){if(this.Tb)return this.ac.next();this.Tb=!0;return new qe(null,this.pa)};df.prototype.remove=function(){return Error("Unsupported operation")};function ef(a,b,c,d,e,g){this.B=a;this.v=b;this.root=c;this.oa=d;this.pa=e;this.D=g;this.A=16123663;this.G=139268}f=ef.prototype;f.toString=function(){return zb(this)};f.keys=function(){return Ub(ve.j?ve.j(this):ve.call(null,this))};f.entries=function(){return oe(I(this))};
f.values=function(){return Ub(we.j?we.j(this):we.call(null,this))};f.has=function(a){return Qc(this,a)};f.get=function(a,b){return this.da(null,a,b)};f.forEach=function(a){for(var b=I(this),c=null,d=0,e=0;;)if(e<d){var g=c.na(null,e),h=W(g,0,null);g=W(g,1,null);a.l?a.l(g,h):a.call(null,g,h);e+=1}else if(b=I(b))Lc(b)?(c=rb(b),b=sb(b),h=c,d=T(c),c=h):(c=M(b),h=W(c,0,null),g=W(c,1,null),a.l?a.l(g,h):a.call(null,g,h),b=P(b),c=null,d=0),e=0;else return null};f.va=function(a,b){return this.da(null,b,null)};
f.da=function(a,b,c){return b==null?this.oa?this.pa:c:this.root==null?c:this.root.Ka(0,Jb(b),b,c)};f.Db=function(a,b,c){a=this.oa?b.u?b.u(c,null,this.pa):b.call(null,c,null,this.pa):c;R(a)?b=Ta(a):this.root!=null?(b=this.root.ub(b,a),b=R(b)?bc.j?bc.j(b):bc.call(null,b):b):b=a;return b};f.wa=function(){var a=this.root?xb(this.root):new Ed(Dd);return this.oa?new df(this.pa,a):a};f.ba=function(){return this.B};f.Y=function(){return this.v};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Yb(this)};
f.Z=function(a,b){return me(this,b)};f.ob=function(){return new ff(this.root,this.v,this.oa,this.pa)};f.la=function(){return Wa(ze,this.B)};f.Ob=function(a,b){if(b==null)return this.oa?new ef(this.B,this.v-1,this.root,!1,null,null):this;if(this.root==null)return this;a=this.root.tb(0,Jb(b),b);return a===this.root?this:new ef(this.B,this.v-1,a,this.oa,this.pa,null)};
f.Ia=function(a,b,c){if(b==null)return this.oa&&c===this.pa?this:new ef(this.B,this.oa?this.v:this.v+1,this.root,!0,c,null);a=new He;b=(this.root==null?Qe:this.root).ya(0,Jb(b),b,c,a);return b===this.root?this:new ef(this.B,a.H?this.v+1:this.v,b,this.oa,this.pa,null)};f.ib=function(a,b){return b==null?this.oa:this.root==null?!1:this.root.Ka(0,Jb(b),b,Nc)!==Nc};f.W=function(){if(this.v>0){var a=this.root!=null?this.root.sb():null;return this.oa?V(new qe(null,this.pa),a):a}return null};
f.ca=function(a,b){return b===this.B?this:new ef(b,this.v,this.root,this.oa,this.pa,this.D)};f.fa=function(a,b){if(Kc(b))return this.Ia(null,D(b,0),D(b,1));a=this;for(b=I(b);;){if(b==null)return a;var c=M(b);if(Kc(c))a=Na(a,D(c,0),D(c,1)),b=P(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};f.j=function(a){return this.va(null,a)};f.l=function(a,b){return this.da(null,a,b)};var ze=new ef(null,0,null,!1,null,Zb);ef.prototype[xa]=function(){return Ub(this)};
function ff(a,b,c,d){this.O={};this.root=a;this.count=b;this.oa=c;this.pa=d;this.A=259;this.G=56}function gf(a,b,c){if(a.O){if(b==null)a.pa!==c&&(a.pa=c),a.oa||(a.count+=1,a.oa=!0);else{var d=new He;b=(a.root==null?Qe:a.root).za(a.O,0,Jb(b),b,c,d);b!==a.root&&(a.root=b);d.H&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}f=ff.prototype;f.Y=function(){if(this.O)return this.count;throw Error("count after persistent!");};
f.va=function(a,b){return b==null?this.oa?this.pa:null:this.root==null?null:this.root.Ka(0,Jb(b),b)};f.da=function(a,b,c){return b==null?this.oa?this.pa:c:this.root==null?c:this.root.Ka(0,Jb(b),b,c)};
f.rb=function(a,b){a:{if(this.O){if(re(b)){a=gf(this,Ee.j?Ee.j(b):Ee.call(null,b),Fe.j?Fe.j(b):Fe.call(null,b));break a}if(Kc(b)){a=gf(this,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));break a}a=I(b);for(b=this;;){var c=M(a);if(y(c))a=P(a),b=gf(b,Ee.j?Ee.j(c):Ee.call(null,c),Fe.j?Fe.j(c):Fe.call(null,c));else{a=b;break a}}}else throw Error("conj! after persistent");a=void 0}return a};
f.Fb=function(){if(this.O){this.O=null;var a=new ef(null,this.count,this.root,this.oa,this.pa,null)}else throw Error("persistent! called twice");return a};f.jb=function(a,b,c){return gf(this,b,c)};f.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.l(arguments[1],arguments[2]);default:throw Error("Invalid arity: "+G.j(arguments.length-1));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(ya(b)))};
f.j=function(a){return this.va(null,a)};f.l=function(a,b){return this.da(null,a,b)};function hf(a,b){this.M=a;this.Da=b;this.A=32374988;this.G=0}f=hf.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.Da};f.ea=function(){var a=(this.M!=null?this.M.A&128||w===this.M.pb||(this.M.A?0:z(Ha,this.M)):z(Ha,this.M))?this.M.ea():P(this.M);return a==null?null:new hf(a,null)};f.aa=function(){return Wb(this)};
f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return this.M.ha(null).key};f.ma=function(){var a=(this.M!=null?this.M.A&128||w===this.M.pb||(this.M.A?0:z(Ha,this.M)):z(Ha,this.M))?this.M.ea():P(this.M);return a!=null?new hf(a,null):N};f.W=function(){return this};f.ca=function(a,b){return b===this.Da?this:new hf(this.M,b)};f.fa=function(a,b){return V(b,this)};hf.prototype[xa]=function(){return Ub(this)};
function ve(a){return(a=I(a))?new hf(a,null):null}function Ee(a){return Qa(a)}function jf(a,b){this.M=a;this.Da=b;this.A=32374988;this.G=0}f=jf.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.ba=function(){return this.Da};f.ea=function(){var a=(this.M!=null?this.M.A&128||w===this.M.pb||(this.M.A?0:z(Ha,this.M)):z(Ha,this.M))?this.M.ea():P(this.M);return a==null?null:new jf(a,null)};f.aa=function(){return Wb(this)};
f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return qc(b,this)};f.ja=function(a,b,c){return sc(b,c,this)};f.ha=function(){return this.M.ha(null).H};f.ma=function(){var a=(this.M!=null?this.M.A&128||w===this.M.pb||(this.M.A?0:z(Ha,this.M)):z(Ha,this.M))?this.M.ea():P(this.M);return a!=null?new jf(a,null):N};f.W=function(){return this};f.ca=function(a,b){return b===this.Da?this:new jf(this.M,b)};f.fa=function(a,b){return V(b,this)};jf.prototype[xa]=function(){return Ub(this)};
function we(a){return(a=I(a))?new jf(a,null):null}function Fe(a){return Ra(a)}function ed(a){if(a!=null&&(a.G&4096||w===a.kc))return a.name;if(typeof a==="string")return a;throw Error(["Doesn't support name: ",C(a)].join(""));}function kf(a,b,c){this.start=a;this.step=b;this.count=c;this.A=82;this.G=0}f=kf.prototype;f.Y=function(){return this.count};f.ha=function(){return this.start};f.na=function(a,b){return this.start+b*this.step};
f.ua=function(a,b,c){return b>=0&&b<this.count?this.start+b*this.step:c};f.Lb=function(){if(this.count<=1)throw Error("-drop-first of empty chunk");return new kf(this.start+this.step,this.step,this.count-1)};function lf(a,b,c){this.i=a;this.end=b;this.step=c}lf.prototype.sa=function(){return this.step>0?this.i<this.end:this.i>this.end};lf.prototype.next=function(){var a=this.i;this.i+=this.step;return a};
function mf(a,b,c,d,e,g){this.B=a;this.start=b;this.end=c;this.step=d;this.v=e;this.D=g;this.A=32375006;this.G=402944}f=mf.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();f.na=function(a,b){if(0<=b&&b<this.Y(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&this.step===0)return this.start;throw Error("Index out of bounds");};
f.ua=function(a,b,c){return 0<=b&&b<this.Y(null)?this.start+b*this.step:0<=b&&this.start>this.end&&this.step===0?this.start:c};f.wa=function(){return new lf(this.start,this.end,this.step)};f.ba=function(){return this.B};
f.ea=function(){return this.step>0?this.start+this.step<this.end?new mf(null,this.start+this.step,this.end,this.step,Math.ceil((this.end-(this.start+this.step))/this.step),null):null:this.start+this.step>this.end?new mf(null,this.start+this.step,this.end,this.step,Math.ceil((this.end-(this.start+this.step))/this.step),null):null};f.Y=function(){return this.v};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};
f.ia=function(a,b){return cc(this,b)};f.ja=function(a,b,c){for(a=this.start;;)if(this.step>0?a<this.end:a>this.end){c=b.l?b.l(c,a):b.call(null,c,a);if(R(c))return Ta(c);a+=this.step}else return c};f.ha=function(){return this.start};f.ma=function(){var a=this.ea();return a==null?N:a};f.W=function(){return this};f.nb=function(){var a=this.v;return new kf(this.start,this.step,a<32?a:32)};
f.Ja=function(){if(this.v<=32)return N;var a=this.start+this.step*32;return this.step>0?this.end<=a?N:new mf(null,a,this.end,this.step,Math.ceil((this.end-a)/this.step),null):this.step<0?this.end>=a?N:new mf(null,a,this.end,this.step,Math.ceil((this.end-a)/this.step),null):this.end===a?N:new Ld(null,-1,a,null)};f.ca=function(a,b){return b===this.B?this:new mf(b,this.start,this.end,this.step,this.v,this.D)};f.fa=function(a,b){return V(b,this)};f.Cb=function(){return I(this.Ja(null))};
mf.prototype[xa]=function(){return Ub(this)};function nf(a,b,c,d,e,g,h){this.B=a;this.start=b;this.end=c;this.step=d;this.X=e;this.Ab=g;this.D=h;this.G=140800;this.A=32374988}f=nf.prototype;f.toString=function(){return zb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return S(this,b,0);case 2:return S(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return S(this,b,0)};a.l=function(b,c){return S(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return U(this,c,T(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return U(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.l=function(c,d){return U(this,c,d)};return b}();
function of(a){if(a.X==null){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];a:{var c=0;for(var d=a.start;;){if(c<32)if(b[c]=d,c+=1,d+=a.step,a.step>0?d<a.end:d>a.end)continue;else{c=a.X=new id(b,0,c);break a}else{c=d;break a}break}c=void 0}a.X==null&&(a.X=new id(b,0,32),(a.step>0?c<a.end:c>a.end)&&(a.Ab=new nf(null,c,a.end,a.step,null,null,null)))}}
f.wa=function(){return new lf(this.start,this.end,this.step)};f.ba=function(){return this.B};f.ea=function(){return this.step>0?this.start+this.step<this.end?new nf(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new nf(null,this.start+this.step,this.end,this.step,null,null,null):null};f.aa=function(){var a=this.D;return a!=null?a:this.D=a=Wb(this)};f.Z=function(a,b){return oc(this,b)};f.la=function(){return N};f.ia=function(a,b){return qc(b,this)};
f.ja=function(a,b,c){for(a=this.start;;)if(this.step>0?a<this.end:a>this.end){c=b.l?b.l(c,a):b.call(null,c,a);if(R(c))return Ta(c);a+=this.step}else return c};f.ha=function(){return this.start};f.ma=function(){var a=this.ea();return a==null?N:a};f.W=function(){return this};f.nb=function(){of(this);return this.X};f.Ja=function(){of(this);return this.Ab==null?N:this.Ab};f.ca=function(a,b){return b===this.B?this:new nf(b,this.start,this.end,this.step,this.X,this.Ab,this.D)};
f.fa=function(a,b){return V(b,this)};f.Cb=function(){return I(this.Ja(null))};nf.prototype[xa]=function(){return Ub(this)};function pf(a,b){return b<=a?N:Pc(a)&&Pc(b)&&Pc(1)?new mf(null,a,b,1,Math.ceil(b-a),null):new nf(null,a,b,1,null,null,null)}
function qf(a,b,c,d,e,g,h){var k=sa;sa=sa==null?null:sa-1;try{if(sa!=null&&sa<0)return F(a,"#");F(a,c);if((g!=null?rf.j(g):null)===0)I(h)&&F(a,function(){var r=sf.j(g);return y(r)?r:"..."}());else{if(I(h)){var l=M(h);b.u?b.u(l,a,g):b.call(null,l,a,g)}for(var m=P(h),n=(g!=null?rf.j(g):0)-1;;)if(!m||n!=null&&n===0){I(m)&&n===0&&(F(a,d),F(a,function(){var r=sf.j(g);return y(r)?r:"..."}()));break}else{F(a,d);var p=M(m);c=a;h=g;b.u?b.u(p,c,h):b.call(null,p,c,h);var q=P(m);c=n-1;m=q;n=c}}return F(a,e)}finally{sa=
k}}function tf(a,b){for(b=I(b);;){if(b==null)return null;F(a,M(b));b=P(b)}}function uf(a){if(oa==null)throw Error("No *print-fn* fn set for evaluation environment");oa.call(null,a)}var vf={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function wf(a){return['"',C(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return vf[b]})),'"'].join("")}function xf(a,b){return(a=Oc(a!=null?yf.j(a):!1))?(a=b!=null?b.A&131072||w===b.jc?!0:!1:!1)?Fc(b)!=null:a:a}
function zf(a,b,c){if(a==null)return F(b,"nil");if(xf(c,a)){F(b,"^");var d=Fc(a);Z.u?Z.u(d,b,c):Z.call(null,d,b,c);F(b," ")}if(a.sc)return a.Nc(a,b,c);if(a!=null?a.A&2147483648||w===a.ga||(a.A?0:z(kb,a)):z(kb,a))return lb(a,b,c);if(a===!0||a===!1)return F(b,C(a));if(typeof a==="number")return F(b,y(isNaN(a))?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":C(a));if(a!=null&&a.constructor===Object)return F(b,"#js "),d=la(a).map(function(g){return new qe(g.match(/^[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*$/)!=
null?dd.j(g):g,a[g])}),Af.P?Af.P(d,Z,b,c):Af.call(null,d,Z,b,c);if(y(ua(a)))return qf(b,Z,"#js ["," ","]",c,a);if(typeof a==="string")return y(c!=null?Bf.j(c):ra)?F(b,wf(a)):F(b,a);if(typeof a==="function"){var e=a.name;c=y(function(){var g=e==null;return g?g:/^[\s\xa0]*$/.test(e)}())?"Function":e;return tf(b,pc(["#object[",c,y(!1)?[' "',C(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(g,h){for(g=C(g);;)if(g.length<h)g=["0",g].join("");else return g},tf(b,pc(['#inst "',c(a.getUTCFullYear(),
4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return tf(b,pc(['#"',a.source,'"']));if(za(a))return tf(b,pc(["#object[",a.toString(),"]"]));if(y(function(){var g=a==null?null:a.constructor;return g==null?null:g.Qb}()))return tf(b,pc(["#object[",a.constructor.Qb.replace(RegExp("/","g"),"."),"]"]));e=function(){var g=a==null?null:a.constructor;
return g==null?null:g.name}();c=y(function(){var g=e==null;return g?g:/^[\s\xa0]*$/.test(e)}())?"Object":e;return a.constructor==null?tf(b,pc(["#object[",c,"]"])):tf(b,pc(["#object[",c," ",C(a),"]"]))}function Z(a,b,c){var d=Cf.j(c);return y(d)?(c=Na(c,Df,zf),d.u?d.u(a,b,c):d.call(null,a,b,c)):zf(a,b,c)}
function Ef(a){var b=ra;ra=!1;try{if(Gc(a))var c="";else{var d=C,e=new na,g=new yb(e);Z(M(a),g,null);for(var h=P(a);h!=null;)F(g," "),Z(M(h),g,null),h=P(h);c=d(e)}uf(c)}finally{ra=b}y(qa)&&uf("\n");return null}function Ff(a){return a instanceof Lb?Pb.l(null,ed(a)):dd.l(null,ed(a))}
function Gf(a){if(y(!1)){var b=[],c=I(a);a=I(c);var d=M(a);P(a);W(d,0,null);W(d,1,null);for(a=null;;){d=I(c);c=M(d);var e=P(d),g=c;c=W(g,0,null);d=W(g,1,null);if(y(g))if(c instanceof H||c instanceof Lb)if(y(a))if(Q.l(a,cd(c))){b.push(new qe(Ff(c),d));c=e;continue}else return null;else if(a=cd(c),y(a)){b.push(new qe(Ff(c),d));c=e;continue}else return null;else return null;else return[a,b];break}}else return null}
function Hf(a,b,c,d,e){return qf(d,function(g,h,k){var l=Qa(g);c.u?c.u(l,h,k):c.call(null,l,h,k);F(h," ");g=Ra(g);return c.u?c.u(g,h,k):c.call(null,g,h,k)},[C(a),"{"].join(""),", ","}",e,I(b))}function Af(a,b,c,d){var e=Ic(a)?Gf(a):null,g=e==null?null:e[0];return y(g)?Hf(["#:",C(g)].join(""),e[1],b,c,d):Hf(null,a,b,c,d)}J.prototype.ga=w;J.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};fd.prototype.ga=w;fd.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};
qe.prototype.ga=w;qe.prototype.$=function(a,b,c){return qf(b,Z,"["," ","]",c,this)};$e.prototype.ga=w;$e.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};se.prototype.ga=w;se.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};Vb.prototype.ga=w;Vb.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};ee.prototype.ga=w;ee.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};bd.prototype.ga=w;bd.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};
lc.prototype.ga=w;lc.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};mf.prototype.ga=w;mf.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};ef.prototype.ga=w;ef.prototype.$=function(a,b,c){return Af(this,Z,b,c)};bf.prototype.ga=w;bf.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};kd.prototype.ga=w;kd.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};Hd.prototype.ga=w;
Hd.prototype.$=function(a,b,c){F(b,"#object[cljs.core.Atom ");Z(new ue(null,1,[If,this.state],null),b,c);return F(b,"]")};jf.prototype.ga=w;jf.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};Ld.prototype.ga=w;Ld.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};Y.prototype.ga=w;Y.prototype.$=function(a,b,c){return qf(b,Z,"["," ","]",c,this)};$c.prototype.ga=w;$c.prototype.$=function(a,b){return F(b,"()")};ue.prototype.ga=w;
ue.prototype.$=function(a,b,c){return Af(this,Z,b,c)};nf.prototype.ga=w;nf.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};hf.prototype.ga=w;hf.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};wc.prototype.ga=w;wc.prototype.$=function(a,b,c){return qf(b,Z,"("," ",")",c,this)};function Jf(a){return function(b,c){b=a.l?a.l(b,c):a.call(null,b,c);return R(b)?new ac(b):b}}
function Kf(a){var b=Jf(a);return function(){function c(h,k){return Rc(b,h,k)}function d(h){return a.j?a.j(h):a.call(null,h)}function e(){return a.J?a.J():a.call(null)}var g=null;g=function(h,k){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,h);case 2:return c.call(this,h,k)}throw Error("Invalid arity: "+arguments.length);};g.J=e;g.j=d;g.l=c;return g}()}
function Lf(a){if(typeof a==="string"){var b=/[+-]?\d+/;if(typeof a==="string")if(b=b.exec(a),b!=null&&Q.l(b[0],a))if(b.length===1)b=b[0];else if(y(re.j?re.j(b):re.call(null,b)))b=new Y(null,2,5,de,[Ee.j?Ee.j(b):Ee.call(null,b),Fe.j?Fe.j(b):Fe.call(null,b)],null);else if(Kc(b))b=Ec(b,null);else if(y(ua(b)))b:{var c=b.length;if(c<32)b=new Y(null,c,5,de,b,null);else{for(var d=b.slice(0,32),e=32,g=(new Y(null,32,5,de,d,null)).ob(null);;)if(e<c)d=e+1,g=nb(g,b[e]),e=d;else{b=ob(g);break b}b=void 0}}else b=
ob(Rc(nb,mb(vc),b));else b=null;else throw new TypeError("re-matches must match against a string.");return y(b)?(a=parseInt(a),a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER?a:null):b}throw Error(["Expected string, got: ",C(a==null?"nil":t(a))].join(""));}typeof console!=="undefined"&&ta();ta();var Df=new H(null,"fallback-impl","fallback-impl",-1501286995),yf=new H(null,"meta","meta",1499536964),If=new H(null,"val","val",128701612),rf=new H(null,"print-length","print-length",1931866356),Mf=new H(null,"action","action",-811238024),Nf=new H(null,"note","note",1426297904),Of=new H(null,"string","string",-1989541586),Pf=new H(null,"value","value",305978217),Qf=new H(null,"int","int",-1741416922),Rf=new H(null,"arguments","arguments",-1182834456),Sf=new H(null,"float","float",-1732389368),Tf=
new H(null,"double","double",884886883),sf=new H(null,"more-marker","more-marker",-14717935),Uf=new H(null,"id","id",-1388402092),Vf=new H(null,"params","params",710516235),Wf=new H(null,"type","type",1174270348),Bf=new H(null,"readably","readably",1129599760),Cf=new H(null,"alt-impl","alt-impl",670969595),Xf=new H(null,"bytes","bytes",1175866680),Yf=new H(null,"path","path",-188191168),Zf=new H(null,"target","target",253001721);function $f(a){var b=new na;for(a=I(a);;)if(a!=null)b.append(""+G.j(M(a))),a=P(a),a!=null&&b.append(" ");else return b.toString()};var ag={},bg={},cg=[];function dg(a,b){var c=bg[a];if(c!==void 0)return c;try{cg.push(a);var d=ag[a],e=shadow$provide[a];if(d===void 0){if(e===void 0)throw"Module not provided: "+a;d={exports:{}};ag[a]=d}if(e){delete shadow$provide[a];try{e.call(d,dg,d,d.exports,aa)}catch(h){throw console.warn("shadow-cljs - failed to load",a),console.error(h),h;}if(b){var g=b.globals;if(g)for(a=0;a<g.length;a++)window[g[a]]=d.exports}}}finally{cg.pop()}return d.exports}dg.cache={};dg.resolve=function(a){return a};
dg.exportCopy=function(a,b){let c={};a=a.exports;for(let d in b)d=="default"||d in a||d in c||(c[d]={enumerable:!0,get:function(){return b[d]}});Object.defineProperties(a,c)};dg.esmDefault=function(a){return a&&a.__esModule?a:{"default":a}};dg.dynamic=function(a){return Promise.resolve().then(function(){return dg(a)})};var eg;eg=dg(3,{});function fg(a){if(typeof a==="number"&&Pc(a))return Qf;if(typeof a!=="number"||Pc(a)){if(a instanceof BigInt)return Tf;if(typeof a==="string")return Of;if(a instanceof Uint8Array)return Xf;throw Error("Unsupported type: "+G.j(a==null?null:a.constructor));}return Sf}function gg(a){var b=(a%4+4)%4;return b===0?a:a+(4-b)}
function hg(a){a=a instanceof H?a.xa:null;switch(a){case "int":return"i";case "float":return"f";case "double":return"d";case "string":return"s";case "bytes":return"b";default:throw Error("No matching clause: "+G.j(a));}}var ig=new TextEncoder;function jg(a,b,c){var d=new Uint8Array(a.buffer,a.byteOffset+b);c=ig.encodeInto(c,d).written;d=gg(c+1);for(var e=d-c,g=0;;)if(g<e)a.setUint8(b+c+g,0),g+=1;else break;return d}
function kg(a){var b=lg,c=Cd(a);a=Mb(c,Yf);c=Mb(c,Rf);c=Nd(function(h){return Kc(h)?new ue(null,2,[Wf,M(h),Pf,tc(h)],null):new ue(null,2,[Wf,fg(h),Pf,h],null)},c);var d=","+G.j(zd(G,Kd.l(Gd.l(hg,Wf),c)));T(a);a=jg(b,0,a);d=jg(b,a,d);var e=a+d;for(a=c;;){if(Gc(a))return e;var g=M(a);c=function(){var h=Wf.j(g);h=h instanceof H?h.xa:null;switch(h){case "int":h=e;var k=Pf.j(g);b.setInt32(h,k,!1);return 4;case "float":return h=e,k=Pf.j(g),b.setFloat32(h,k,!1),4;case "double":return h=e,k=Pf.j(g),b.setFloat64(h,
k,!1),8;case "string":return jg(b,e,Pf.j(g));case "bytes":var l=e,m=Pf.j(g);h=m.length;k=gg(h);var n=l+4,p=new Uint8Array(b.buffer,n,h);b.setInt32(l,h,!1);p.set(m);l=k-h;for(m=0;;)if(m<l)b.setUint8(n+h+m,0),m+=1;else break;return 4+k;default:throw Error("No matching clause: "+G.j(h));}}();c=e+c;a=Sb(a);e=c}};class qg{constructor(a,b){this.vc=100;this.tc=a;this.xc=b;this.Ib=0;this.Hb=null}get(){let a;this.Ib>0?(this.Ib--,a=this.Hb,this.Hb=a.next,a.next=null):a=this.tc();return a}put(a){this.xc(a);this.Ib<this.vc&&(this.Ib++,a.next=this.Hb,this.Hb=a)}};class rg{constructor(){this.Jb=this.mb=null}add(a,b){const c=sg.get();c.set(a,b);this.Jb?this.Jb.next=c:this.mb=c;this.Jb=c}remove(){let a=null;this.mb&&(a=this.mb,this.mb=this.mb.next,this.mb||(this.Jb=null),a.next=null);return a}}var sg=new qg(()=>new tg,a=>a.reset());class tg{constructor(){this.next=this.scope=this.Fa=null}set(a,b){this.Fa=a;this.scope=b;this.next=null}reset(){this.next=this.scope=this.Fa=null}};function ug(){return u("iPhone")&&!u("iPod")&&!u("iPad")};u("Opera");u("Trident")||u("MSIE");u("Edge");!u("Gecko")||ma().toLowerCase().indexOf("webkit")!=-1&&!u("Edge")||u("Trident")||u("MSIE")||u("Edge");ma().toLowerCase().indexOf("webkit")!=-1&&!u("Edge")&&u("Mobile");u("Macintosh");u("Windows");u("Linux")||u("CrOS");u("Android");ug();u("iPad");u("iPod");ug()||u("iPad")||u("iPod");ma().toLowerCase().indexOf("kaios");function vg(){var a=document;var b="IFRAME";a.contentType==="application/xhtml+xml"&&(b=b.toLowerCase());return a.createElement(b)};var wg;
function xg(){var a=aa.MessageChannel;typeof a==="undefined"&&typeof window!=="undefined"&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var e=vg();e.style.display="none";document.documentElement.appendChild(e);var g=e.contentWindow;e=g.document;e.open();e.close();var h="callImmediate"+Math.random(),k=g.location.protocol=="file:"?"*":g.location.protocol+"//"+g.location.host;e=ha(function(l){if((k=="*"||l.origin==k)&&l.data==h)this.port1.onmessage()},this);g.addEventListener("message",e,
!1);this.port1={};this.port2={postMessage:function(){g.postMessage(h,k)}}});if(typeof a!=="undefined"&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(c.next!==void 0){c=c.next;var e=c.Ub;c.Ub=null;e()}};return function(e){d.next={Ub:e};d=d.next;b.port2.postMessage(0)}}return function(e){aa.setTimeout(e,0)}};function yg(a){aa.setTimeout(()=>{throw a;},0)};let zg,Ag=!1,Bg=new rg,Dg=(a,b)=>{zg||Cg();Ag||(zg(),Ag=!0);Bg.add(a,b)},Cg=()=>{if(aa.Promise&&aa.Promise.resolve){const a=aa.Promise.resolve(void 0);zg=()=>{a.then(Eg)}}else zg=()=>{var a=Eg;typeof aa.setImmediate!=="function"||aa.Window&&aa.Window.prototype&&!u("Edge")&&aa.Window.prototype.setImmediate==aa.setImmediate?(wg||=xg(),wg(a)):aa.setImmediate(a)}};var Eg=()=>{let a;for(;a=Bg.remove();){try{a.Fa.call(a.scope)}catch(b){yg(b)}sg.put(a)}Ag=!1};function Fg(a,b){this.Ca=Gg;this.$b=void 0;this.hb=this.Ha=this.fb=null;this.Gb=this.Rb=!1;if(a!=ka)try{var c=this;a.call(b,function(d){Hg(c,Ig,d)},function(d){Hg(c,Jg,d)})}catch(d){Hg(this,Jg,d)}}var Gg=0,Ig=2,Jg=3;function Kg(){this.next=this.context=this.lb=this.xb=this.Na=null;this.yb=!1}Kg.prototype.reset=function(){this.context=this.lb=this.xb=this.Na=null;this.yb=!1};var Lg=new qg(function(){return new Kg},function(a){a.reset()});
function Mg(a,b,c){var d=Lg.get();d.xb=a;d.lb=b;d.context=c;return d}Fg.prototype.then=function(a,b,c){return Ng(this,typeof a==="function"?a:null,typeof b==="function"?b:null,c)};Fg.prototype.$goog_Thenable=!0;f=Fg.prototype;f.zc=function(a,b){return Ng(this,null,a,b)};f.catch=Fg.prototype.zc;f.cancel=function(a){if(this.Ca==Gg){var b=new Og(a);Dg(function(){Pg(this,b)},this)}};
function Pg(a,b){if(a.Ca==Gg)if(a.fb){var c=a.fb;if(c.Ha){for(var d=0,e=null,g=null,h=c.Ha;h&&(h.yb||(d++,h.Na==a&&(e=h),!(e&&d>1)));h=h.next)e||(g=h);e&&(c.Ca==Gg&&d==1?Pg(c,b):(g?(d=g,d.next==c.hb&&(c.hb=d),d.next=d.next.next):Qg(c),Rg(c,e,Jg,b)))}a.fb=null}else Hg(a,Jg,b)}function Sg(a,b){a.Ha||a.Ca!=Ig&&a.Ca!=Jg||Tg(a);a.hb?a.hb.next=b:a.Ha=b;a.hb=b}
function Ng(a,b,c,d){var e=Mg(null,null,null);e.Na=new Fg(function(g,h){e.xb=b?function(k){try{var l=b.call(d,k);g(l)}catch(m){h(m)}}:g;e.lb=c?function(k){try{var l=c.call(d,k);l===void 0&&k instanceof Og?h(k):g(l)}catch(m){h(m)}}:h});e.Na.fb=a;Sg(a,e);return e.Na}f.Ac=function(a){this.Ca=Gg;Hg(this,Ig,a)};f.Bc=function(a){this.Ca=Gg;Hg(this,Jg,a)};
function Hg(a,b,c){if(a.Ca==Gg){a===c&&(b=Jg,c=new TypeError("Promise cannot resolve to itself"));a.Ca=1;a:{var d=c,e=a.Ac,g=a.Bc;if(d instanceof Fg){Sg(d,Mg(e||ka,g||null,a));var h=!0}else{if(d)try{var k=!!d.$goog_Thenable}catch(m){k=!1}else k=!1;if(k)d.then(e,g,a),h=!0;else{k=typeof d;if(k=="object"&&d!=null||k=="function")try{var l=d.then;if(typeof l==="function"){Ug(d,l,e,g,a);h=!0;break a}}catch(m){g.call(a,m);h=!0;break a}h=!1}}}h||(a.$b=c,a.Ca=b,a.fb=null,Tg(a),b!=Jg||c instanceof Og||Vg(a,
c))}}function Ug(a,b,c,d,e){function g(l){k||(k=!0,d.call(e,l))}function h(l){k||(k=!0,c.call(e,l))}var k=!1;try{b.call(a,h,g)}catch(l){g(l)}}function Tg(a){a.Rb||(a.Rb=!0,Dg(a.uc,a))}function Qg(a){var b=null;a.Ha&&(b=a.Ha,a.Ha=b.next,b.next=null);a.Ha||(a.hb=null);return b}f.uc=function(){for(var a;a=Qg(this);)Rg(this,a,this.Ca,this.$b);this.Rb=!1};
function Rg(a,b,c,d){if(c==Jg&&b.lb&&!b.yb)for(;a&&a.Gb;a=a.fb)a.Gb=!1;if(b.Na)b.Na.fb=null,Wg(b,c,d);else try{b.yb?b.xb.call(b.context):Wg(b,c,d)}catch(e){Xg.call(null,e)}Lg.put(b)}function Wg(a,b,c){b==Ig?a.xb.call(a.context,c):a.lb&&a.lb.call(a.context,c)}function Vg(a,b){a.Gb=!0;Dg(function(){a.Gb&&Xg.call(null,b)})}var Xg=yg;function Og(a){ja.call(this,a)}ia(Og,ja);Og.prototype.name="cancel";function Yg(a){if(a!=null&&a.Sb!=null)a=a.Sb(a);else{var b=Yg[t(a==null?null:a)];if(b!=null)a=b.j?b.j(a):b.call(null,a);else if(b=Yg._,b!=null)a=b.j?b.j(a):b.call(null,a);else throw B("Promisable.-\x3epromise*",a);}return a};var Zg=new Hd(typeof Promise!=="undefined"?Promise:Fg);function $g(a){return new (Ta(Zg))(function(b){return b.j?b.j(a):b.call(null,a)})}function ah(a){return new (Ta(Zg))(function(b,c){return c.j?c.j(a):c.call(null,a)})}function bh(a,b){return(ch.j?ch.j(a):ch.call(null,a)).then(function(c){return b.j?b.j(c):b.call(null,c)})}Fg.prototype.Sb=function(){return this};Yg._=function(a){return $g(a)};typeof Promise!=="undefined"&&(Promise.prototype.Sb=function(){return this});
function ch(a){return Yg(a)};var lg=new DataView(new ArrayBuffer(65536)),dh=new Hd(1001),eh=new eg.SuperSonic({baseURL:"./supersonic/"});function fh(){var a=gh;try{return ch(bh(eh.init(),function(){return bh(Ef(pc(["Supersonic initialized!"])),function(){return bh(eh.loadSynthDefs(a),function(){return Ef(pc(["Synthdefs loaded!"]))})})}))}catch(b){return ah(b)}}function hh(a){var b=eh.sendOSC;a=kg(a);a=new Uint8Array(lg.buffer,0,a);return b.call(eh,a)}
var ih=Gd.l(hh,function(a,b){b=Cd(b);var c=Ob(b,Uf,-1),d=Ob(b,Mf,0),e=Ob(b,Zf,0),g=Mb(b,Vf);return new ue(null,2,[Yf,"/s_new",Rf,Md.u(new Y(null,4,5,de,[a,c,d,e],null),Kf,function(){return function l(k){return new fd(null,function(){for(;;){var m=I(k);if(m){if(Lc(m)){var n=rb(m),p=T(n),q=jd(p);a:{for(var r=0;;)if(r<p){var v=D(n,r),x=W(v,0,null),A=W(v,1,null);v=q;x=new Y(null,2,5,de,[ed(x),A],null);v.add(x);r+=1}else{n=!0;break a}n=void 0}return n?ld(q.X(),l(sb(m))):ld(q.X(),null)}n=M(m);q=W(n,0,null);
n=W(n,1,null);return V(new Y(null,2,5,de,[ed(q),n],null),l(Sb(m)))}return null}},null)}(g)}())],null)}),jh=Gd.l(hh,function(a){return new ue(null,2,[Yf,"/n_free",Rf,new Y(null,1,5,de,[a],null)],null)});
Gd.l(hh,function(a,b){return new ue(null,2,[Yf,"/n_set",Rf,Md.u(new Y(null,1,5,de,[a],null),Kf,function(){return function e(d){return new fd(null,function(){for(;;){var g=I(d);if(g){if(Lc(g)){var h=rb(g),k=T(h),l=jd(k);a:{for(var m=0;;)if(m<k){var n=D(h,m),p=W(n,0,null),q=W(n,1,null);n=l;p=new Y(null,2,5,de,[ed(p),q],null);n.add(p);m+=1}else{h=!0;break a}h=void 0}return h?ld(l.X(),e(sb(g))):ld(l.X(),null)}h=M(g);l=W(h,0,null);h=W(h,1,null);return V(new Y(null,2,5,de,[ed(l),h],null),e(Sb(g)))}return null}},
null)}(b)}())],null)});var gh="sonic-pi-bass_foundation sonic-pi-bass_highend sonic-pi-beep sonic-pi-blade sonic-pi-bnoise sonic-pi-chipbass sonic-pi-chiplead sonic-pi-chipnoise sonic-pi-cnoise sonic-pi-dark_ambience sonic-pi-dpulse sonic-pi-dsaw sonic-pi-dtri sonic-pi-dull_bell sonic-pi-fm sonic-pi-gabberkick sonic-pi-gnoise sonic-pi-growl sonic-pi-hollow sonic-pi-hoover sonic-pi-kalimba sonic-pi-mixer sonic-pi-noise sonic-pi-organ_tonewheel sonic-pi-piano sonic-pi-pluck sonic-pi-pnoise sonic-pi-pretty_bell sonic-pi-prophet sonic-pi-pulse sonic-pi-rhodey sonic-pi-rodeo sonic-pi-saw sonic-pi-sc808_bassdrum sonic-pi-sc808_clap sonic-pi-sc808_claves sonic-pi-sc808_closed_hihat sonic-pi-sc808_congahi sonic-pi-sc808_congalo sonic-pi-sc808_congamid sonic-pi-sc808_cowbell sonic-pi-sc808_cymbal sonic-pi-sc808_maracas sonic-pi-sc808_open_hihat sonic-pi-sc808_rimshot sonic-pi-sc808_snare sonic-pi-sc808_tomhi sonic-pi-sc808_tomlo sonic-pi-sc808_tommid sonic-pi-square sonic-pi-subpulse sonic-pi-supersaw sonic-pi-tb303 sonic-pi-tech_saws sonic-pi-tri sonic-pi-winwood_lead sonic-pi-zawa".split(" ");
function kh(a){return function(){function b(d){var e=null;if(arguments.length>0){e=0;for(var g=Array(arguments.length-0);e<g.length;)g[e]=arguments[e+0],++e;e=new J(g,0,null)}return c.call(this,e)}function c(d){d=Cd(d);var e=Jd.l(dh,$b);ih(a,new ue(null,2,[Uf,e,Vf,d],null));return e}b.U=0;b.R=function(d){d=I(d);return c(d)};b.K=c;return b}()}function lh(a){var b=document.createElement("template");b.innerHTML=zd(G,a);return b.content.firstChild}
function mh(){return $f(function(){return function c(b){return new fd(null,function(){for(;;){var d=I(b);if(d){if(Lc(d)){var e=rb(d),g=T(e),h=jd(g);a:{for(var k=0;;)if(k<g){var l=D(e,k),m=h;l=""+G.j((50*Math.cos(Math.PI/3*l)).toFixed(2))+","+G.j((50*Math.sin(Math.PI/3*l)).toFixed(2));m.add(l);k+=1}else{e=!0;break a}e=void 0}return e?ld(h.X(),c(sb(d))):ld(h.X(),null)}h=M(d);return V(""+G.j((50*Math.cos(Math.PI/3*h)).toFixed(2))+","+G.j((50*Math.sin(Math.PI/3*h)).toFixed(2)),c(Sb(d)))}return null}},
null)}(pf(0,6))}())}function nh(a,b,c){var d=Math.sqrt(3)*a;if(!Pc(b))throw Error(["Argument must be an integer: ",C(b)].join(""));return new Y(null,2,5,de,[1.5*a*b,d*(c+((b&1)===0?.5:0))],null)}function oh(a){var b=Lf(a.getAttribute("data-hx"));a=Lf(a.getAttribute("data-hy"));return 60+b*4+(a+Math.floor(.5*b))*3}
function ph(){var a=window.innerWidth,b=window.innerHeight,c=a*.5,d=b*.5;return lh(pc(["\x3csvg viewBox\x3d'",-c," ",-d," ",a," ",b,"'\x3e","\x3cdefs\x3e","\x3cpolygon id\x3d'hex' points\x3d'",mh(),"' fill\x3d'#ff9900' stroke\x3dwhite stroke-width\x3d2 /\x3e","\x3c/defs\x3e",zd(G,function(){return function h(g){return new fd(null,function(){for(var k=g;;){var l=I(k);if(l){var m=l,n=M(m);if(l=I(function(p,q,r,v,x,A,K,O,X){return function xc(Ca){return new fd(null,function(vh,od,wh,xh,yh,zh,Ah,Bh,mg){return function(){for(;;){var mc=
I(Ca);if(mc){if(Lc(mc)){var ng=rb(mc),og=T(ng),ie=jd(og);return function(){for(var Ab=0;;)if(Ab<og){var nc=D(ng,Ab),th=ie,pd=nh(mg,od,nc),uh=W(pd,0,null);pd=W(pd,1,null);nc="\x3cuse href\x3d'#hex' data-hx\x3d"+G.j(od)+" data-hy\x3d"+G.j(nc)+" x\x3d"+G.j(uh)+" y\x3d"+G.j(pd)+" /\x3e";th.add(nc);Ab+=1}else return!0}()?ld(ie.X(),xc(sb(mc))):ld(ie.X(),null)}var pg=M(mc);return V(function(){var Ab=nh(mg,od,pg),nc=W(Ab,0,null);Ab=W(Ab,1,null);return"\x3cuse href\x3d'#hex' data-hx\x3d"+G.j(od)+" data-hy\x3d"+
G.j(pg)+" x\x3d"+G.j(nc)+" y\x3d"+G.j(Ab)+" /\x3e"}(),xc(Sb(mc)))}return null}}}(p,q,r,v,x,A,K,O,X),null)}}(k,n,m,l,a,b,c,d,50)(pf(-10,10))))return rd.l(l,h(Sb(k)));k=Sb(k)}else return null}},null)}(pf(-20,20))}()),"\x3c/svg\x3e"]))}var qh=Dd,rh=null;function sh(a,b){a=a.pointerId;var c=tc(Mb(qh,a));y(c)&&jh(c);return qh=zc.u(qh,a,new Y(null,2,5,de,[b,rh.l?rh.l(Nf,b):rh.call(null,Nf,b)],null))}
document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(ph());var a=lh(pc(["\x3cselect\x3e",function(){return function m(l){return new fd(null,function(){for(;;){var n=I(l);if(n){if(Lc(n)){var p=rb(n),q=T(p),r=jd(q);a:{for(var v=0;;)if(v<q){var x=D(p,v),A=r;x="\x3coption"+G.j(Q.l("sonic-pi-prophet",x)?" selected":null)+" value\x3d'"+G.j(x)+"'\x3e"+G.j(x)+"\x3c/option\x3e";A.add(x);v+=1}else{p=!0;break a}p=void 0}return p?ld(r.X(),m(sb(n))):ld(r.X(),null)}r=M(n);return V("\x3coption"+
G.j(Q.l("sonic-pi-prophet",r)?" selected":null)+" value\x3d'"+G.j(r)+"'\x3e"+G.j(r)+"\x3c/option\x3e",m(Sb(n)))}return null}},null)}(gh)}(),"\x3c/select\x3e"]));document.body.appendChild(a);a.addEventListener("change",function(k){return rh=kh(k.target.value)});document.querySelector("#start-button").addEventListener("click",function(k){k.target.setAttribute("disabled","disabled");return fh().then(function(){return k.target.remove()})});rh=kh("sonic-pi-prophet");a=I(document.querySelectorAll("use"));
for(var b=null,c=0,d=0;;)if(d<c){var e=b.na(null,d);e.addEventListener("pointerdown",function(k,l,m,n,p){return function(q){return sh(q,oh(p))}}(a,b,c,d,e));d+=1}else{var g=I(a);if(g){e=g;if(Lc(e))a=rb(e),d=sb(e),b=a,c=T(a),a=d;else{var h=M(e);h.addEventListener("pointerdown",function(k,l,m,n,p){return function(q){return sh(q,oh(p))}}(a,b,c,d,h,e,g));a=P(e);b=null;c=0}d=0}else break}window.addEventListener("pointermove",function(k){var l=document.elementFromPoint(k.clientX,k.clientY);var m=(m=Q.l("use",
l.tagName))?Mb(qh,k.pointerId):m;if(y(m)){m=oh(l);var n=Mb(qh,k.pointerId),p=W(n,0,null);W(n,1,null);return Q.l(m,p)?null:sh(k,oh(l))}return null});return window.addEventListener("pointerup",function(k){var l=tc(Mb(qh,k.pointerId));y(l)&&jh(l);return qh=Bc.l(qh,k.pointerId)})});
}).call(this);